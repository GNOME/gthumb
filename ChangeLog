2007-04-09  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS:
	* src/gth-browser.c: (go_to_uri):
	* src/main.c: (prepare_app): 
	  Fixed bug 427846 - Can't launch command line collections, and
          crash when selecting "Catalogs" from the location bar. Patch
	  by Manuel Braga.

2007-04-09  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS: general updates

2007-04-09  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/dlg-photo-importer.c: (valid_mime_type):
	Do not filter out RAW photo types.

2007-04-09  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gtk-utils.c: (_gtk_request_dialog_run):
	Return NULL if the dialog text entry is empty, instead of
	an empty string.

2007-04-08  Michael J. Chudobiak  <mjc@cvs.gnome.org>

        * src/gth-window-actions-entries.h: Alt+S for scaling,
        Alt+R for redeye removal.

2007-04-08  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-data.c: (file_data_load_exif_data):
	* libgthumb/gth-exif-utils.c: (exif_string_to_time_t),
	(get_exif_time):
	* libgthumb/gth-exif-utils.h:
	Make date-string to time_t conversions consistent
	between libexif and exiftool.

	* src/gth-window-actions-entries.h: Alt+S for scaling,
	Alt+R for redeye removal.

2007-04-08  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-browser.c: (window_update_image_info):
	* src/gth-viewer.c: (viewer_update_image_info):
	Overzealous code pruning in svn rev 1423 was reverted. The exif
	data was not being loaded, and thus not saved when a modified 
	imaged was saved. Oops.

2007-04-06  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-data.c: (compare_key), (file_data_load_exif_data):
	Load DateTime tags (and equivalents) for all files (like AVI files),
	not just JPG files, using exiftool if present. This permits videos
	to be sorted properly when sorting by Exif DateTime.

2007-04-05  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-exif-utils.c: (copy_exif_data):
	* libgthumb/gth-exif-utils.h:
	* src/catalog-web-exporter.c:
	(copy_exif_from_orig_and_reset_orientation):
	* src/rotation-utils.c: (apply_transformation_jpeg):
	Added non-corrupting exif data copy function to the
	web exporter, based on Joakim Larsson's patch.
	Experimental, needs dimension tag updates. Bug 408185.

2007-04-05  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/catalog-web-exporter.c:
	(copy_exif_from_orig_and_reset_orientation):
	Small memory leak fixed in error handling.

2007-04-05  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/rotation-utils.c: (apply_transformation_jpeg):
	Small memory leak fixed - tmpdir was not gfree'd.

2007-04-05  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-exif-utils.c: (gth_minimal_exif_tag_write),
	(read_orientation_field), (write_orientation_field):
	* libgthumb/gth-exif-utils.h:
	* src/dlg-change-date.c: (ok_clicked):
	* src/rotation-utils.c:
	* src/rotation-utils.h:
	Moved read_orientation_field, write_orientation_field into
	libgthumb/gth-exif-utils.c. General tidy-up of the new
	gth_minimal_exif_tag_write code.

2007-04-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (xdg_user_dir_lookup):
	* libgthumb/file-utils.h:
	* src/dlg-photo-importer.c: (dlg_photo_importer):
	Makes the PICTURES xdg-user-dir the default for photo import. 
	Bug 425365. Based on patch from Matthias Clasen.

2007-04-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (load_comment_from_xmp),
	(save_comment_xmp): Don't save time comment in xmp if
	it is zero.

	* libgthumb/gth-exif-utils.c: (get_metadata_for_file):
	* libgthumb/gth-exif-utils.h:
	* src/gth-exif-data-viewer.c: (gth_exif_data_viewer_update):
	* src/gthumb-preloader.c: (loader_done_cb):
	Tidy up.

2007-04-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-data.c: (file_data_new), (file_data_update):
	* libgthumb/gth-exif-utils.c: (get_metadata_for_file):
	Don't read metadata except for the metadata viewer. It is too
	slow for reading comments.

2007-04-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (load_comment_from_xmp):
	* libgthumb/file-data.c: (file_data_new), (file_data_update):
	* libgthumb/gth-exif-utils.c: (get_metadata_for_file):
	* libgthumb/gth-exif-utils.h:
	* src/gth-exif-data-viewer.c: (gth_exif_data_viewer_update):
	* src/gthumb-preloader.c: (loader_done_cb):
	Return cache mtime when using get_metadata_for_file.
	Add initial support for fast comment scanning, to reduce
	unnecessary metadata loads.

2007-04-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gthumb-preloader.c: (loader_done_cb): Do not
	preload metadata for the "requested" item, just the "next"
	and "prev" items.

2007-04-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-exif-utils.c: (get_metadata_for_file):
	Add mode where it just ensures that the metadata cache is
	up-to-date, rather than fully loading it.
	
	* src/gthumb-preloader.c: (loader_done_cb):
	Generate metadata cache during preload.

2007-03-30  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-data.c: (file_data_new):
	* libgthumb/file-data.h:
	* src/gth-exif-data-viewer.c: (gth_exif_data_viewer_update):
	Keep track of metadata mtimes in the filedata structure.

2007-03-30  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-data.c: (file_data_new), (file_data_unref):
	* libgthumb/file-data.h:
	* src/dlg-image-prop.c: (update_notebook_page):
	* src/gth-browser.c: (window_update_image_info):
	* src/gth-exif-data-viewer.c: (gth_exif_data_viewer_update):
	* src/gth-exif-data-viewer.h:
	* src/gth-viewer.c: (viewer_update_image_info):
	Store metadata hash in the file_data structure, when it is
	convenient, to eliminate duplicate file reads.

2007-03-30  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/glib-utils.c: (debug):
	Enable debug messages with an environment variable. Bug 361367.

	* src/gth-browser.c: (get_image_to_preload):
	Check dimensions of all images types, not just jpegs, to avoid
	preloading giant tiff files. Bug 160460. Also, don't preload
	remote files. Added more debug messages.

2007-03-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (resolve_symlinks): fixed call to get_uri_host

2007-03-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-actions-callbacks.c:
	* libgthumb/gtk-utils.c (exec_shell_script):
	* src/rotation-utils.c:
	* src/gth-location.c (gth_location_set_catalog_uri):
	* src/gth-browser.c (close__step6):
	* libgthumb/bookmarks.c (get_menu_item_tip):
	* src/main.c (reset_command_line_catalog):
	* libgthumb/file-utils.c:

	Use remove_host_from_uri and get_uri_host instead of
	remove_scheme_from_uri and get_uri_scheme (#423956).

2007-03-28  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/rotation-utils.c: (apply_transformation_jpeg):
	Rotate-on-import was broken, due to use of file:// URI. Added
	URI support to apply_transformation_jpeg to fix it.

2007-03-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-hue-saturation.c:
	* src/dlg-color-balance.c:
	* src/dlg-brightness-contrast.c:
	* src/dlg-posterize.c:

	Cancel the pixbuf operation before closing the dialog (#423715).

2007-03-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/rotation-utils.c (apply_transformation_jpeg):

	Fixed bug #423497 – fix build with gcc 2
	Patch by Jens Granseuer.

2007-03-27  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_redeye.glade: Use "Position" instead of
        "Selection". http://launchpad.net/ubuntu/+source/gthumb/+bug/85780.

2007-03-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.10.1 released ]

	* configure.in: updated for 2.10.1

2007-03-27  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS: general updates.

	* libgthumb/gth-sort-utils.c:
	(gth_sort_by_filename_but_ignore_path):
	Use unescaped URI for file sorting.

	* libgthumb/gtk-utils.c: (_gtk_request_dialog_run):
	Convert user-typed Unicode input dialog into "NFC" normalized
	form for consistency, and to avoid catalogs/libraries/categories
	with apparently identical names. Bug 423271.

	* src/dlg-search.c: (pattern_matched_by_keywords),
	(match_patterns), (directory_load_cb): Convert Unicode search
	patterns and search targets into NFC normalized form, to account
	for the fact that Unicode strings with identical meaning can
	be stored in different ways (composite vs non-composite
	characters, for instace). Also, use unescaped URI for
	file searches. Bug 423272.

2007-03-24  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c: cancel the async operation before closing
	the dialog (#420614).

2007-03-23  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS: general updates.

2007-03-23  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/jpegutils/jpegtran.c: (jpegtran_internal),
	(jpegtran_thumbnail), (jpegtran):
	* libgthumb/jpegutils/jpegtran.h:
	* src/rotation-utils.c: (jpeg_mcu_dialog),
	(apply_transformation_jpeg): Do not add APPn and COM markers to
	the EXIF thumbnail. Bug 411861. Patch by Jef Driesen.

2007-03-23  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (prune_cache):
	Fix cache-pruning command on Solaris (bug 421787).

2007-03-22  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-window-actions-entries.h:
	Added Alt+C for crop, Alt+R for resize.

2007-03-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-search.c:
	* libgthumb/gth-image-list.c:
	* libgthumb/gth-file-list.c: stop loading the thumbnails before closing
	the search progress dialog.  Remove all timeouts before finalizing the
	gth_file_list.  Attempt to fix bug #420788.

	* src/main.c: insert the function show_grabbing_focus inside the
	#ifdef HAVE_GTKUNIQUE

	* libgthumb/file-utils.c:
	* libgthumb/file-utils.h: added remove_host_from_uri and get_uri_host.

	Fixed problems resolving relative symlinks for ssh: URIs (#159884)

2007-03-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c: removed forgotten debug code

2007-03-21  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (get_file_mime_type):
	CR2 files sometimes misdetected as TIFF. Add special
	override, like we do for NEF files.

2007-03-21  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/thumb-loader.c: (thumb_loader_save_to_cache):
	Do not thumbnail the thumbnail directory. Bug 414711.

2007-03-21  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-browser.c: (gth_browser_set_toolbar_visibility),
	(gth_browser_show):
	* src/gth-viewer.c: (gth_viewer_set_toolbar_visibility):
	Fixed broken toolbar visibility pref. Bug 420557.

2007-03-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* NEWS: updated.

	* data/glade/gthumb_redeye.glade: reverted commit, no string changes
	are allowed in the stable branch.

2007-03-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c: The progess bar in the import dialog
	shows the overall download progress.  The delete operation is now
	asynchronous. (bug #156994).

2007-03-20  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_redeye.glade: Use "Position" instead of
	"Selection". http://launchpad.net/ubuntu/+source/gthumb/+bug/85780

2007-03-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-folder-selection-dialog.c: do not convert the path to utf8.

	* src/gth-browser-actions-callbacks.c: respect the
	'go to destination folder' option in the copy/move dialogs.

	* src/dlg-file-utils.c: fixed a bug that prevented the user to choose
	'overwrite this image' or 'do not overwrite this image' options in the
	overwrite dialog.

2007-03-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.10.0 released ]

	* NEWS:
	* README:
	* configure.in: updated for version 2.10.0

2007-03-16  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (mime_type_is_tiff),
	(get_pixbuf_using_external_converter), (gth_pixbuf_new_from_uri):
	Use tifftopnm and pamscale to generate tiff thumbnails, to reduce
	memory usage for very large tiff files. Partially resolves bug
	160460. Hopefully the gdk thumbnailing routines will be improved
	in the future, obsoleting this.

2007-03-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-file-list.c (gfl_set_thumbs_size): free the pixbufs cache
	when changing thumbnails size.

2007-03-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: removed the headers.

	* libgthumb/thumb-loader.c (thumb_loader_set_thumb_size):
	* libgthumb/thumb-loader.h: added function thumb_loader_set_thumb_size
	to change the size of the thumbnails.

	* libgthumb/gth-file-list.c (gfl_set_thumbs_size): use
	thumb_loader_set_thumb_size instead of creating a new thumb-loader.

	* libgthumb/gth-file-view-list.c: use small images when thumbnails are
	disabled.

2007-03-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/thumb-loader.c: removed unused function thumb_from_xpm_d
	* src/gth-exif-data-viewer.c (gth_exif_data_viewer_construct):
	hide the headers.

2007-03-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-redeye-removal.c (dlg_redeye_removal):
	* src/dlg-crop.c (dlg_crop):
	* src/dlg-scale-image.c (dlg_scale_image):
	* src/dlg-hue-saturation.c (dlg_hue_saturation):
	* src/dlg-brightness-contrast.c (dlg_brightness_contrast):
	* src/dlg-color-balance.c (dlg_color_balance):
	* src/dlg-posterize.c (dlg_posterize):

	Set modal flag on for dialogs that modify the current image.
	Fixes bug #417178 – saved image to the wrong file

	* NEWS:
	* configure.in: updated for 2.9.4

2007-03-09  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (load_comment_from_xmp):
	Initial support for loading XMP comment keywords.

2007-03-09  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (load_comment_from_xmp):
	Support for loading XMP and IPTC comment dates.

	* libgthumb/gth-exif-utils.c: (strip_sort_codes):
	* libgthumb/gth-exif-utils.h:
	New convenience function for handling metadata values.

2007-03-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/main.c (folder_is_film): do not remove the scheme.

	* libgthumb/file-utils.c (resolve_symlinks): removed double g_strconcat
	call,  added other comments.

	* libgthumb/file-utils.c (resolve_symlinks): simplified the code, added
	some comments.

2007-03-08  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (load_comment_from_xmp),
	(save_comment_xmp), (save_comment), (comments_load_comment):
	Initial support for loading XMP comments and locations.
	Times and keywords not implemented yet.

2007-03-08  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (delete_comment_xmp), (comment_delete),
	(save_comment_xmp), (save_comment):
	* libgthumb/gth-exif-utils.c: (append_to_command),
	(write_metadata_tag_to_file):
	Initial support for deleting XMP comments.

2007-03-08  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: (gth_exif_data_viewer_construct):
	* libgthumb/gth-exif-utils.c: (append_to_command),
	(write_metadata_tag_to_file):
	* libgthumb/gth-exif-utils.h: Supply hash when writing tags,
	instead of just one tag/value pair.

	* libgthumb/comments.c: (save_comment_exiftool), (save_comment):
	Initial support for storing comments in XMP tags.

2007-03-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (resolve_symlinks): fixed memory leak.

2007-03-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (resolve_symlinks): fixed links to absolute
	paths.

2007-03-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c: reimplemented resolve_all_symlinks to
	fix bug #159884.

	* src/main.c (reset_command_line_catalog): reset even when no arguments
	were specified.

2007-03-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/main.c: reset the startup location if it was set to the command
	line catalog.
	Fixes bug #98933 – Command Line collection should be deleted on startup
	if no files are passed as arguments

	* src/gth-browser.c: go to the catalog directory before activating the
	catalog.
	Fixes bug #407871 – Crash after deleting catalog file.

2007-03-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c:
	* libgthumb/gth-image-list.c:
	* libgthumb/gth-file-list.c:
	* libgthumb/gth-file-list.h:
	* libgthumb/gth-file-view.c:
	* libgthumb/gth-file-view.h:
	* libgthumb/gth-file-view-list.c:
	* libgthumb/gth-file-view-thumbs.c: moved the icons handling from the
	gth-file-view-* widgets to gth-file-list to avoid duplicated code.
	Use the icon associated to the file mime type instead of always using
	the "image/*" icon.

	* libgthumb/file-utils.c: save the mime_type strings in a local hash.

2007-03-07  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-exif-utils.c: (use_exiftool_for_metadata),
	(get_metadata_for_file):
	* libgthumb/gth-exif-utils.h:
	* src/gth-exif-data-viewer.c: (gth_exif_data_viewer_construct):
	Added use_exiftool_for_metadata convenience function.

2007-03-06  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/gthumb.desktop.in: Added missing semicolon.

2007-03-06  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS: general updates

	* libgthumb/jpegutils/jpegtran.c: (jpegtran_internal):
	* libgthumb/jpegutils/transupp.c: (jcopy_markers_exif),
	(jcopy_markers_execute):
	* libgthumb/jpegutils/transupp.h: Do not write a JFIF marker
	when it conflicts with the EXIF marker. Patch by Jef Driesen.

2007-03-06  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/gthumb.desktop.in:
	"Application" is not a valid category. Added some valid
	freedesktop categories.

2007-03-05  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/dlg-crop.c: (dlg_crop): The crop ratio was initialized
	incorrectly. The last custom w/h settings defined the crop
	ratio, even when custom mode was not the initial mode. Fixes
	bug 389872.

2007-03-05  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-file-view-list.c (gfv_remove): implemented "remove"
	for the list view (#389590).

2007-03-04  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/jpegutils/jpegtran.c: (update_exif_orientation):
	* libgthumb/jpegutils/jpegtran.h:
	Make update_exif_orientation non-static (usable elsewhere).

	* src/catalog-web-exporter.c:
	(copy_exif_from_orig_and_reset_orientation):
	Use update_exif_orientation to reset orientation tag in memory,
	rather than the file-based write_orientation_field. MakerNote
	corruption will happen either way, but in-memory is faster.

2007-03-04  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS: general updates

	* src/dlg-photo-importer.c: (save_image), (ok_clicked_cb):
	Unescape destination folder URI when saving, because the
	save functions are strictly local (non-URI). Bug 414665.

2007-03-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/gthumb.applications: removed

2007-03-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/Makefile.am:
	* data/gthumb.applications:
	* data/gthumb.desktop.in:
	Removed application-registry cruft. Added image/svg+xml mime type.

2007-03-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-exif-utils.c:
	* libgthumb/gth-exif-utils.h:
	Removed set_orientation_in_exif_data. Its function can be
	handled by update_exif_orientation or write_orientation_field.

	* src/catalog-web-exporter.c:
	(copy_exif_from_orig_and_reset_orientation):
	Use write_orientation_field to reset orientation, to avoid
	MakerNote corruption.

2007-03-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* AUTHORS:
	* data/glade/gthumb_tools.glade:
	* libgthumb/gth-exif-utils.c: (gth_minimal_exif_tag_write):
	* libgthumb/gth-exif-utils.h:
	* src/dlg-change-date.c: (ok_clicked), (update_sensitivity),
	(dlg_change_date):
	* src/rotation-utils.c: (write_orientation_field):
	Added gth_minimal_exif_tag_write, to update exif tags without
	corrupting the MakerNotes. Also, added the ability to update
	the exif DateTime tag using the "Change Date" tool. Patches
	by Joakim Larsson.

2007-02-28  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-exif-utils.c: (write_metadata_tag_to_file):
	* src/gth-exif-data-viewer.c: (cell_edited),
	(gth_exif_data_viewer_construct):
	Added skeleton code for metadata editing. Not functional yet.

2007-02-28  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (get_remote_cache_full_path),
	(get_metadata_cache_full_path), (prune_cache), (obtain_local_file),
	(get_pixbuf_using_external_converter):
	* libgthumb/file-utils.h:
	* libgthumb/gth-exif-utils.c: (write_line_to_cache),
	(hash_to_file), (get_metadata_for_file):
	* libgthumb/gthumb-init.c: (ensure_directories_exist):
	* libgthumb/typedefs.h:
	Split up remote cache and metadata cache. Generalize cache
	maintenance functions. Cache exiftool and libexif metadata,
	but overwrite libexif data if exiftool becomes available.

2007-02-27  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* configure.in: Note presence or absence of dcraw and exiftool.

2007-02-27  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-exif-utils.c: (get_metadata_for_file):
	Corrected error; metadata cache wasn't actually being used.

2007-02-27  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-exif-utils.c: (cache_to_hash),
	(get_metadata_for_file), (write_metadata_tag_to_file):
	* libgthumb/gth-libexif-metadata.c: (libexif_to_hash):
	* libgthumb/gth-libexif-metadata.h:
	Now the metadata reader falls back to plain-old libexif if exiftool
	doesn't generate any output. Should keep everybody happy!

2007-02-27  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/Makefile.am:
	* libgthumb/gth-libexif-metadata.c: (tag_category),
	(update_exif_data):
	* libgthumb/gth-libexif-metadata.h:
	New files (with functions formerly in src/gth-exif-data-viewer.*), 
	for the libexif metadata reading fallback. They don't work yet.

2007-02-27  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* configure.in:
	Making exiftool mandatory isn't practical.

	* libgthumb/gth-exif-utils.c: (get_metadata_for_file):
	* src/gth-exif-data-viewer.c: (add_to_exif_display_list),
	(update_file_info), (update_metadata_display):
	Added sorting and grouping. Prepare to use a libexif fallback.

2007-02-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (get_file_mime_type):

	Fixed bug #412444 – fix build with gcc 2.
	Patch by Jens Granseuer.

2007-02-26  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-exif-utils.c: (get_metadata_for_file),
	(write_metadata_tag_to_file):
	* libgthumb/gth-exif-utils.h:
	* src/gth-exif-data-viewer.c: (gth_exif_data_viewer_init),
	(add_to_exif_display_list):
	New category_roots strings were not being added properly,
	so some metadata categories were being missed.

2007-02-26  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/dlg-image-prop.c: (update_notebook_page):
	* src/gth-browser.c: (window_update_image_info):
	* src/gth-exif-data-viewer.c: (gth_exif_data_viewer_update):
	* src/gth-exif-data-viewer.h:
	* src/gth-viewer.c: (viewer_update_image_info):
	Code tidy-up. Remove obsolete references to exif_data.

2007-02-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (dir_list_started_cb): change message to
	"Getting folder listing..."

2007-02-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (get_uri_display_name): unescape the catalog
	path for display.

2007-02-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.9.3 released ]

	* configure.in: updated to 2.9.3
	* NEWS: updated

2007-02-25  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb.glade:
	Changed "Photo Data (EXIF)" glade label to "Metadata"

2007-02-25  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: (gth_exif_data_viewer_update):
	Minor formatting tweaks.

2007-02-25  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: (gth_exif_data_viewer_init),
	(add_to_exif_display_list), (update_file_info),
	(update_metadata_display), (free_roots),
	(gth_exif_data_viewer_update):
	Added basic grouping of tags. Removed old exif-only code.

2007-02-25  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* configure.in:
	* libgthumb/file-utils.h:
	* libgthumb/gth-exif-utils.c: (get_metadata_for_file):
	* libgthumb/gth-exif-utils.h:
	* src/gth-exif-data-viewer.c: (update_metadata_display),
	(gth_exif_data_viewer_update):
	Change metadata viewer to use exiftool instead of libexif. Adds
	support for iptc, xmp, tiff exif, even audio tags! Very rough
	initial implementation with no sorting, grouping, or editing.

2007-02-25  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (get_pixbuf_using_external_converter):
	Backed out RAW thumbnailing speed-ups. It's not worth the added
	complexity to do it right (dcraw is not elegant). Keep HDR
	speed-ups, though.

2007-02-25  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (get_pixbuf_using_external_converter):
	Delete cached converted RAW/HDR files used for thumbnails, because
	the thumbnails will be cached in the standard .thumbnails dir.

2007-02-25  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (get_pixbuf_using_external_converter):
	Forgot a g_free in the last commit.

2007-02-25  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (get_pixbuf_using_external_converter),
	(gth_pixbuf_new_from_uri): Speed up RAW and HDR thumbnailing by
	using prescaling or embedded thumbnails.

2007-02-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-categories.c (dlg_categories_common): add the renderes to the
	same column instead of creating a column for each renderer.

	Fixes bug # 347657 – Click on category text to checkmark a category

2007-02-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/search.h:
	* libgthumb/search.c (search_util_get_patterns):
	* src/dlg-search.c (search_clicked_cb):

	Fixed bug #346382 – False Positives in Catagory Search

2007-02-24  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (pref_view_as_changed):

	Do not unref a NULL pointer.  Fixes bug #409596.

2007-02-23  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS: Removed duplicate line.

2007-02-23  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (get_file_mime_type):
	Recognize NEF files as raw when gnome-vfs says they are TIFF.

	* get_pixbuf_using_external_converter), (gth_pixbuf_new_from_uri):
	Check if dcraw/pfstools are executable first, to avoid
	errors messages if they are not present.

2007-02-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-data.c: include "gth-exif-utils.h"

2007-02-22  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-image-list.c: (gth_image_list_class_init):
	Removed bindings to numeric keypad keys, to avoid overlap
	with the new hot key feature.

2007-02-22  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/image-loader.c: (image_loader_init):
	Increased stack size to 512k, to prevent crashes when viewing
	svg files. Bug 410827. Patch by Manuel Braga.

	* src/gth-browser.c: (key_press_cb): Enabled PgUp/PgDown scrolling
	in browser mode. Bug 409605. Patch by Manuel Braga.

2007-02-22  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS:
	* libgthumb/file-utils.c: (mime_type_is_video),
	(mime_type_is_audio), (file_is_audio),
	(file_is_image_video_or_audio):
	* libgthumb/file-utils.h:
	* libgthumb/gth-file-list.c: (load_new_list):
	* src/dlg-duplicates.c: (directory_load_cb):
	* src/dlg-search.c: (file_respects_search_criteria):
	* src/gth-browser.c: (launch_selected_videos_or_audio),
	(key_press_cb), (gth_browser_hide_sidebar):
	* src/gth-monitor.c: (add_monitor_event):
	Modified video launcher to permit audio launching as well.

2007-02-21  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-browser.c: (launch_selected_videos), (key_press_cb),
	(gth_browser_hide_sidebar): Pass all selected video files to the
	default video player, if they are supported by that player and the
	player supports multiple file inputs. Skip selected files if they
	require a different player than the current file.

2007-02-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* NEWS: updated

2007-02-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-file-list.c: exec next op in queue after setting
	the filter.

2007-02-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-preloader.c: removed commented out code.

	* src/gth-browser.c (window_update_image_info): load the jpeg data
	only for jpeg images.

	* libgthumb/image-loader.c: use the same factory of thumb-loader to avoid
	two thumbnails for each video.

	* libgthumb/file-utils.c (gth_pixbuf_new_from_video): resolve  all
	symbolic links before loading the thumbnail.

2007-02-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c: launch the registered video player instead of
	always launching "totem"
	* libgthumb/dlg-save-image.c: use the default overwrite confirmation
	dialog when saving an image.
	* src/gth-window.h: added void line :)

2007-02-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/dlg-save-image.c (file_save_ok_cb): do not dup the mime_type
	here.

2007-02-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/dlg-save-image.c (file_save_ok_cb): use get_uri instead of
	get_filename.
	* src/gth-browser.c (save_pixbuf__image_saved_cb): notify a change
	if the filename is present in the list.

2007-02-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-preloader.c (gthumb_preloader_finalize): set ploaders to NULL
	after finalizing them, removed useless function.

2007-02-20  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gthumb-preloader.c: (gthumb_preloader_finalize):
	Fixed bug 378546 - Crash after exiting slideshow.
	Patch by Manuel Braga.

2007-02-20  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/dlg-save-image.c: (save_image):
	Another attempt to fix bug 409799 - mime_type occasionally
	gets corrupted (why??), so make a copy for image_type.

2007-02-20  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/dlg-save-image.c: (save_image):
	Make file-selection dialog the parent of the overwrite dialog,
	to avoid bug 409799.

2007-02-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/image-loader.c: removed unused function close_info_cb

2007-02-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (file_list_done_cb): update the window title after
	loading the image list.

2007-02-19  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/gthumb.applications:
	* data/gthumb.desktop.in:
	Add image/x-pcx to registered file types.

	* libgthumb/file-utils.c: (get_file_mime_type):
	Temporary hack to make gThumb recognize pcx files. This is a
	workaround for gnomevfs bug 329072.

2007-02-19  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* AUTHORS:
	Credit to Manuel Braga, Jef Driesen, and Rennie deGraaf

	* libgthumb/image-loader.c: (image_loader_finalize),
	(image_loader_stop_common): fix for "image_loader_start" crashes.
	Bugs 351959, 386674, and many duplicates. Patch by Manuel Braga.

2007-02-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.9.2 released ]

	* configure.in: changed version to 2.9.2

2007-02-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-filter.c: small changes.
	* src/gth-filter-bar.c: small changes.
	* src/gth-browser.c: unref the filter after using it.
	* libgthumb/gth-file-list.c: do not ref/unref NULL pointers.

2007-02-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-filter-bar.c:
	* libgthumb/gth-filter.h:
	* libgthumb/gth-filter.c: implemented filter on date.

	* libgthumb/file-data.h:
	* libgthumb/file-data.c: added file_data_load_exif_data

	* libgthumb/gth-file-list.c (gth_file_list_update_next_thumb):

	continue creating thumbnails from after the last visible image and then
	restart from the beginning (#142735).

2007-02-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-file-list.c:
	* libgthumb/file-data.h:
	* libgthumb/file-data.c:

	Create the thumbnails of all the images in the file list, however
	load only the thumbnails of the visible images, this way we save a lot
	of memory when a directory contains thousands of images (#142735).

2007-02-16  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-file-list.c: (gth_file_list_update_next_thumb):
	Prepare thumbnails for all images, not just the visible
	ones. Bug 142735.

2007-02-16  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/dlg-reset-exif.c: (apply_transformation):
	Added missing VFS support (using local cache).

2007-02-15  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-browser.c: (fullscreen_destroy_cb):
	Fix crash if you exit slideshow while it is paused. Bug 408323.

2007-02-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c:
	* src/gth-window-utils.c:
	* src/gth-fullscreen.c:

	update the file list in fullscreen mode when an images is removed from
	the catalog.

2007-02-13  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-data.c: (file_data_new):
	Fixed crash on photo import. The code was checking info->mime-type
	even when info was NULL. Bug 407589.

2007-02-13  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (gth_pixbuf_new_from_uri),
	(gth_pixbuf_animation_new_from_uri):
	* libgthumb/file-utils.h:
	* libgthumb/gtk-utils.c: (create_pixbuf):
	* libgthumb/print-callbacks.c: (draw_page):
	* src/dlg-photo-importer.c: (load_images_preview__step),
	(dlg_photo_importer):
	* src/dlg-web-exporter.c: (theme_dialog__sel_changed_cb):
	* src/rotation-utils.c: (apply_transformation_generic):
	Fixed RAW/HDR print issue, bug 407112, by adding RAW/HDR
	support in the pixbuf loader, rather than the animation loader.

2007-02-13  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS:
	Updated with new features and bug fixes.

2007-02-13  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_preferences.glade:
	* doc/C/gthumb.xml:
	Added hot key documentation, and explained the default scripts.

2007-02-13  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_preferences.glade:
	* libgthumb/gtk-utils.c: (exec_shell_script):
	* src/dlg-preferences.c: (dlg_preferences):
	Allow one script to process all selected files, instead of
	requiring one script instance per file.

2007-02-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/print-callbacks.c: fixed compiler warnings.

2007-02-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_print.glade:
	* libgthumb/print-callback.c: fixed esthetic glitches.

2007-02-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_preferences.glade: use less technical terms in
	the hot key tab.

2007-02-12  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_print.glade:
	* data/gthumb.schemas.in:
	* libgthumb/preferences.c:
	* libgthumb/preferences.h:
	* libgthumb/print-callbacks.c: (convert_to_points),
	(convert_from_points), (image_info_rotate), (add_catalog_preview),
	(catalog_update_page), (catalog_update_image_size),
	(catalog_get_image_width), (catalog_get_image_height),
	(catalog_get_image_unit), (catalog_update_page_size_from_config),
	(catalog_update_image_size_from_config),
	(catalog_set_standard_page_size), (catalog_update_margins),
	(draw_page), (catalog_get_current_image_resolution),
	(catalog_get_current_image_sizing),
	(catalog_image_width_changed_cb),
	(catalog_image_height_changed_cb), (catalog_portrait_toggled_cb),
	(catalog_landscape_toggled_cb), (catalog_image_unit_changed_cb),
	(catalog_image_resolution_changed_cb),
	(catalog_auto_size_toggled_cb), (catalog_manual_size_toggled_cb),
	(print_catalog_cb), (images_per_page_value_changed_cb),
	(print_catalog_dlg_full):
	* libgthumb/typedefs.h:
	Allow print sizes to be "auto-sized" or manually specified, so
	that photos can be printed at common frame sizes (4x6", 5x7", etc).
	Bug 385449.

2007-02-12  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_tools.glade:
	* libgthumb/gtk-utils.c: (exec_shell_script):
	* libgthumb/gtk-utils.h:
	* src/dlg-preferences.c: (dlg_preferences):
	* src/gth-browser.c: (key_press_cb):
	Added a progress dialog for hotkey functions. It could be nicer...

2007-02-12  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gtk-utils.c: (exec_shell_script):
	Use system instead of g_spawn_command_line_async.

2007-02-12  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_preferences.glade:
	* libgthumb/gtk-utils.c: (exec_shell_script):
	* src/dlg-preferences.c: (dlg_preferences):
	Added more hotkey format codes.

2007-02-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_preferences.glade: removed gtk_event as container
	of the slideshow label.

2007-02-12  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gtk-utils.c: (exec_shell_script):
	* libgthumb/gtk-utils.h:
	Added hotkey shell-script launcher. (To be expanded with
	additional format codes.)

	* src/gth-browser.c: (key_press_cb):
	Added hotkey detection.

2007-02-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* AUTHORS: Added Michael :)

2007-02-11  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_preferences.glade:
	* data/gthumb.schemas.in:
	* libgthumb/gconf-utils.c: (eel_gconf_get_string):
	* libgthumb/preferences.h:
	* src/dlg-preferences.c: (apply_cb), (dlg_preferences):
	Added initial support for shell-script hotkeys. Added prefs.
	The hotkeys don't function yet, though.

2007-02-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/rotation-utils.c:
	* libgthumb/jpegutils/jpegtran.h:
	* libgthumb/jpegutils/jpegtran.c:

	Added ability to hide the jpeg mcu warning message.
	Include the name of the image in the dialog.
	Changed a bit the jpeg mcu message.
	Perform a trim if the user decided to hide the warning (?).

	* libgthumb/gtk-utils.h:
	* libgthumb/gtk-utils.c: added function
	_gtk_message_dialog_with_checkbutton_new
	* libgthumb/preferences.h:
	* data/gthumb.schemas.in: added key
	'/schemas/apps/gthumb/dialogs/messages/jpeg_mcu_warning'

2007-02-11  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* README: Updated library requirements. Use svn rather than cvs.

2007-02-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/rotation-utils.c: free the 'tmp' variable when it's not used
	anymore.
	* libgthumb/file-utils.c (remove_temp_file_and_dir): do not free the
	input argument.

2007-02-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-folder-selection-dialog.c: Use "Recent folders" and
	"Go to the destination folder".

	* libgthumb/bookmarks.c:
	* libgthumb/file-utils.c (get_uri_display_name): escape uris under the home
	folders as well.

	* src/main.c (open_browser_window): removed debug code.

2007-02-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-folder-selection-dialog.h:
	* src/gth-folder-selection-dialog.c: use a gth_location instead of
	a text entry.
	* src/gth-location.h:
	* src/gth-location.c:
	* src/gth-browser.c: removed the open_location signal from the
	gth_location widget.
	* src/gth-browser-actions-callbacks.c:
	* src/dlg-file-utils.c: gth_folder_selection_get_folder returns a const
	string now.
	* src/bookmark-list.c: fixed double escape issue.
	* libgthumb/gtk-utils.c (_gtk_entry_get_filename_text): use escape_uri
	instead of gnome_vfs_escape_string.
	* data/glade/gthumb.glade: use 'Bookmarks:' instead of 'Select a bookmark:'

2007-02-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* many files: store uris in escaped mode, and unescape when need to
	display an uri or part of it.

2007-02-10  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* configure.in:
	* src/dlg-rename-series.c: (get_image_date):
	Removed HAVE_LIBEXIF cruft. This library was made mandatory
	some time ago.

2007-02-10  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* README:
	* libgthumb/file-utils.c: (get_pixbuf_using_external_converter),
	(gth_pixbuf_animation_new_from_uri):
	Read RAW photos using dcraw only (without pfstools).

	* src/gth-exif-data-viewer.c: (update_file_info):
	Show mime type, including for hdr and raw images.

2007-02-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (_set_fullscreen_or_slideshow): do not use the
	current pixbuf if the image is not loaded yet.

	Fixes bug #406092 – old image is displayed

2007-02-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c: do not load the last viewed image in the
	fullscreen, if it's same image loaded in the browser.  This avoids
	the ask whether to save the image after viewing a modified image
	in fullscreen mode.

2007-02-09  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* README:
	  Added note about RAW and HDR viewing requirements.

	* libgthumb/file-utils.c: (get_file_mime_type):
	  Improved detection of HDR file types, when conventional mimetype
	  detection fails or detects binary data.

2007-02-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-image-list.c: use pos instead of selection_pending_pos

	* src/gth-location.c:
	* libgthumb/file-utils.c: use the hostname for remote uris, and
	'File System' only for local uris.

2007-02-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-location.c: make the parent list work with remote uris too.

2007-02-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-image-list.c:

	Fixed bug #363643 – Shift+arrow expands selection, Shift+mouse doesn't

	* libgthumb/file-utils.h:
	* libgthumb/file-utils.c: added get_base_uri, make
	remove_level_from_path work with remote uris.

2007-02-08  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (get_file_mime_type), (mime_type_is_hdr),
	(convert_exotic_format_to_tiff),
	(gth_pixbuf_animation_new_from_uri):
	Initial support for RAW and HDR images, if pfstools, pfstmo, and
	dcraw are installed.

2007-02-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (get_file_mime_type): remove the file:// scheme
	to make magic mime work.

2007-02-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-ui.h:
	* src/gth-browser-actions-entries.h:
	* src/gth-browser-actions-callbacks.h:
	* src/gth-browser-actions-callbacks.c:
	* src/gth-browser.c:
	* src/dlg-search.c:
	* libgthumb/file-utils.h:
	* libgthumb/file-utils.c:

	Fixed bug #354482 – Show "hidden" images.
	Fixed bug #145334 – Folder list should respect .hidden files

2007-02-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.h:
	* libgthumb/file-utils.c (gth_pixbuf_animation_new_from_uri): the
	fast_file_type argument is not used anymore, removed from the signature.

	* libgthumb/thumb-loader.c (thumb_loader):
	* libgthumb/image-loader.c (load_image_thread): removed the fast_file_type
	argument from the gth_pixbuf_animation_new_from_uri calls.

2007-02-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-file-list.c (load_new_list):
	check whether the mime_type is NULL.

2007-02-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-file-list.c (load_new_list):
	* libgthumb/file-data.c (file_data_update):
	* libgthumb/file-utils.c (get_file_mime_type):

	Fixed compiler warnings.

2007-02-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer.c (gth_viewer_exec_pixbuf_op):
	* src/gth-browser.c (gth_browser_exec_pixbuf_op):

	Ignore a new gth_pixbuf_op when there already one running.
	Fixes bug #392632 – crash in gThumb Image Viewer: repeatedly
	pressing Ctrl...  Patch by manuel

2007-02-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-ui.h:
	* src/gth-viewer-ui.h:
	* src/gth-viewer-actions-entries.h:
	* src/gth-browser-actions-entries.h:
	* src/gth-viewer.c:
	* src/gth-browser.c: removed the info_bar in the viewer window and
	in the browser window when the file list is hidden.  Added a
	'properties' button on the toolbar.
	Added a 'zoot to fit width' button in the viewer toolbar.

	* libgthumb/gthumb-stock.h:
	* libgthumb/gthumb-stock.c: added GTHUMB_STOCK_METADATA

	* src/gth-window.c: indentation fix.

	* libgthumb/gth-file-list.c: get the mime type only once and only here,
	this is used to	speed up list loading when slow mime detection is
	used, and is also used to avoid to get the image mime type in the
	image-loader thread (which is dangerous).

	* libgthumb/file-data.c:
	* libgthumb/file-data.h: added a mime_type field.

	* libgthumb/thumb-loader.c: no need to use the accurate mime detection
	system and no need to load a gif image as an animation in the
	thumbnail loader.
	* libgthumb/image-loader.c: removed an identation level.

	* libgthumb/image-loader.h:
	* libgthumb/thumb-loader.h: added a mime_type argument to the
	[thumb|image]_loader_set_path functions

	* src/gthumb-preloader.c:
	* src/gth-batch-op.c:
	* src/dlg-jpegtran.c:
	* src/dlg-duplicates.c:
	* src/catalog-web-exporter.c:
	* src/dlg-convert.c:
	* src/catalog-png-exporter.c:
	* libgthumb/print-callbacks.c: updated calls to image_loader_set_path
	adding the new mime_type argument (setting the mime_type to NULL for now).

	* libgthumb/file-utils.h:
	* libgthumb/file-utils.c: function image_is_type is now public
 	added function can_load_mime_type, removed image_is_gif__accurate.

2007-02-06  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (gth_pixbuf_animation_new_from_uri):
	  Don't use f_load_scaled_jpeg on remote VFS files. It is MUCH
	  faster to use a cached copy, for typical file sizes.

	* src/gth-browser.c: (dir_list_started_cb):
	  Changed "Wait Please..." string to "Getting directory listing...",
	  for clarity.

2007-02-06  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (obtain_local_file):
	  Do not prune the cache every time the remote
	  cache is added to - just at startup.

2007-02-03  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_camera.glade:
	* data/glade/gthumb_convert.glade:
	* data/glade/gthumb_png_exporter.glade:
	* data/glade/gthumb_preferences.glade:
	* data/glade/gthumb_search.glade:
	* data/glade/gthumb_tools.glade:
	  Set local_only to false, to fix bug 403932.

2007-02-03  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (save_comment_iptc):
 	  Removed unused variable.

	* src/catalog-web-exporter.c:
	(copy_exif_from_orig_and_reset_orientation):
	  Enabled VFS support.

	* src/gth-exif-data-viewer.c: (update_file_info):
	  Show full path in file info sidebar.

2007-02-03  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (save_comment):
	  Fixed XML comment editing of remote files.

	* libgthumb/file-utils.c: (prune_cache):
	  Prune cached comment files too.

2007-02-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (save_comment_iptc), (save_comment),
	(comments_load_comment):
	* libgthumb/dlg-save-image.c: (save_image):
	* libgthumb/file-utils.c: (copy_cache_file_to_remote_uri):
	* libgthumb/file-utils.h:
	* libgthumb/gth-exif-utils.c: (save_exif_data_to_uri),
	(copy_exif_data):
	* libgthumb/gth-exif-utils.h:
	* libgthumb/pixbuf-utils.c: (_gdk_pixbuf_savev):
	* src/dlg-jpegtran.c: (apply_transformation):
	* src/dlg-reset-exif.c: (apply_transformation):
	* src/gth-browser.c: (window_update_image_info), (save_jpeg_data):
	* src/gth-viewer.c: (viewer_update_image_info), (save_jpeg_data):
	Enabled editing / saving of remote VFS files.
	Enabled IPTC comment editing/saving on remote VFS files.
	Still minor issues with XML comment handling.

2007-02-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS:
	News from vfs-testing branch

	* libgthumb/file-utils.c: (gth_pixbuf_new_from_video),
	(gth_pixbuf_new_from_uri), (gth_pixbuf_animation_new_from_uri):
	* libgthumb/file-utils.h:
	* libgthumb/image-loader.c: (load_image_thread):
	* libgthumb/thumb-loader.c: (thumb_loader):
	Moved remaining pixbuf/animation loading routines out of
	image-loader.c and thumb-loader.c into file-utils.c, to reduce
	duplication.

2007-02-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (get_uri_display_name)
	Fixed display of remote URIs.

	(obtain_local_file), (gth_pixbuf_new_from_uri),
	(gth_pixbuf_animation_new_from_uri):
	Stripped out "file://" from cache file names.

	* libgthumb/gth-exif-utils.c: (get_exif_tag), (get_exif_tag_short),
	(get_exif_time), (get_exif_aperture_value):
	* libgthumb/print-callbacks.c: (image_info_new):
	* src/rotation-utils.c: (read_orientation_field),
	(write_orientation_field), (apply_transformation_jpeg),
	(apply_transformation_generic):
	Removed extraneous remove_scheme_from_uri calls.

2007-02-01  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c: removed commented code.

	* libgthumb/gth-file-list.c: stop loading the thumbnails if the queue
	is not void.

	* src/gth-dir-list.c (gth_dir_list_change_to): always call
	path_list_async_new, instead of waiting for the file list to be
	interrupted.

2007-02-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (prune_cache), (obtain_local_file):
	* libgthumb/file-utils.h:
	* libgthumb/gthumb-init.c: (ensure_directories_exist):
	Added prune_cache function separately. Call it at start-up also.

2007-02-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (obtain_local_file):
	Added cache pruning. This should be a workable cache for
	remote VFS URIs now.

2007-02-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (obtain_local_file):
	Added mtime checking for remote file caching. Need to add
	mechanism to prune cache next.

2007-02-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (load_comment_from_iptc),
	(load_comment_from_xml):
	* libgthumb/file-utils.c: (get_cache_full_path),
	(obtain_local_file), (gth_pixbuf_new_from_uri),
	(gth_pixbuf_animation_new_from_uri):
	* libgthumb/file-utils.h:
	* libgthumb/gth-exif-utils.c: (gth_exif_data_new_from_uri):
	* libgthumb/gthumb-init.c: (ensure_directories_exist):
	* libgthumb/typedefs.h:
	* src/dlg-jpegtran.c: (apply_transformation):
	Further simplification of local-copy-of-VFS-files creation routines.
	Added basic semi-permanent remote file caching. Need to added
	mtime checks and purging of old / excess files.

2007-02-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (load_comment_from_iptc),
	(load_comment_from_xml):
	* libgthumb/file-utils.c: (remove_temp_file_and_dir),
	(make_cache_copy_of_remote_file), (gth_pixbuf_new_from_uri),
	(gth_pixbuf_animation_new_from_uri):
	* libgthumb/file-utils.h:
	* libgthumb/gth-exif-utils.c: (gth_exif_data_new_from_uri):
	* src/dlg-jpegtran.c: (apply_transformation):
	* src/rotation-utils.c: (apply_transformation_jpeg):

	Simplified the local-copy-of-VFS-files creation routines.
	Added initial framework to cache VFS files over longer term.
	Removed gnome_gdk_pixbuf_new_from_uri (will be deprecated).
	Known issue: "local_file" variables not always g_free'd
	properly. This will be fixed when caching is added.

2007-01-30  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-exif-utils.c: (gth_exif_data_new_from_uri),
	(get_exif_tag), (get_exif_tag_short), (get_exif_time),
	(get_exif_aperture_value), (copy_exif_data):
	* src/gth-exif-data-viewer.c: (update_exif_data):
	* libgthumb/gth-exif-utils.h:
	Added remote VFS support for reading EXIF tags.
	Writing tags isn't supported, yet.

2007-01-30  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (load_comment_from_iptc):
	Added remote VFS support for reading IPTC comments.
	Writing comments isn't supported, yet.

2007-01-30  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/comments.c: (load_comment_from_xml):
	Added remote VFS support for reading comments.
	Writing comments isn't supported, yet.

2007-01-29  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/dlg-jpegtran.c: (apply_transformation):
	Better error messages.

	* src/rotation-utils.c: (apply_transformation_jpeg):
	Better error reporting, and make better use of convenience
	functions like file_move, remove_temp_file, remove_temp_dir.

2007-01-29  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (check_permissions):
	Deleted debugging printfs, and fixed a memory leak (was
	missing gnome_vfs_file_info_unref)

	* src/dlg-jpegtran.c: (apply_transformation):
	Enabled rotation of remote VFS files, and fixed a memory leak (was
	missing gnome_vfs_file_info_unref)

2007-01-28  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (check_permissions)
	Added printfs to debug remote permissions problems.
	Delete these later.

	* libgthumb/file-utils.c: (is_local_file),
	(make_remote_copy_of_local_file), (gth_pixbuf_new_from_uri),
	(gth_pixbuf_animation_new_from_uri):
	* libgthumb/file-utils.h:
	New convenience function (is_local_file), and a new function to
	copy local files to a remote VFS URI.

2007-01-28  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (remove_temp_file), (remove_temp_dir),
	(gth_pixbuf_animation_new_from_uri):
	* libgthumb/file-utils.h:
	Added temporary file/directory removal convenience functions.

2007-01-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_crop.glade:
	* src/dlg-crop.c:

	Added option to invert the aspect ratio even for non-custom ratios.
	Fixes bug #389870 – Missing option in Image Crop Aspect Ratio

2007-01-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (viewer_key_press_cb):
	* src/gth-browser.c (key_press_cb):
	* src/gth-viewer.c (viewer_key_press_cb):
	* libgthumb/jpegutils/jpegtran.c (jtransform_perfect_transform):

	Fixed compiler warnings.

2007-01-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c:
	* src/gth-browser.c:
	* src/gth-browser.c:
	* src/gth-viewer.c:
	* libgthumb/image-viewer.c:
	* libgthumb/image-viewer.h:

	Add more signals to ImageViewer so that it can handle more keypresses
	autonomically (#401544).  Patch by Björn Lindqvist.

2007-01-27  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (image_is_raw):
	Added more complete list of raw image mime types.

2007-01-27  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (gth_pixbuf_animation_new_from_uri):
	Added missing config.h include to fix raw thumbnailing. Deleted
	debugging printfs.

2007-01-27  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (image_is_raw),
	(make_local_copy_of_remote_file), (gth_pixbuf_new_from_uri),
	(gth_pixbuf_animation_new_from_uri):
	* libgthumb/file-utils.h:
	* libgthumb/image-loader.c: (load_image_thread):
	* libgthumb/thumb-loader.c: (thumb_loader):
	Added initial VFS support for raw thumbnailing. Something
	doesn't quite work yet though...

2007-01-26  Hubert Figuiere  <hub@figuiere.net>

	* libgthumb/file-utils.[ch] (image_is_raw): detect raw files.
	* libgthumb/thumb-loader.c (thumb_loader): load thumbnails for
	RAW user libopenraw. Partially fix bug #145564.
	* configure.in: detect libopenraw.

2007-01-26  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/jpegutils/jpegtran.c: (update_exif_thumbnail),
	(jtransform_perfect_transform), (jpegtran_internal),
	(jpegtran_thumbnail), (jpegtran):
	* libgthumb/jpegutils/jpegtran.h:
	* src/catalog-web-exporter.c: (export__copy_image):
	* src/dlg-jpegtran.c: (apply_transformation):
	* src/dlg-photo-importer.c: (adjust_orientation__step):
	* src/rotation-utils.c: (jpeg_mcu_dialog),
	(apply_transformation_jpeg):
	* src/rotation-utils.h:
	Applied Jef Driesen's callback-based jpegtran scheme, for greater
	efficiency during lossless rotates, etc. Bug 361913.

2007-01-26  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-browser.c: (key_press_cb):
	Return to browser mode after showing a video in viewer mode.

2007-01-25  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (gth_pixbuf_animation_new_from_uri):
	Animated remote gifs work now, using gnome_vfs_xfer_uri.

2007-01-25  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/dlg-save-image.c: (dlg_save_image_as):
	* src/dlg-web-exporter.c: (theme_dialog__install_theme_clicked):
	Set gtk_file_chooser_set_local_only to FALSE, for VFS browsing.

	* libgthumb/file-utils.c: (remove_special_dirs_from_path):
	* src/main.c: (initialize_data):
	Minor corrections to URI/path handling.

2007-01-25  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (remove_special_dirs_from_path):
	Further tweaks to remove_special_dirs_from_path, to work properly
	with file:/// URIs. Fixes catalog browsing.

2007-01-24  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/gthumb.desktop.in:
	Change "Exec=gthumb %F" to "Exec=gthumb %U" to allow launching
	of VFS URIs from Nautilus.

2007-01-24  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (file_is_image_or_video),
	(remove_special_dirs_from_path), (gth_pixbuf_new_from_uri),
	(gth_pixbuf_animation_new_from_uri):
	* libgthumb/file-utils.h:
	* libgthumb/gth-file-list.c: (load_new_list):
	* libgthumb/image-loader.c: (load_image_thread):
	* libgthumb/thumb-loader.c: (thumb_loader):
	* src/dlg-duplicates.c: (directory_load_cb):
	* src/dlg-photo-importer.c: (adjust_orientation__step):
	* src/dlg-search.c: (file_respects_search_criteria):
	* src/gth-browser.c: (launch_videos_in_list):
	* src/gth-monitor.c: (add_monitor_event):
	* src/main.c: (initialize_data):

	Fixed remove_special_dirs_from_path to work properly with URIs.

	Made file_is_image_or_video more efficient - fewer file accesses.

	Allow single VFS files and directories to be launched from the
	command line. Command-line-catalog (multiple files) still does
	not work yet.

2007-01-23  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/image-loader.c: (load_image_thread):
	Cache the "large" video thumbnails made in image viewer mode.

2007-01-23  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/image-loader.c: (image_loader_finalize),
	(image_loader_init), (image_loader_new), (load_image_thread):
	* src/gth-browser.c: (launch_videos_in_list), (key_press_cb),
	(gth_browser_hide_sidebar):
	Show a video thumbnail in image viewer mode. Launch external
	viewer (in browser or viewer mode) by pressing "enter".

2007-01-22  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (file_is_mimetype), (file_is_image),
	(file_is_video), (gth_pixbuf_new_from_uri):
	* libgthumb/file-utils.h:
	* libgthumb/gth-file-list.c: (load_new_list):
	* libgthumb/image-loader.c: (load_image_thread):
	* libgthumb/thumb-loader.c: (thumb_loader):
	* src/dlg-duplicates.c: (directory_load_cb):
	* src/dlg-search.c: (file_respects_search_criteria):
	* src/gth-browser.c: (launch_videos_in_list),
	(gth_browser_hide_sidebar):
	* src/gth-monitor.c: (add_monitor_event):
	Preliminary attempt to add video thumbnailing and viewing.
	Bug 134366. Still a work in progress.

2007-01-22  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/main.c: (main):
	Added gnome_authentication_manager_init to provide VFS
	authentication callbacks.

2007-01-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer.c:
	* src/main.c: fixed compilation when gtkunique is disabled.

2007-01-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-window.c:
	* src/main.c:
	* src/main.h:
	* src/Makefile.am:
	* configure.in: the gtkunique dependency is now optional.

2007-01-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/GNOME_GThumb.server.in.in: removed
	* src/GNOME_GThumb.idl: removed
	* src/gth-application.c: removed
	* src/gth-application.h: removed
	* data/Makefile.am:
	* libgthumb/Makefile.am:
	* libgthumb/jpegutils/Makefile.am:
	* po/POTFILES.in:
	* src/gth-viewer.c:
	* src/gth-window.c:
	* src/main.c:
	* src/main.h:
	* src/Makefile.am:
	* configure.in:
	* README:

	Use GtkUnique to provide a single instance application.
	Removed the bonobo dependency (#389197).

2007-01-21  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-browser-actions-callbacks.c:
	(gth_browser_activate_action_go_location):
	* src/gth-folder-selection-dialog.c: (browse_button_clicked_cb):
	Set gtk_file_chooser_set_local_only to FALSE to permit
	browsing of VFS URIs.

2007-01-21  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (resolve_all_symlinks),
	(gth_pixbuf_new_from_uri), (gth_pixbuf_animation_new_from_uri):
	* libgthumb/file-utils.h:
	* libgthumb/gtk-utils.c: (create_pixbuf):
	* libgthumb/image-loader.c: (load_image_thread),
	(image_loader_get_path):
	* libgthumb/jpeg-utils.c: (do_load_internal):
	* libgthumb/print-callbacks.c: (draw_page):
	* libgthumb/thumb-loader.c: (thumb_loader),
	(thumb_loader_set_path), (thumb_loader_get_path),
	(thumb_loader_start__step2), (thumb_loader_error_cb):
	* src/dlg-photo-importer.c: (load_images_preview__step),
	(dlg_photo_importer):
	* src/dlg-web-exporter.c: (theme_dialog__sel_changed_cb):
	* src/rotation-utils.c: (apply_transformation_generic):
	Initial attempt to implement Gnome VFS support. Folders and images
	can now be opened using the "Other..." folder function (but not
	through the command line. Bug 143197. Tested with ssh:// URIs.

2007-01-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c: use pack_end to add the filterbar, this way the
	filterbar will remain at the bottom when changing between list and thumb
	view.

	* libgthumb/gth-file-view-list.c: added filter support to the list
	view.

	* libgthumb/image-loader.c (image_loader_init):	make threads bound to
	system threads.

	* src/gth-filter-bar.c (gth_filter_bar_construct): removed the
	"Personalize" command.  It will be implemented in 2.12

2007-01-16  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/image-loader.c: (image_loader_init):
	Reduce stack size for new image_loader threads from the
	default (10MB on FC6) to 32k, to reduce reported memory
	consumption. See if anything breaks! Bug 310749.

2007-01-14  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-file-view-list.c: (create_unknown_pixbuf),
	(gth_file_view_list_finalize), (gth_file_view_list_new):
	* libgthumb/gth-file-view-thumbs.c: (create_unknown_pixbuf),
	(gth_file_view_thumbs_finalize), (gth_file_view_thumbs_new):
	* src/dlg-photo-importer.c: (get_icon_from_mime_type):
	* src/gth-viewer.c: (monitor_update_files_cb):
	* src/main.c: (theme_changed_cb), (initialize_data),
	(release_data), (get_fs_icon):
	Committed GnomeIconTheme -> GtkIconTheme change, this time
	removing the g_object_unref calls for icon_theme. Bugs
	171593 and 396474.

2007-01-14  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-file-view-list.c: (create_unknown_pixbuf),
	(gth_file_view_list_new):
	* libgthumb/gth-file-view-thumbs.c: (create_unknown_pixbuf),
	(gth_file_view_thumbs_new):
	* src/dlg-photo-importer.c: (get_icon_from_mime_type):
	* src/gth-viewer.c: (monitor_update_files_cb):
	* src/main.c: (theme_changed_cb), (initialize_data), (get_fs_icon):
	Reverted GnomeIconTheme -> GtkIconTheme change, because something
	broke in the photo importer. Bug 171593.

2007-01-13  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-file-view-list.c:
	Restored accidentally-deleted function type declaration.
	Fixes compiler warning. Bug 395899.

2007-01-12  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-file-view-list.c:
	* src/dlg-photo-importer.c:
	Removed #include <libgnomeui/gnome-icon-theme.h> references

2007-01-12  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-file-view-list.c: (create_unknown_pixbuf),
	(gth_file_view_list_new):
	* libgthumb/gth-file-view-thumbs.c: (create_unknown_pixbuf),
	(gth_file_view_thumbs_new):
	* src/dlg-photo-importer.c: (get_icon_from_mime_type):
	* src/main.c: (theme_changed_cb), (initialize_data), (get_fs_icon):
	Removed deprecated GnomeIconTheme functions - bug 171593. Seems to
	reduce memory usage as well - bug 310749. Modified version of
	patch by Jan de Groot.

2007-01-11  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-file-view-list.c: (get_compfunc_from_method):
	* libgthumb/gth-file-view-thumbs.c: (get_compfunc_from_method):
	* libgthumb/gth-sort-utils.c: (gth_sort_none):
	* libgthumb/gth-sort-utils.h:
	* src/catalog-png-exporter.c: (get_sortfunc):
	* src/catalog-web-exporter.c: (get_sortfunc):
	* src/dlg-rename-series.c: (get_sortfunc):
	Consolidated no-sort functions into gth-sort-utils.c.

	* src/main.c: (initialize_data):
	Set manual sort mode when handling list of filenames from the
	command line. Bug 326621.

2007-01-10  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-sort-utils.c:
	(gth_sort_by_filename_but_ignore_path): Fixed bug 313562 - changed
	name sorting to use g_utf8_collate_key_for_filename, for better
	handling of numeric file names (similar to Nautilus).

2007-01-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c: Set the is_important property on some actions;
	don't unref actions got with gtk_action_group_get_action.

	Really fixes bug #385605

2007-01-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (window_make_current_image_visible): do not reset the
	viewer if the image file exists.

	* src/gth-browser.c (set_mode_specific_ui_info): call ensure_update before
	setting actions as important

	* src/gth-browser.c: set actions as important after adding them to
	the ui.

	Fixes bug #385605 – toolbar style: "text beside icons" doesn't work

2007-01-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c:
	* src/dlg-preferences.c:
	* libgthumb/preferences.h:
	* data/glade/gthumb_preferences.glade:
	* data/gthumb.schemas.in: removed /schemas/apps/gthumb/slideshow/delay
	added /apps/gthumb/slideshow/change_delay as float.

	allow to turn off the fading effect in the slideshow. Allow to specify a
	delay of 0.5 seconds.

2007-01-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-filter-bar.c:
	* src/gth-filter-bar.h: implemented other features.

	* src/Makefile.am:
	* src/gth-category-selection-dialog.c:
	* src/gth-category-selection-dialog.h: new files.

	* libgthumb/gth-image-list.c: pass item->data to image_list_filter_match
	instead of item

	* libgthumb/preferences.h:
	* data/gthumb.schemas.in: added "/apps/gthumb/ui/filterbar_visible" key

	* src/gth-browser-ui.h:
	* src/gth-browser-actions-entries.h:
	* src/gth-browser-actions-callbacks.h:
	* src/gth-browser-actions-callbacks.c:
	* src/gth-browser.h:
	* src/gth-browser.c:
	* libgthumb/gth-filter.c:
	* libgthumb/gth-file-list.c: allow to hide/show the filter bar.

	* src/dlg-search.c: removed a non-printable character.

2007-01-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/icons/filter-24.png:
	* libgthumb/icons/Makefile.am:
	* libgthumb/gthumb-stock.h:
	* libgthumb/gthumb-stock.c: added the GTHUMB_STOCK_FILTER stock icon.

	* data/glade/gthumb_search.glade:
	* data/glade/gthumb_tools.glade: use "Search" instead of Find (#335390).

2007-01-03  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-crop.c (dlg_crop):
	* src/dlg-redeye-removal.c (dlg_redeye_removal): set the size of the window
	instead of the size of the image selector.

	* src/gth-browser.c (window_make_current_image_visible):

	Fixed bug #389590 – update image after delete is broken.

	* src/gth-dir-list.c:
	* src/dlg-photo-importer.c:
	* src/catalog-list.c:
	* libgthumb/jpegutils/jpegtran.c:
	* libgthumb/pixbuf-utils.c:
	* libgthumb/gth-sort-utils.c:
	* libgthumb/file-utils.c:
	* libgthumb/dlg-save-image.c:
	* libgthumb/comments.c: #include <strings.h> when using strcasecmp

	* libgthumb/gth-file-list.c: implement gth_file_list_delete as a special
	case of gth_file_list_delete_list

2007-01-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-filter.c:
	* src/gth-filter-bar.c: implemented starts_with, ends_with, contains
	operations.  Make filter case insensitive.

	* src/dlg-redeye-removal.c (image_selector_clicked_cb): removed call to
	g_print

2007-01-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-file-list.c: (gth_file_list_op_free),
	(gth_file_list_queue_op_with_uri),
	(gth_file_list_queue_op_with_list),
	(gth_file_list_queue_op_with_int), (gth_file_list_exec_next_op):
	* libgthumb/jpegutils/jpegtran.c: (update_exif_thumbnail):
	* src/dlg-jpegtran.c: (apply_transformation):
	Minor code tweaks for gcc 2.95 compatibility.
	Patch by Jens Granseuer. Bug 391928.

2007-01-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* README: Removed mention of Bonobo components. Bug 389197.

	* data/glade/gthumb_redeye.glade: Added tooltips.

	* doc/C/gthumb.xml: Mention mousewheel-zooming in redeye removal tool.

	* src/dlg-redeye-removal.c: (dlg_redeye_removal):
	Larger preview area, based on gdk_screen_get_width/height. Bug 389587.

2007-01-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-crop.c: added help button.

	* src/gth-window-actions-entries.h:
	* src/gth-viewer.c:
	* src/gth-browser.c: use the key_press callback for single-key shortcuts
	to avoid conflict with the filter text entry.

	* src/gth-filter-bar.h:
	* src/gth-filter-bar.c:
	* src/gth-browser.c:
	* libgthumb/typedefs.h:
	* libgthumb/Makefile.am:
	* libgthumb/gth-image-list.h:
	* libgthumb/gth-image-list.c:
	* libgthumb/gth-filter.h:
	* libgthumb/gth-filter.c:
	* libgthumb/gth-file-view-thumbs.c:
	* libgthumb/gth-file-view-list.c:
	* libgthumb/gth-file-view.h:
	* libgthumb/gth-file-view.c:
	* libgthumb/gth-file-list.h:
	* libgthumb/gth-file-list.c:
	* libgthumb/file-data.h:
	* libgthumb/file-data.c: second part of the filter implementation:
	implemented the filter for the gth-image-list widget.  Created a simple
	filter on the filename.

2006-12-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-redeye-removal.c (dlg_redeye_removal):
	(image_selector_motion_notify_cb):
	(help_cb): readded the help button.

2006-12-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.9.1 released ]

	* doc/C/gthumb.xml: removed . outside <para>

	* src/gth-browser.c (gth_browser_construct): removed the filter bar for
	the 2.9.1 version.
	* NEWS: updated for 2.9.1
	* configure.in: changed version to 2.9.1

2006-12-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-image-selector.c:
	(realize):
	(update_mouse_selection):
	(set_active_area):
	(get_event_area_from_id):
	(set_cursor): use a GDK_CROSSHAIR cursor, update the cursor while dragging
	the selection.

	* data/glade/gthumb_camera.glade:
	* src/dlg-photo-importer.c: simplyfied the camera dialog, added a
	"no camera detected" message when the list is empty.

2006-12-25  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_camera.glade:
	* src/dlg-photo-importer.c: (model__ok_clicked_cb),
	(get_camera_model_list), (get_autodetect_model_list),
	(model__selection_changed_cb), (populate_model_treeview),
	(model__refresh_cb), (model__manual_select_cb),
	(dlg_select_camera_model_cb):
	Better camera-selection dialog. Reduced number of combo boxes,
	and removed deprecated gtk-combo. Patch by Manuel Braga. Bug 380585.

2006-12-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-image-selector.c (update_mouse_selection): fixed selection when
	dragging the top or left sides of the selection box.

2006-12-24  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_redeye.glade:
	* src/gth-image-selector.h:
	* src/gth-image-selector.c:
	* src/dlg-redeye-removal.h:
	* src/dlg-redeye-removal.c: many enhancements to the red-eye removal
	dialog

	* data/glade/gthumb_crop.glade:
	* src/dlg-crop.c: added help button

	* src/gth-monitor.c (gth_monitor_class_init):
	* src/gthumb-preloader.c:
	* src/catalog-web-exporter.c:
	* src/catalog-png-exporter.c:
	* src/gth-dir-list.c:
	* libgthumb/gth-file-view.c:
	* libgthumb/gth-image-list.c:
	* libgthumb/image-loader.c: use g_cclosure_marshal_VOID__VOID instead of
	gthumb_marshal_VOID__VOID

2006-12-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-iviewer.h:
	* libgthumb/gth-iviewer.c: added zoom_to_fit function to the interface

	* libgthumb/image-viewer.c:
	* src/gth-image-selector.c: implement the zoom_to_fit function

	* dlg-crop.c: use the zoom_to_fit function here

2006-12-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/image-viewer.c:

	keep the area pointed by the mouse visible when zooming using
	CTRL + mouse wheel

	* data/glade/gthumb_crop.glade:
	* src/Makefile.am:
	* src/gth-image-history.c:
	* src/gth-image-history.h:
	* src/gth-image-selector.h:
	(set_scroll_adjustments):
	* src/gth-window.c:
	(gth_window_get_can_undo):
	(gth_window_undo):
	(gth_window_edit_comment):
	(gth_window_finalize):
	(gth_window_close):
	(gth_window_redo):
	(gth_window_get_can_redo):
	(gth_window_init):
	(gth_window_update_comment_categories_dlg):
	(gth_window_attach):
	(gth_window_save_pixbuf):
	(gth_window_set_image_pixbuf):
	(gth_window_edit_categories):
	(gth_window_clear_undo_history):
	* src/dlg-crop.c:
	(undo_button_clicked_cb):
	(mask_button_toggled_cb):
	(crop_button_clicked_cb):
	(ratio_optionmenu_changed_cb):
	(dlg_crop):
	(selection_changed_cb):
	(redo_button_clicked_cb):
	(zoom_fit_button_clicked_cb):
	(history_changed_cb):
	(mask_visibility_changed_cb):
	(destroy_cb):
	* src/gth-image-selector.c:
	(gth_image_selector_set_mask_visible):
	(class_init):
	(init_selection):

	Added undo/redo and other enhancements to the crop dialog.

2006-12-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (gth_browser_construct):
	* src/gth-filter-bar.c:
	* src/gth-filter-bar.h:

	Initial support for the filter bar.

	* data/glade/gthumb_crop.glade:
	* src/dlg-crop.c:
	* src/gth-image-selector.c:
	* src/gth-image-selector.h:

	Some enhancements to the crop dialog: allow to crop multiple times without
	exiting the dialog; allow to switch on/off the selection mask.
	Zoom in/out with mouse wheel.  Zoom keeping the center of the image
	visible.

	* libgthumb/file-utils.c (remove_extension_from_path): check whether p > 0
	before anything else.

	* libgthumb/dlg-save-image.c (save_image): do not ask whether to overwrite
	an existing image when using the dlg_save_image function.

2006-12-16  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-file-list.c:
	(gth_file_list_exec_next_op):
	(gfl_empty_list):
	(gth_file_list_set_empty_list):
	* src/gth-browser.c (window_update_file_list):
	(file_list_done_cb):
	(window_set_file_list):
	do not emit the DONE signal when empting the list to show the "wait"
	message.

2006-12-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-actions-callbacks.c (create_new_folder_or_library):
	notify folder creation only when no error occurred.

2006-12-11  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c:
	Tweaks to Exif display categories. Patch by Jef Driesen.
	Bug 339648.

2006-12-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/jpegutils/transupp.c:
	* libgthumb/Makefile.am
	* src/Makefile.am
	* configure.in:

	Fixed bug #317056 – gthumb Cygwin build fixes

	* src/gth-browser.c (window_update_go_sensitivity):
	(window_update_sensitivity): update the Go_Stop action sensitivity.
	* libgthumb/print-callbacks.c: removed unused variables and functions.

2006-12-08  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS:
	* configure.in:
	* data/gthumb.schemas.in:
	* libgthumb/Makefile.am:
	* libgthumb/preferences.h:
	* libgthumb/print-callbacks.c: (orientation_is_portrait),
	(print_catalog_info_unref), (pango_font_get_glyph),
	(pci_get_next_line_to_print_delimiter), (pango_font_get_glyphs),
	(pci_get_text_extents), (construct_comment), (pci_print_line),
	(pci_print_paragraph), (pci_print_comment), (add_catalog_preview),
	(catalog_update_page), (catalog_update_custom_page_size),
	(catalog_get_page_width), (catalog_get_page_height),
	(catalog_get_page_left_margin), (catalog_get_page_right_margin),
	(catalog_get_page_top_margin), (catalog_get_page_bottom_margin),
	(catalog_update_page_size_from_config),
	(catalog_set_standard_page_size), (catalog_update_margins),
	(done_print), (begin_print), (preview), (draw_page),
	(pci_update_comment_font), (catalog_portrait_toggled_cb),
	(catalog_landscape_toggled_cb), (print_catalog_cb),
	(load_current_image), (pci_comment_fontpicker_font_set_cb),
	(print_catalog_dlg_full):
	Migrated from libgnomeprint to gtkprint. Bug 362854.
	Requires gtk 2.10.0 now!

	* libgthumb/gnome-print-font-dialog.c:
	* libgthumb/gnome-print-font-dialog.h:
	* libgthumb/gnome-print-font-picker.c:
	* libgthumb/gnome-print-font-picker.h:
	Removed, using gtkprint now.

2006-12-08  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: (tag_category), (update_exif_data):
	Fixed possibility of non-unique positioning of "other" exif tags.

2006-12-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-file-list.c (add_list_done): always exec the next
	operation in queue after adding images to the list.

	* data/gthumb.schemas.in: use ###%e as default filename template for the
	rename dialog.
	* data/glade/gthumb_tools.glade: use "rename" as title for the rename
	dialog.
	* libgthumb/file-data.c: reset thumb and error when updating.
	* gth-file-list.c: no need to reset thumb and error here.

	* src/dlg-rename-series.c:
	* src/gth-browser-actions-callbacks.c:

	Always use the rename series dialog even to rename a single file.
	Fixes bug #383439 – Can't rename one image with series syntax

2006-12-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gthumb-marshal.list: added VOID:INT type
	* libgthumb/Makefile.am: fixed creation of the marshal types file.

	* src/gth-dir-list.h (done):
	* src/gth-browser-ui.h:
	* src/gth-dir-list.c (gth_dir_list_change_to__step3):
	(gth_dir_list_init):
	(gth_dir_list_class_init):
	* src/gth-browser.c (window_update_catalog_ui):
	(catalog_activate):
	(dir_list_done_cb):
	(window_update_folder_ui): Add a GnomeVFSResult argument to the dir-list
	DONE signal.  Emit the DONE signal when an error occurrs.  Handle
	directory loading errors as espected. Fixed syntax error in the folder
	ui declaration.  Update the ui when a catalog is loaded.

2006-12-07  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c:
	Shortened one category label, so it is shorter
	than the longest tag name.

2006-12-07  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c:
	Changed exif category labels slightly.

2006-12-07  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: (tag_category):
	Final tweaks? Made the tag overlap detection code a bit
	more robust, and added some obscure interop tags.

2006-12-07  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: (update_exif_data):
	Code tidy up. Added comments. Fixed small bug with
	GPS / Interop tag overlap.

2006-12-06  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c:
	Added some missing tags to the categories.

2006-12-06  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c:
	Better categorization of Exif tags.

2006-12-05  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: (tag_category), (update_exif_data):
	Put thumbnail-related exif tags in their own category.

2006-12-05  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c (tag_is_present_in_category):
	(add_to_exif_display_list):
	(gth_exif_data_viewer_init):
	(gth_exif_data_viewer_update):
	(update_exif_data):
	(tag_category):
	Only check for duplicated tags in the makernote category (is this right?).
	Keep track of the category root with a row_reference instead of a tree_path
	to deal with categories changing their position during nodes insertion.

2006-12-05  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: (add_to_exif_display_list),
	(tag_category), (update_exif_data):
	Added GPS category. Exif tag category display still has some
	issues however - see bug 339648.

2006-12-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c (update_exif_data):
	(tag_category):
	Organize exif tags in categories.

	* src/gth-exif-data-viewer.c (tag_is_present_in_category):
	(add_to_exif_display_list):
	(update_exif_data):
	(tag_is_present):
	Fixed the tag_is_present function.

2006-12-04  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c:
	Added more verbose category names (Filesystem Data, Standard Exif Tags,
	MakerNote Exif Tags.

2006-12-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c (gth_exif_data_viewer_construct):
	make the columns autoresize, set headers visible.

	* src/gth-exif-data-viewer.c (add_to_exif_display_list):
	(gth_exif_data_viewer_construct):
	(gth_exif_data_viewer_init):
	(gth_exif_data_viewer_update):
	(update_exif_data):
	(tag_is_present):
	(update_file_info):

	Use a tree view to organize the image metadata.  Currently 3 categories are
	used: file, exif, note.

2006-12-04  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: (update_exif_data):
	  Minor corrections to the Exif display code.
	  Patch by Jef Driesen. Bug 339648.

	* src/gth-window-actions-entries.h:
	  Add Ctrl+P shortcut for print.

2006-12-03  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-file-list.h:
	* libgthumb/gth-file-list.c (gfl_delete_list):
	(load_new_list):
	(gfl_rename):
	(gth_file_list_exec_next_op):
	(gth_file_list_delete_list):

	Added function to remove a series of images.

	* src/gth-browser.c (file_list_done_cb):
	(gth_browser_notify_files_changed):
	(activate_catalog_done):
	(gth_browser_notify_files_deleted):
	(gth_browser_notify_files_created):
	(monitor_update_cat_files_cb):

	simplified notification functions.

	* src/dlg-jpegtran.c:
	* src/gth-window-actions-callbacks.c:
	* src/main.c:
	* src/dlg-search.c:
	* src/gth-monitor.c:
	* src/main.h:
	* libgthumb/thumb-loader.h:

	Removed the bonobo.h inclusion if not needed. Restore the file monitor
	in a idle callback.

2006-12-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (key_press_cb):
	* src/gth-browser-ui.h:
	* src/gth-fullscreen.c (viewer_key_press_cb):
	* src/gth-window-actions-entries.h:
	* src/gth-viewer.c (viewer_key_press_cb):

	Added the X keybinding in the action antry structure.  Added W keybinding
	in fullscreen mode too.

2006-12-01  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/catalog.c (catalog_free):
	(catalog_write_to_disk):
	(catalog_new):
	(catalog_remove_item):
	(catalog_add_item):
	(catalog_load_from_disk__common):
	(error_on_saving):
	* libgthumb/typedefs.h: fixed catalog sorting.

	* src/gth-exif-data-viewer.c (add_to_exif_display_list):
	(update_exif_data): removed unused function and variable.

	* src/gth-browser.c (gth_browser_construct): init the reset_scrollbars
	option.

	* src/gth-fullscreen.c: (gth_fullscreen_construct):	Init to
	fit-size_if_larger when using keep_prev_zoom.

	* src/gth-exif-data-viewer.c (add_to_exif_display_list): fixed compiler
	warning.

	* src/gth-browser.c:
	* src/dlg-file-utils.c:
	* src/gth-fullscreen.c:
	* src/gth-window-actions-callbacks.c:
	* src/dlg-preferences.c:
	* src/gth-viewer.c:
	* libgthumb/preferences.c:
	* libgthumb/image-viewer.c:
	* libgthumb/image-viewer.h:
	* data/glade/gthumb_preferences.glade:

	Added a fit_width_if_larger mode for the image_viewer and use it for the
	zoom_width toolbar button.  Init the viewer to zoom_fit_if_larger mode
	when using the keep_previous_zoom mode.

	* data/gthumb.schemas.in: set keep_prev as default value for the
	zoom_change key.

2006-12-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: (add_to_exif_display_list),
	(update_exif_data), (update_file_info):
	  Added the ability to view Exif "MakerNote" data.

2006-12-01  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c:
	* src/gth-dir-list.c:
	* libgthumb/gth-file-list.h:
	* libgthumb/gth-file-list.c:
	* libgthumb/file-data.h:
	* libgthumb/gth-sort-utils.c:
	* libgthumb/file-data.c:

	Fixed some directory loading errors.

2006-12-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* configure.in:
	  Update libexif requirement to 0.6.13, from 0.6.9

	* doc/C/gthumb.xml:
	  Corrected spelling error ("usefull")

	* src/gth-exif-data-viewer.c: (update_exif_data),
	(update_file_info):
	  Removed filtering of Exif tags - all are shown now. Added the ability
	  to display GPS-related Exif tags. Bug 339648.

2006-12-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: (update_file_info):
	  Prefix filesystem-based fields with "File ", to distinguish from
	  Exif data.

2006-11-30  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS: updated news for 2.9.0, based on earlier commits.

2006-11-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gs-fade.c (gamma_info_init): return FALSE when HAVE_XF86VMODE_GAMMA is false.

2006-11-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* Makefile.am:
	* configure.in:
	* components/*: deleted

	Removed the Bonobo components because they are unused and untested since a
	long time. Bonobo is dying :(

	* libgthumb/Makefile.am:
	* src/Makefile.am:

	Fixed bug #355353 – gthumb should build when srcdir != objdir
	Patch by Marty Leisner

	* src/gth-window-actions-callbacks.c:

	Perform a fit_if_larger zoom instead of a zoom_to_fit zoom.

	* src/gth-fullscreen.c:

	Removed a useless comment.

	* src/dlg-search.c:

	Usa a gth-file-list widget to display the found images.

	* src/catalog-list.h:

	Reformatted

	* components/catalog-view/catalog-nautilus-view.c:
	* libgthumb/gth-file-list.c:
	* libgthumb/gth-file-list.h:
	* src/dir-list.c: removed
	* src/dir-list.h: removed
	* src/gth-dir-list.c:
	* src/gth-dir-list.h: renamed dir-list.[ch] as gth-dir-list.[ch]
	* src/dlg-image-prop.c:
	* src/gth-browser.c:
	* src/gth-browser.h:
	* src/main.c:
	* src/Makefile.am:

	Use a signal based system for loading and showing images instead of the
	error-prone callback based system.

	* src/gth-browser.c:

	Fixed bug #377846 – gtk_toolbar_remove: assertion `content_to_remove
	!= NULL' failed

2006-11-29  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-browser.c: (gth_browser_notify_update_layout_cb),
	(gth_browser_construct):
	* src/gth-fullscreen.c: (gth_fullscreen_construct):
	* src/gth-viewer.c: (gth_viewer_construct):
	* src/gth-window.c: (gth_window_init), (gth_window_get_type),
	(gth_window_get_can_redo), (gth_window_attach):
	* src/gth-window.h:
	  Replaced deprecated gnome_app functions with gtk equivalents.
	  Bug 171601. Patch by Manuel Braga.

2006-11-27  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-browser.c: (key_press_cb):
	  Add Escape key to quit viewer mode (show sidebar).
	  ("Escape" doesn't work as an accelator for the Close
	  toolbar item, for some reason).

2006-11-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-image-list.c (gth_image_list_expose): use the allocation
	size instead of the size returned by gdk_drawable_get_size

	* src/dir-list.c (dir_list_refresh_continue): use path_list_free

2006-11-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

    * libgthumb/file-list.c (path_list_dup): special case when list == NULL

	* libgthumb/gth-image-list.c (gth_image_list_clear): freeze the ui while
	clearing the image list.

	* libgthumb/jpegutils/jpegtran.c: reformatted.

	* libgthumb/gth-file-view-thumbs.c:
	* libgthumb/gth-file-view.h:
	* libgthumb/gth-file-view.c:
	* libgthumb/typedefs.h:

	started support for file list filtering.

	* gthumb-stock.c:
	* gthumb-stock.h: added GTHUMB_STOCK_LIBRARY
	* libgthumb/file-utils.c:
	* src/gth-location.c:
	* src/main.c:

	started support for catalog directories in the history list.

	* libgthumb/gth-file-list.c:
	* libgthumb/gth-file-list.h:
	* components/catalog-view/catalog-nautilus-view.c
	(catalog_nautilus_view_load_location): stop thumbnails loading before
	filtering the file_list.  Do not duplicate the entire file_list, simply
	use the one passed as parameter.

	* src/gth-viewer.c:
	* src/gth-viewer-ui.h:
	* src/gth-browser-ui.h:
	* src/gth-browser-actions-callbacks.c:
	* src/gth-browser-actions-callbacks.h:
	* src/gth-browser-actions-entries.h:

	reorganized toolbars.

	* src/gth-browser.c (gth_browser_construct): added a location toolbar.

	* libgthumb/jpegutils/jpegtran.c (update_exif_thumbnail): use
	g_malloc/g_free instead of malloc/free.

	* src/gth-browser-actions-entries.h: use "by modification time" instead of
	"by file time".
	* libgthumb/gth-file-view-list.c (add_columns):
	* src/dir-list.c (add_columns):
	* src/catalog-list.c (add_columns): added ellipsize property.

2006-11-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_preferences.glade:
	* src/gth-fullscreen.c (mouse_wheel_scrolled_cb):
	* libgthumb/preferences.c (pref_get_check_type):
	* libgthumb/preferences.h:
	* src/gth-browser.c:
	* data/gthumb.schemas.in:
	* src/dlg-preferences.c (dlg_preferences):
	* libgthumb/image-viewer.c:
	* libgthumb/image-viewer.h:
	* src/gth-viewer.c:

	Use a simple boolean value for the reset_scrollbars option.  Do not read
	the gconf preference from the image-viewer widget, use a notification value
	signal from the gth-browser widget instead.  Put the rotate tool at the end
	of the toolbar in the viewer window.  Fixed some warnings.

2006-11-24  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/jpegutils/jpegtran.c: (update_exif_thumbnail):
	  Discard corrupted thumbnails if present.
	  Patch by Jef Driesen. Bug 361913.

2006-11-23  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-browser-ui.h:
	* src/gth-fullscreen-ui.h:
	* src/gth-viewer-ui.h:
	  Re-positioned zoom-to-width toolbar item.

2006-11-23  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/jpegutils/jpeg-memory-mgr.c: (jpeg_memory_src):
	* libgthumb/jpegutils/jpeg-memory-mgr.h:
	* libgthumb/jpegutils/jpegtran.c: (update_exif_thumbnail),
	(update_exif_data), (jpegtran_internal), (jpegtran_thumbnail),
	(jpegtran):
	* libgthumb/jpegutils/jpegtran.h:
	  Added error handling to jpeg/exif thumbnail
	  transformation code. Patch by Jef Driesen. Bug 361913.

2006-11-23  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gthumb-stock.c:
	* libgthumb/gthumb-stock.h:
	* libgthumb/icons/Makefile.am:
	* libgthumb/icons/zoom-width-16.png:
	* libgthumb/icons/zoom-width-24.png:
	* libgthumb/image-viewer.c: (zoom_to_width),
	(image_viewer_zoom_in), (image_viewer_zoom_to_width):
	* src/gth-browser-ui.h:
	* src/gth-browser.c: (window_update_zoom_sensitivity):
	* src/gth-fullscreen-ui.h:
	* src/gth-fullscreen.c: (update_zoom_sensitivity)
	* src/gth-viewer-ui.h:
	* src/gth-viewer.c: (viewer_update_zoom_sensitivity):
	* src/gth-window-actions-callbacks.c:
	(gth_window_activate_action_view_zoom_to_width):
	* src/gth-window-actions-callbacks.h:
	* src/gth-window-actions-entries.h:
	  Added a zoom-to-fit-width function. Bug 148971.

	* src/gth-fullscreen.c: (mouse_wheel_scrolled_cb),
	(gth_fullscreen_construct):
	  Extended mouse-wheel navigation to fullscreen mode.

2006-11-22  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/gthumb.schemas.in:
	* src/dlg-rename-series.c: (comp_func_name), (comp_func_size),
	(comp_func_time), (comp_func_exif_date), (comp_func_path),
	(comp_func_comment), (comp_func_none), (get_sortfunc),
	(update_list), (dlg_rename_series):
	  Extended the sort-by-comment and sort-by-ExifDateTime
	  modes to series renaming. Bugs 373557, 167791.

2006-11-22  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_preferences.glade:
	* data/gthumb.schemas.in:
	* doc/C/gthumb.xml:
	* libgthumb/image-viewer.c: (image_viewer_set_void),
	(image_loaded):
	* libgthumb/image-viewer.h:
	* libgthumb/preferences.c:
	* libgthumb/preferences.h:
	* src/dlg-preferences.c: (opt_scrollbar_position_reset_cb),
	(opt_scrollbar_position_keep_cb), (dlg_preferences):
	  Added preference for scrollbar positioning after
	  next/previous. Bug 309156.

	* src/gth-browser.c: (mouse_wheel_scrolled_cb):
	  Tweaked mouse wheel implementation, so that
	  wheel down = page down = next image.

2006-11-22  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-browser.c: (key_press_cb):
	  Forgot to free a list added in the last commit. Fixed.

2006-11-22  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* doc/C/gthumb.xml:
	* src/gth-browser.c: (key_press_cb):
	* src/gth-fullscreen.c: (viewer_key_press_cb):
	* src/gth-window-actions-entries.h:
	  Changed the animation toggle from "g" to "a".
	  Added a gimp shortcut key "g". Updated docs.

2006-11-22  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gthumb-marshal.list:
	* libgthumb/image-viewer.c: (image_viewer_class_init),
	(image_viewer_scroll_event):
	* libgthumb/image-viewer.h:
	* src/gth-browser.c: (mouse_wheel_scrolled_cb),
	(gth_browser_construct):
	  Implemented next/prev image navigation function
	  for the mouse wheel. Bug 131416.

2006-11-21  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-browser-actions-entries.h:
	  Added ctrl+shift+N shortcut for new folder. Bug 171048.

	* src/gth-browser.c: (key_press_cb):
	  Added F5 shortcut for refresh (adds to Ctrl+R). Bug 171048.

2006-11-21  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* doc/C/gthumb.xml:
	  Removed mention of the "Q" shortcut, because it does
	  not work (lower-case function makes it useless).

	* src/gth-browser.c: (toggle_image_preview_visibility),
	(key_press_cb), (gth_browser_hide_sidebar),
	(gth_browser_show_image_pane):
	  Removed the Escape shortcut (to close image preview),
	  because it is unexpected behaviour. Replaced Q/Esc functionality
	  by expanding the functionality of the "i" shortcut to toggle
	  the preview/properties/comments in all modes.

2006-11-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-search.c (directory_load_cb):
	* libgthumb/file-utils.c (uri_is_root):
	* libgthumb/file-utils.h: new function

	add the toplevel method the filename and use the uri_is_root function to
	check whether an uri is the root folder.

2006-11-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer.c:
	* src/catalog-png-exporter.c:
	* libgthumb/gth-file-view-thumbs.c (get_compfunc_from_method):
	* libgthumb/gth-sort-utils.c (gth_sort_by_filename_but_ignore_path):
	* libgthumb/gth-file-view-list.c (comp_func_comment):
	* libgthumb/gth-sort-utils.h:

	fixed compiler warnings, reformatted some code.

2006-11-18  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-data.c: (file_data_new), (file_data_update):
	* libgthumb/file-data.h:
	* libgthumb/gth-file-view-list.c: (comp_func_exif_date):
	* libgthumb/gth-file-view-thumbs.c: (comp_func_exif_date):
	* libgthumb/gth-sort-utils.c: (gth_sort_by_filetime_then_name),
	(gth_sort_by_exiftime_then_name):
	* libgthumb/gth-sort-utils.h:

	Read exif DateTime tags for files in browser view only at
	sort time, and cache them. This eliminates unnecessary file reads
	in the other sort modes. Bug 142590.

2006-11-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (add_rotate_toolbar_item):

	added a separator before the rotate toolbar item.

	* src/dlg-search.c (file_respects_search_criteria):

	ignore the path till the starting folder when matching the filepath

2006-11-18  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/gthumb.schemas.in:
	* libgthumb/file-data.c: (file_data_new), (file_data_update):
	* libgthumb/file-data.h:
	* libgthumb/gth-file-view-list.c: (comp_func_exif_date),
	(get_compfunc_from_method):
	* libgthumb/gth-file-view-thumbs.c: (comp_func_exif_date),
	(get_compfunc_from_method):
	* libgthumb/preferences.c:
	* libgthumb/typedefs.h:
	* src/catalog-png-exporter.c: (comp_func_exif_date),
	(get_sortfunc), (image_loader_done):
	* src/catalog-web-exporter.c: (comp_func_exif_date),
	(get_sortfunc), (image_loader_done):
	* src/dlg-png-exporter.c: (dlg_png_exporter_pref):
	* src/dlg-web-exporter.c: (dlg_web_exporter):
	* src/gth-browser-actions-entries.h:
	* src/gth-browser-ui.h:
	* src/gth-browser.c: (window_sync_sort_menu):
	  Added sort by Exif DataTime tag. Bugs 373557, 142590.

2006-11-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-ui.h:

	removed Save from the toolbar, moved Comment and Categories to the end.

	* src/gth-browser-actions-entries.h:
	* libgthumb/gthumb-stock.c:
	* libgthumb/icons/Makefile.am:
	* src/gth-fullscreen-actions-entries.h:

	use GTK_STOCK_GO_[BACK|FORWARD] instead of GTUHMB_STOCK_[NEXT|PREV]_IMAGE.

	* src/gth-browser.c: include rotation-utils.h

2006-11-17  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/Makefile.am:
	* libgthumb/gth-sort-utils.c: (gth_sort_by_comment_then_name),
	(gth_sort_by_size_then_name), (gth_sort_by_filetime_then_name),
	(gth_sort_by_filename_but_ignore_path), (gth_sort_by_full_path):
	* libgthumb/gth-sort-utils.h:
	  Added gth-sort-utils.* to rationalize sorting functions.
	  Part of bug 373557.

	* libgthumb/gth-file-view-list.c: (comp_func_name),
	(comp_func_size), (comp_func_time), (comp_func_path),
	(comp_func_comment):
	* libgthumb/gth-file-view-thumbs.c: (comp_func_name),
	(comp_func_size), (comp_func_time), (comp_func_path),
	(comp_func_comment):
	* src/catalog-png-exporter.c: (comp_func_name), (comp_func_path),
	(comp_func_comment), (comp_func_time), (comp_func_size):
	* src/catalog-web-exporter.c: (comp_func_name), (comp_func_path),
	(comp_func_comment), (comp_func_time), (comp_func_size):
	  Use new gth-sort-utils.c functions for consistent sorting.

	* libgthumb/glib-utils.c: (strcmp_null_tollerant):
	  Removed unnecessary comparisons (logically impossible).

2006-11-17  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/catalog-web-exporter.c: (image_data_new):
	  Corrected output file naming of non-jpeg images in web
	  album export. Always use original file extension.

	* src/catalog-web-exporter.c:
	  (export__copy_image__progress_update_cb), (export__copy_image):
	  Added transform-to-top-left step for copied originals, to ensure
	  proper viewing in browsers that ignore exif tags. Bug 370013.

2006-11-16  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/jpegutils/Makefile.am:
	* libgthumb/jpegutils/jpeg-memory-mgr.c: (init_source),
	(fill_input_buffer), (skip_input_data), (term_source),
	(init_destination), (empty_output_buffer), (term_destination),
	(jpeg_memory_src), (jpeg_memory_dest):
	* libgthumb/jpegutils/jpeg-memory-mgr.h:
	* libgthumb/jpegutils/jpegtran.c: (update_exif_thumbnail):
	  New files to hold jpeg callback functions, as a
	  refinement of the developing code to rotate embedded
	  thumbnails. Patch by Jef Driesen. Bug 361913.

2006-11-15  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-location.c: (monitor_changed_cb),
	(gth_location_finalize), (gth_location_class_init):
	  Possible fix to the frequently-duped bug 356623. Removes
	  all monitor_changed_cb signal handlers during finalize
	  to avoid unref race conditions. Patch by Manuel Braga.

2006-11-15  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/jpegutils/jpegtran.c: (jpegtran): Fixed memory
	  and file descriptor leaks in error handling code.
	  Patch by Jef Driesen. Bug 361913.

2006-11-15  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/catalog-web-exporter.c:
	(copy_exif_from_orig_and_reset_orientation), (save_thumbnail_cb),
	(save_image_preview_cb), (save_resized_image_cb):
	  Renamed copy_exif_from_orig_and_reset_orientation for clarity.
	  Added comments.

	* src/gth-browser.c: (save_jpeg_data):
	* src/gth-viewer.c: (save_jpeg_data):
	  Reverted to file-based modification of orientation tags when
	  saving pixbufs, rather than modifying the in-memory tags.
	  This is less efficient, but will have fewer unintended
	  consequences. Bug 370013.

2006-11-13  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* doc/C/gthumb.xml: Expanded the web album section
	  of the manual, including more details about headers
	  and footers. Patch by Rennie deGraaf.

2006-11-12  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/dlg-jpegtran.c: (apply_transformation):
	  Corrected error in the new rotation routines - data->transform
	  was changed during rotation. A copy should be made instead.
	  See bug 361913 comment 31.

	* src/gth-window-actions-entries.h:
	  Added keyboard shortcut for Reset Exif Orientation menu item.

2006-11-12  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/jpegutils/jpegtran.c: (thumbnail_src_init),
	(thumbnail_src_fill), (thumbnail_src_skip), (thumbnail_src_term),
	(thumbnail_dest_init), (thumbnail_dest_flush),
	(thumbnail_dest_term), (update_exif_thumbnail),
	(jpegtran_internal), (jpegtran):
	  Patch to update embedded jpeg-exif-thumbnails when rotating the
	  image, for compatibility with other applications.
	  Bug 361913. Patch by Jef Driesen.

2006-11-12  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-folder-selection-dialog.c:
	(gth_folder_selection_construct):
	  Made the move-to folder selection dialog and its subelements
	  fully resizable to handle long path names. Bug #373406.
	  Patch by Manuel Braga.

2006-11-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-ui.h: moved the ViewAs commands lower.
	use ToolBar_EditComment and ToolBar_EditCategories to avoid "..." on the
	toolbar.

	* src/gth-window-actions-entries.h: removed "..." from Image_OpenWith and
	RotateImages to avoid the dots on the toolbar (I couldn't find a better
	solution).

	* src/dlg-redeye-removal.c:
	* libgthumb/jpegutils/jpegtran.c:
	* libgthumb/comments.c:
	* libgthumb/Makefile.am:
	* src/dlg-photo-importer.c: fixed compiler warnings.

2006-11-10  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* doc/C/gthumb.xml:
	* src/dlg-scale-series.c: (help_cb), (dlg_scale_series):
	  The Scale Series help button didn't do anything.
	  A callback was added, and a new section was added to the manual.

2006-11-10  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* doc/C/gthumb.xml:
	  Greatly expanded the section of the manual dealing
	  with web album generation.

2006-11-10  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-folder-selection-dialog.c:
	  Minor tweak to file move folder selection dialog UI.
	  Increased default width/height of lists. Bug #373406.

2006-11-10  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/jpegutils/jpegtran.c: (update_exif_orientation),
	(swap_fields), (update_exif_dimensions), (update_exif_thumbnail),
	(update_exif_data), (jpegtran):
	* src/rotation-utils.c: (apply_transformation_jpeg),
	(get_next_transformation):
	* src/rotation-utils.h:
	  Made exif tag updating an integral part of jpegtran,
	  to reduce unnecessary file reads/writes. Added stub
	  for proper updating of exif thumbnail - to be
	  expanded. Bug 361913. Patch by Jef Driesen.

2006-11-09  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/dlg-jpegtran.c: (jpeg_mcu_dialog):
	  Fixed action of jpeg-mcu-trim dialog when the close
	  button was pressed. Bug 361913. Patch by Jef Driesen.

2006-11-09  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* doc/ru: Deleted obsolete Russian manual translation.
	  Bug #346889.

2006-11-09  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* po/POTFILES.in:
	  Added missing files to translation list (5 total).

2006-11-09  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/albumthemes/BestFit/BestFit.css:
	* data/albumthemes/BestFit/BestFit.js:
	* data/albumthemes/BestFit/image.gthtml:
	* data/albumthemes/BestFit/index.gthtml:
	* data/albumthemes/BestFit/index.js:
	* data/albumthemes/BestFit/lib.js:
	  Improvements to the BestFit web album theme (image
	  view). Bug 319933. Patch by Rennie deGraaf.

2006-11-08  Daniel Nylander <po@danielnylander.se>

	* sv.po: Swedish translation updated.

2006-11-08  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/gth-exif-utils.c: (set_orientation_in_exif_data):
	* libgthumb/gth-exif-utils.h:
	* src/catalog-web-exporter.c: (copy_exif_from_orig):
	* src/gth-browser.c: (save_jpeg_data):
	* src/gth-viewer.c: (save_jpeg_data):
	* src/rotation-utils.c: (write_orientation_field),
	(jtransform_perfect_transform):
	  Efficiency improvements in resetting exif orientation tags
	  when save jpegs. Bug 370013. Patch by Manuel Braga.

2006-11-08  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_web_exporter.glade: UI tweaks
	  in web album exporter (added note about row/col
	  auto-arranging). Bug 319933.

	* src/dlg-categories.c:
	* src/dlg-change-date.c:
	* src/dlg-comment.c:
	* src/dlg-convert.c:
	* src/dlg-jpegtran.c:
	* src/dlg-photo-importer.c:
	* src/dlg-preferences.c:
	* src/dlg-redeye-removal.c:
	* src/dlg-rename-series.c:
	* src/dlg-reset-exif.c:
	* src/dlg-search.c:
	* src/dlg-web-exporter.c:
	  Added missing #includes for help functions. Bug 369449.

2006-11-07  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* configure.in:
	* data/albumthemes/BestFit/BestFit.css:
	* data/albumthemes/BestFit/BestFit.js:
	* data/albumthemes/BestFit/Makefile.am:
	* data/albumthemes/BestFit/back.png:
	* data/albumthemes/BestFit/image.gthtml:
	* data/albumthemes/BestFit/index.gthtml:
	* data/albumthemes/BestFit/index.js:
	* data/albumthemes/BestFit/lib.js:
	* data/albumthemes/BestFit/next.png:
	* data/albumthemes/BestFit/prev.png:
	* data/albumthemes/BestFit/preview.png:
	* data/albumthemes/BestFit/thumbnail.gthtml:
	* data/albumthemes/Makefile.am:
	  Initial addition of Rennie deGraaf's "BestFit" web album
	  theme. Bug 319933. Some tweaks expected shortly.

2006-11-07  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb.glade:
	  More stock buttons in the edit bookmarks dialog.

2006-11-07  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-browser-actions-entries.h:
	* src/gth-window-actions-callbacks.c:
	(gth_window_activate_action_alter_image_resize):
	* src/gth-window-actions-callbacks.h:
	* src/gth-window-actions-entries.h:
	  Added missing ellipses to menu items, as per HIG.

2006-11-07  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/catalog-web-exporter.c: (get_page_idx_from_image_idx):
	  Corrected broken index links in web albums (broken by yesterday's
	  web album patch). Bug 319933, patch by Rennie deGraaf.

2006-11-06  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/gthumb.schemas.in:
	* libgthumb/gth-file-view-list.c: (gfv_sorted),
	(comp_func_comment), (get_compfunc_from_method):
	* libgthumb/gth-file-view-thumbs.c: (comp_func_comment),
	(get_compfunc_from_method):
	* libgthumb/preferences.c:
	* libgthumb/typedefs.h:
	* src/catalog-png-exporter.c: (comp_func_name),
	(comp_func_comment), (get_sortfunc):
	* src/catalog-web-exporter.c: (comp_func_comment), (get_sortfunc):
	* src/dlg-png-exporter.c: (dlg_png_exporter_pref):
	* src/dlg-web-exporter.c: (dlg_web_exporter):
	* src/gth-browser-actions-entries.h:
	* src/gth-browser-ui.h:
	* src/gth-browser.c: (window_sync_sort_menu):

	  Added sorting by comment. Bug 356718. Adapted from
	  a patch by David Kiliani.

2006-11-06  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/albumthemes/Classic/image.gthtml:
	* data/albumthemes/Classic/thumbnail.gthtml:
	* data/albumthemes/ClassicClips/image.gthtml:
	* data/albumthemes/ClassicClips/thumbnail.gthtml:
	* data/albumthemes/Flicker/image.gthtml:
	* data/albumthemes/Flicker/thumbnail.gthtml:
	* data/albumthemes/NeatRound/image.gthtml:
	* data/albumthemes/NeatRound/thumbnail.gthtml:
	* data/albumthemes/Wiki/image.gthtml:
	* data/albumthemes/Wiki/thumbnail.gthtml:
	* data/glade/gthumb_web_exporter.glade:
	* data/gthumb.schemas.in:
	* doc/theme-xml.txt:
	* libgthumb/comments.c: (_append_escaped_text_for_html):
	* libgthumb/preferences.h:
	* libgthumb/typedefs.h:
	* src/albumtheme-private.h:
	* src/albumtheme.c: (yytnamerr), (yyparse), (yywrap), (yyerror):
	* src/albumtheme.l:
	* src/albumtheme.y:
	* src/catalog-web-exporter.c: (image_data_new), (image_data_free),
	(catalog_web_exporter_init),
	(catalog_web_exporter_set_single_index), (get_var_value),
	(get_page_idx_from_image_idx), (gth_parsed_doc_print),
	(export__save_html_files):
	* src/catalog-web-exporter.h:
	* src/dlg-web-exporter.c: (export), (single_index_toggled_cb),
	(dlg_web_exporter), (caption_dialog__ok_clicked),
	(show_caption_dialog_cb):
	* src/lex.albumtheme.c: (yy_get_next_buffer),
	(yy_get_previous_state), (input), (yy_load_buffer_state),
	(yy_pop_state), (yy_top_state), (main):
	  Major web album formatting enhancements. Proper iso-code escaping
	  of non-ASCII characters. Initial development patch, some known issues.
	  Additional tweaks are expected shortly. See bug 319933.
	  Patch by Rennie deGraaf.

2006-11-06  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/dlg-redeye-removal.c: (compute_scale_factor):
	  Shrank window height for redeye removal tool slightly.

2006-11-05  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/file-utils.c: (get_temp_dir_name),
	(get_temp_file_name):
	* libgthumb/file-utils.h:
	* src/dlg-photo-importer.c: (load_images_preview__step):
	* src/gth-window-actions-callbacks.c:
	(gth_window_activate_action_file_print):
	* src/rotation-utils.c: (apply_transformation_jpeg):
	  More secure method of temporary file generation.
	  Bug #358894. Patch by Rennie deGraaf.

2006-11-05  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/gth-window-actions-entries.h:
	  Changed Help>Help to Help>Contents, as per HIG.

2006-11-05  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/Makefile.am:
	* libgthumb/gth-utils.c: (gthumb_display_help):
	* libgthumb/gth-utils.h:
	* src/dlg-categories.c: (help_cb):
	* src/dlg-change-date.c: (help_cb):
	* src/dlg-comment.c: (help_cb):
	* src/dlg-convert.c: (help_cb):
	* src/dlg-jpegtran.c: (help_cb):
	* src/dlg-photo-importer.c: (help_cb):
	* src/dlg-preferences.c: (help_cb):
	* src/dlg-redeye-removal.c: (help_cb):
	* src/dlg-rename-series.c: (help_cb):
	* src/dlg-reset-exif.c: (help_cb):
	* src/dlg-search.c: (help_cb):
	* src/dlg-web-exporter.c: (help_cb):
	* src/gth-window-actions-callbacks.c:
	(gth_window_activate_action_help_help),
	(gth_window_activate_action_help_shortcuts):
	Added libgthumb/gth-utils.c, and placed gthumb_display_help in it,
	to reduce code duplication. Bug 369449. Patch by Manuel Braga.

	* src/gth-browser.c: (save_jpeg_data):
	* src/gth-viewer.c: (save_jpeg_data):
	* src/catalog-web-exporter.c: (copy_exif_from_orig):
	Added some comments, to clarify the changes in the previous commit.

2006-11-04  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/catalog-web-exporter.c: (copy_exif_from_orig):
	* src/gth-browser.c: (save_jpeg_data):
	* src/gth-viewer.c: (save_jpeg_data):

	  Reset exif orientation tags after "save", "save as", and
	  during web album export. Bug 370013.

2006-11-04  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/Makefile.am:
	* src/dlg-redeye-removal.h:
	* src/gth-window-actions-callbacks.c:
	  Added header file (dlg-redeye-removal.h).
	  Patch by Manuel Braga.

2006-11-03  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/catalog-web-exporter.c: (image_data_new): Patch to
	  include original filename within album-generated image filenames.
	  Patch by Christophe Bisière. Bug #173025.

2006-11-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* doc/C/gthumb.xml:
	* src/dlg-jpegtran.c: (jpeg_mcu_dialog), (apply_transformation):
	* src/dlg-photo-importer.c: (adjust_orientation__step):
	* src/rotation-utils.c: (jtransform_perfect_transform),
	(apply_transformation_jpeg):
	* src/rotation-utils.h: Added option to trim jpegs during
	  transformations on images whose dimensions are not multiples of
	  the jpeg MCU (8). See bug #361913. Patch by Jef Driesen.

2006-11-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/dlg-web-exporter.c: (help_cb), (dlg_web_exporter): The
	  web album "Help" button didn't do anything (bug #369436). Fixed!

2006-11-02  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_web_exporter.glade:
	* src/dlg-web-exporter.c: (get_idx_from_size), (dlg_web_exporter):

	  New re-size options in web exporter to allow equal landscape and
	  portrait image sizes (square bounding box). Bug #313671. Patch
	  by Stanislav Brabec.

2006-11-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* .cvsignore:
	* Makefile.am:
	* configure.in:
	* doc/C/gthumb.xml:
	* doc/ChangeLog:
	* doc/Makefile.am:
	* doc/gthumb.omf.in:
	* m4/.cvsignore:

	  Migration to gnome-doc-utils (bug #346889). Patch by Don Scorgie.

2006-11-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_tools.glade: Fixed duplicate and missing
	  shortcut keys in the lossless rotate dialog, and added note
	  mentioning [ and ] shortcuts. Fixes bugs #145130 and #142936.

2006-11-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* src/dlg-file-utils.c: (dlg_files_delete): Fixed silent fail of file
	  deletes on read-only-mounted filesystems. Bug #335180. Patch
	  by Manuel Braga.

2006-11-01  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/print-callbacks.c:  (pci_get_next_line_to_print_delimiter):
	  Fixes bug 305046, by making printed comments wrap between words, rather than
	  blindly wrapping in the middle of words.

	* data/gthumb.schemas.in:
	* data/glade/gthumb_tools.glade:
	* libgthumb/glib-utils.c: (_g_substitute_pattern):
	* src/dlg-rename-series.c: (update_list): Fixes bug 338623 and bug 339037,
	  by adding a "%e" file-extension symbol when renaming a series of files.
	  This allows extensions to be changed, and fixes a crash when files without
	  extensions were renamed.

	* data/glade/gthumb_comments.glade:
	* doc/C/gthumb.xml:
	* src/dlg-categories.c: (add_category_cb), (remove_category_cb),
	(ok_clicked_cb), (use_category_toggled), (dlg_categories_common),
	(dlg_categories_update):
	* src/dlg-comment.c: (save_clicked_cb),
	(date_optionmenu_changed_cb), (dlg_comment_new),
	(dlg_comment_update):
	* src/gth-fullscreen.c: (gth_fullscreen_init):
	* src/gth-viewer.c: (gth_viewer_init):
	* src/gth-window.c: (gth_window_class_init), (gth_window_init):
	  The "Close" and "Save" buttons in the comments and categories dialogs have
	  been changed to "Cancel" and "OK". The save is automatic when OK is clicked,
	  for more intuitive operation.

2006-10-31  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* libgthumb/async-pixbuf-ops.c: (scale_step):
	Fixes image scaling memory leak (bug #349576). Patch
	by Manuel Braga.

2006-10-31  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_camera.glade:
	* doc/C/gthumb.xml:
	* src/dlg-photo-importer.c: (model__destroy_cb),
	(model__ok_clicked_cb), (get_autodetect_model_list),
	(model__autodetect_model_changed_cb), (model__refresh_cb),
	(model__manual_select_cb), (dlg_select_camera_model_cb):

	Adds support for multiple auto-detected cameras (or
	multiple modes for single cameras). Bug 361967.

2006-10-31  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb_preferences.glade:
	* src/dlg-preferences.c: (destroy_cb), (dlg_preferences):
	* src/gth-browser-actions-entries.h:
	* src/gth-browser-ui.h:
	* src/gth-browser.c: (view_as_cb), (view_as_radio_action),
	(gth_browser_construct), (close__step6):

	Puts View As Slides / List in View menu, not in prefs.
	Fixes bug #310648.

2006-10-31  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* NEWS:
	* data/glade/Makefile.am:
	* data/glade/gthumb_redeye.glade:
	* doc/C/gthumb.xml:
	* libgthumb/gthumb-stock.c:
	* libgthumb/gthumb-stock.h:
	* libgthumb/icons/Makefile.am:
	* libgthumb/icons/redeye-removal-16.png:
	* src/Makefile.am:
	* src/dlg-redeye-removal.c: (get_widget), (destroy_cb),
	(cancel_cb), (compute_scale_factor), (find_region), (fix_redeye),
	(update_image), (press_in_win_event), (undo_cb), (help_cb),
	(ok_cb), (make_redeye_buf), (clone_redeye_buf),
	(destroy_redeye_buf), (initialize_redeye), (dlg_redeye_removal):
	* src/gth-browser-ui.h:
	* src/gth-browser.c: (window_update_sensitivity):
	* src/gth-viewer-ui.h:
	* src/gth-viewer.c: (viewer_update_sensitivity):
	* src/gth-window-actions-callbacks.c:
	(gth_window_activate_action_alter_image_redeye_removal):
	* src/gth-window-actions-callbacks.h:
	* src/gth-window-actions-entries.h:

	Adds a redeye removal tool. See bug #140533. Patch by
	Carl Michal, Marty Leisner, and Michael Chudobiak.

2006-10-31  Michael J. Chudobiak  <mjc@cvs.gnome.org>

	* data/glade/gthumb.glade: Fix image properties dialog window height.
	  Fixes bug #357957. Patch by Manuel Braga.

2006-10-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (key_press_cb): Fixes zoom keybinding (bug #345339).

	* src/rotation-utils.c (write_orientation_field):
	* src/rotation-utils.h:
	* src/dlg-reset-exif.c (apply_transformation):
	* src/dlg-jpegtran.c (apply_transformation): Fixes tag updating when
	multiple IFDs have orientation tag.

	* libgthumb/jpegutils/jpegtran.h:
	* libgthumb/jpegutils/jpegtran.c (jpegtran): Adds support for the trim mode.

	* libgthumb/typedefs.h: Adds comments to the GthTransform typedef, to
	explain its purpose.

	* README: Updates the README file to reflect new intltool minimum
	requirement.

	Patch by Jef Driesen, Michael Chudobiak.

2006-10-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/gthumb.schemas.in:
	* libgthumb/preferences.h:
	* libgthumb/print-callbacks.c (pci_print_comment): 	Added ability to print
	filenames. Fixed printing of multiline comments.

	Fixes bug #348969 – Add option to print path and filename when printing

	* src/gth-fullscreen.c (gth_fullscreen_construct):

	Fixed bug #321840 – Zoom-to-fit state changes between images in fullscreen
	mode.
	Patch by Michael Chudobiak

2006-10-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* po/LINGUAS:
	* configure.in:

	Fixed bug #361770 - Use po/LINGUAS
	Patch by Wouter Bolsterlee (uws)

	* src/dlg-jpegtran.c (apply_transformation):

	Fixed bug #361913 - Need to improve rotation code efficiency.
	Patch by Michael Chudobiak

	* libgthumb/Makefile.am: use xgen-$(@F) as temp filename.

	* src/gth-exif-utils.[ch]: removed
	* src/jpegutils/*: removed

	* libgthumb/Makefile.am: fixed build of generated files.

2006-10-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/rotation-utils.h (update_orientation_field):
	* src/rotation-utils.c:
	* src/gth-window-actions-callbacks.c (adjust_orientation__step):
	* src/dlg-photo-importer.c:
	* src/dlg-jpegtran.h:
	* src/dlg-jpegtran.c:
	* libgthumb/typedefs.h:
	* libgthumb/pixbuf-utils.h (pixmap_from_xpm):
	* libgthumb/pixbuf-utils.c:
	* libgthumb/image-loader.c (image_loader_set_pixbuf):
	* libgthumb/gth-exif-utils.h:

	Merged RotatonData, GthExifOrientation and GthOrientation into
	GthTransform. The new enum contains all 8 possible transformations and
	is compatible with the exif orientation values.
	Moved _gdk_pixbuf_transform_exif_orientation from image-loader.h to
	pixbuf-utils.h and renamed it to _gdk_pixbuf_transform.
	Moved the implementation of the button callbacks in dlg-jpegtran.c to a
	common function.
	Combined the two parameters rot_type and tran_type of the function
	dlg_apply_jpegtran into only one parameter.
	Renamed the function update_rotation_from_exif_data in rotation-utils.h
	to read_orientation_field.
	Rewrote the lossless jpeg transform to perform all types of
	transformations in one pass.
	Rewrote the generic transform to use the _gdk_pixbuf_transform function.
	Replaced the get_next_value_* functions with one new function
	(get_next_transformation) that supports all 8 transformations. Added two
	functions to find the rotation and mirror/flip part of a transformation.

	Patch by Jef Driesen.  Bug #361701

	* src/gth-browser-ui.h: move ResetExif under RotateImages, add a
	searator.

	* src/gth-window-actions-entries.h: changed "Reset Exif orientation" to
	"Reset Exif Orientation".

	* doc/C/gthumb.xml:
	* data/glade/gthumb_camera.glade:
	* src/dlg-photo-importer.c (dlg_photo_importer): added a help button.

	* src/dlg-reset-exif.c (apply_transformation): removed unused variables
	* src/rotation-utils.h: added reset_orientation_field

	* NEWS:
	* README:
	* data/glade/gthumb_tools.glade:
	* doc/C/gthumb.xml:
	* libgthumb/print-callbacks.c:
	* src/Makefile.am:
	* src/gth-browser-ui.h:
	* src/gth-browser.c:
	* src/gth-viewer-ui.h:
	* src/gth-window-actions-callbacks.c:
	* src/gth-window-actions-callbacks.h:
	* src/gth-window-actions-entries.h:
	* src/main.c:
	* src/dlg-reset-exif.h:
	* src/dlg-reset-exif.c:

	1. Adds a Tool > Reset Exif orientation function, for fixing images
	incorrectly imported and auto-rotated by previous versions of gthumb.

	2. Updates the README file, indicating the correct library requirements.

	3. Updates the NEWS file, to reflect the exif improvements.

	4. Makes the short command line options work (trivial patch from bug
	349747)

	5. Makes print scaling work (trivial patch from bug 353681).

	Patch by Michael Chudobiak

2006-10-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_camera.glade:
	* data/glade/gthumb_tools.glade:
	* doc/C/gthumb.xml:

	1. Changes the UI label to "Apply physical transform". I think this
	gets to the crux of what exactly the checkbox does. And if it doesn't:
	2. Detailed tool-tips have been added to the checkboxes. They are
	different for the import and rotation dialogs. Please have a look.
	3. The manual documentation has been clarified a bit.

	Patch by Michael Chudobiak

2006-10-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/gthumb.schemas.in
	* data/glade/gthumb_tools.glade
	* doc/C/gthumb.xml
	* libgthumb/preferences.h
	* src/dlg-jpegtran.c
	* src/dlg-photo-importer.c
	* src/gth-browser-ui.h
	* src/gth-viewer-ui.h
	* src/rotation-utils.c

	1. Less convoluted execution when no orientation tag is present.
	2. Do not physical-transform if the dimensions are not multiples of 8
	(jpegmcu) and an exif orientation tag is present, to avoid inevitable
	data corruption (bug 329129). It reverts to tag-change only for safety.
	3. Provide error message if rotate-save fails due to unsupported file
	type.
	4. Add comments to the rotation code for clarity.
	5. Updates rotation help file to describe exif subtleties.
	6. Renames some of the gconf keys, for greater consistency with other
	keys, and to remove them from the general section.
	7. FYI, the keys are set to default to the physical transform mode.
	8. remove non-existent "Tools_JPEGRotate_Auto" from pop-up menu.

	Patch by Michael Chudobiak

2006-10-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* many files: remove remove unnecessary #ifdefs

	Patch by Rennie deGraaf

	* configure.in: Patch to make libexif and libjpeg mandatory (v2)

	Patch by Rennie deGraaf

	* many files:

	Applied patch by Michael Chudobiak from bug #343867 comment #130

	Merged branch exif-testing:

2006-10-06  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgthumb/gth-exif-utils.c
	* libgthumb/gth-exif-utils.h
	* libgthumb/jpegutils/.cvsignore
	* libgthumb/jpegutils/Makefile.am
	* libgthumb/jpegutils/README
	* libgthumb/jpegutils/jpeg-data.c
	* libgthumb/jpegutils/jpeg-data.h
	* libgthumb/jpegutils/jpeg-marker.c
	* libgthumb/jpegutils/jpeg-marker.h
	* libgthumb/jpegutils/jpegtran.c
	* libgthumb/jpegutils/jpegtran.h
	* libgthumb/jpegutils/transupp.c
	* libgthumb/jpegutils/transupp.h: new files

	* configure.in
	* components/catalog-view/Makefile.am
	* components/image-viewer/Makefile.am
	* data/gthumb.schemas.in
	* data/glade/gthumb_preferences.glade
	* data/glade/gthumb_tools.glade
	* doc/C/gthumb.xml
	* libgthumb/Makefile.am
	* libgthumb/gthumb-module.c
	* libgthumb/image-loader.c
	* libgthumb/preferences.h
	* src/Makefile.am
	* src/dlg-jpegtran.c
	* src/dlg-jpegtran.h
	* src/dlg-photo-importer.c
	* src/dlg-preferences.c
	* src/gth-browser-ui.h
	* src/gth-window-actions-callbacks.c
	* src/gth-window-actions-callbacks.h
	* src/gth-window-actions-entries.h
	* src/rotation-utils.c
	* src/rotation-utils.h: modified files.

	Committed patches listed in comment #106 of bug #343867,
	as follows:

	patch -p0 < gthumb-exif-v3.patch
	patch -p0 < gthumb_reset_exif_orientation_v2.patch
	patch -p0 < importer.patch
	patch -p0 < gthumb_rotate_v3.patch
	patch -p1 < gthumb-20061006-exif-rotate.patch
	patch -p1 < delete-checkbox-v2.patch

	This is development aimed at improving gthumb's handling
	of exif metadata.

2006-10-06  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	Initiating "exif-testing" branch.  Testing to make sure commit
	goes to the right branch, and not to HEAD.

2006-10-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* configure.in: changed version to 2.9.0

2006-10-01  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.7.9 released ]

	* configure.in:
	* NEWS:  updated for 2.7.9

	* src/gth-window-actions-entries.h:

	Fixed bug #355376 – "Help" shortcut should be "F1" instead of "Ctrl+H"
	Patch by Michael Chudobiak

	* src/gth-browser.c (set_dir_list_continue):

	Removed double semicolon.  Fixes bug #343982 – fix build with gcc 2.95
	Patch by Jens Granseuer.

	* data/Makefile.am:

	Fixed installation when srcdir != builddir

	* src/catalog-web-exporter.c (get_image_filename):

	Fixed bug #358343 – web album: assertion `g_path_is_absolute
	(local_full_path)' failed

	* src/gthumb-preloader.c:

	Set N_ARGS to 3. Fixes bug #358326 – message: assertion `k < N_LOADERS'
	failed

2006-09-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/Makefile.am:

	Fixed errors when srcdir != builddir

	* libgthumb/image-viewer.c (gth_iviewer_interface_init):

	Fixed compiler warnings.

2006-09-11  Pema Geyleg  <pgeyleg@gmail.com>

	* configure.in: Added 'dz' to ALL_LINGUAS

2006-08-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-folder-selection-dialog.c (file_sel_ok_clicked_cb):
	* src/gth-browser-actions-callbacks.c (open_location_response_cb):

	Unescape the uri before using it.
	Fixes bug #352747 – gthumb can't open folder through file selector.

	* libgthumb/file-utils.c (get_extension):

	Fixed bug #353613 – Negative array access in get_extension.
	Patch by Pascal Terjan.

	* libgthumb/print-callbacks.c (add_catalog_preview):

	Fixed bug #353390 – Fix default rotation angle in portrait print mode.
	Patch by Michael Chudobiak.

2006-08-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-preloader.c:
	* src/gthumb-preloader.h:
	* src/gth-browser.c (load_timeout_cb):
	* src/gth-fullscreen.c (real_load_current_image): removed the 4th
	preloader.
	* libgthumb/image-loader.c (image_loader_start__step2): use
	priv->priority instead of always using DEFAULT

	Fixes bug #349556 - [PATCH] Little bug makes gThumb slower than it can
	be.
	Patch by Colin Leroy

2006-08-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* doc/C/gthumb.xml:

	Fixed bug #350732: "loose" should be "lose"
	Patch by Bruce Cowan

	* libgthumb/Makefile.am (libgthumb_la_LIBADD):

	Fixed bug #351058: build failure when -Wl,--as-needed is passed to
	linker flags.
	Patch by Fryderyk Dziarmagowski.

2006-07-24  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.7.8 released ]

	* configure.in:
	* NEWS: updated for 2.7.8

2006-07-24  Christophe Merlet  <redfox@redfoxcenter.org>

	* data/albumthemes/text.h: Fixed typo Previous.

2006-06-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/bookmarks.c (bookmarks_remove_from): free the link after
	freeing the linked data.

2006-06-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-file-list.c (gth_file_list_update_current_thumb):
	the signal name is thumb_error, not error.

	* libgthumb/thumb-loader.c (thumb_loader_start): stop the loader
	before starting it again.

	* libgthumb/glib-utils.c:
	* libgthumb/glib-utils.h:
	* libgthumb/image-loader.c: exec the done_func function in an idle loop.

2006-05-28  Clytie Siddall <clytie@riverland.net.au>

	* configure.in	Added vi in ALL_LINGUAS line.

2006-05-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (gth_browser_construct): set a smaller height for
	the progressbar to avoid an image resize.

2006-05-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.7.7 released ]

	* NEWS: updated for 2.7.7

	* src/dlg-web-exporter.c (dlg_web_exporter): use Wiki as the default
	album theme.
	(get_default_theme):

	Fixed bug #340406 - gthumb doesn't compain of nonexisting default
	web-album theme.

2006-05-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (sidebar_list_key_press, key_press_cb)
	(viewer_key_press_cb):
	* src/gth-fullscreen.c (viewer_key_press_cb):

	* src/gth-viewer.c (viewer_update_image_info)
	(viewer_key_press_cb):

	Fixed bug #339645 - [2.7.5.1] caps-lock disables keyboard shortcuts

	Fixed bug #339484 - Gthumb 2.7.5.1 doesn't store EXIF information in
	JPEG files, when image is loaded directly

	* src/dlg-photo-importer.c (get_file_name):

	Fixed bug #339291 - "keep original filename" changes case

	* libgthumb/file-utils.c (get_path_relative_to_dir):

	Fixed bug #339852 - index image maps creating wrong href

	* src/gth-window-actions-callbacks.c
	(gth_window_activate_action_help_about): removed unused var.

	* libgthumb/Makefile.am (libgthumb_la_LIBADD):

	Fixed bug #340947 - gthumb -Wl,--as-needed patch

2006-04-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.7.6 released ]

	* NEWS:
	* configure.in: updated for 2.7.6

2006-04-17  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Remove obsolete entry for no_NO
	* po/nb.po: Updated Norwegian bokmål translation.
	* po/nn.po: Updated Norwegian nynorsk translation.
	* po/no.po: Remove this.

2006-04-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gs-fade.c (xf86_whack_gamma, gamma_info_init): return FALSE
	instead of aborting.

	Fixes bug #336851 - gThumb crashes when I try "full screen"-mode

2006-04-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-folder-selection-dialog.c (gth_folder_selection_get_folder):

	Fixed bug #337920 - created directory "doesn't exist" if it contains
	spaces.

	* src/dlg-open-with.c (open_cb): use gnome_vfs_mime_application_launch
	when the user selects a registered application.

2006-04-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/ClassicClips/thumbnail.gthtml:
	* data/albumthemes/Classic/thumbnail.gthtml:
	* data/albumthemes/NeatRound/thumbnail.gthtml:

	Fixed bug #336930 - Web album without JavaScript

2006-04-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/icons/exit-fullscreen-24.png:
	* libgthumb/icons/fullscreen-16.png:
	* libgthumb/icons/fullscreen-24.png: remove files
	* src/gth-fullscreen-actions-entries.h:
	* libgthumb/gthumb-stock.c:
	* libgthumb/gthumb-stock.h:
	* src/gth-window-actions-entries.h: use GTK_STOCK_FULLSCREEN.

	* libgthumb/dlg-save-image.c (dlg_save_image_as):
	Fixed bug #334903 - Should save on hitting enter in “save as” dialog

	* components/catalog-view/Makefile.am (gthumb_catalog_view_LDADD):
	* components/image-viewer/Makefile.am (gthumb_image_viewer_LDADD):
	* src/Makefile.am (gthumb_LDADD):
	* configure.in: removed libpng check.

	* libgthumb/gth-nav-window.c (gth_nav_window_construct): do not call
	show_all on the main table.

	* libgthumb/gth-image-list.c (truncate_comment_if_needed): realize
	the widget if needed.

	* configure.in: requires gtk+ 2.8

	* src/gth-browser.c (go_to_folder_after_image_loaded): load the folder
	even after an error.

	* src/gth-window-actions-callbacks.c
	(gth_window_activate_action_help_about): simplify about dialog.

	* src/main.c (initialize_data):
	* data/Makefile.am (install-data-hook):
	* data/gthumb.desktop.in (Icon): Install theme-friendly icons

	* autogen.sh: set REQUIRED_AUTOMAKE_VERSION to 1.8; added
	USE_COMMON_DOC_BUILD=yes

	* src/dlg-web-exporter.c (install_theme__ok_cb): use get_filename
	instead of get_uri.
	(theme_dialog__install_theme_clicked): the user have to choose a file
	from here, not a folder; set home as current folder.

2006-03-24  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/main.h:
	* src/main.c:
	* src/gth-application.c (impl_gth_application_load_image):
	* src/gth-browser-actions-callbacks.c (if):
	* src/gth-viewer.h:
	* src/gth-viewer.c:

	Always use the browser mode, added a --viewer command line option to
	use the viewer mode for single images.

	* src/gth-browser.h:
	* src/gth-browser.c (go_to_uri):

	Load the folder after loading the image.

2006-03-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.7.5.1 released ]

	* src/gth-batch-op.c (pixbuf_op_done_cb): copy the image comment.

	* src/dlg-photo-importer.c (save_image): convert to local path
	before saving.

	* src/catalog-png-exporter.c (end_page): use _gdk_pixbuf_save
	instead of gdk_pixbuf_save

2006-03-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.7.5 released ]

	* NEWS:
	* configure.in: update for 2.7.5

2006-03-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-location.c (update_drives): only display user visible drives.

2006-03-16  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/thumb-loader.c (thumb_loader_start): check a good thumbnail
	before checking a valid failed thumbnail.

	Fixes bug #329889 – thumbnail generation and accentuated characters in
	path.

	* src/gth-image-selector.c (button_press): do nothing when clicking
	outside the image.

	* src/dlg-web-exporter.c (install_theme__ok_cb):
	* src/dlg-search.c (search_clicked_cb):
	* src/dlg-png-exporter.c (export):
	* src/dlg-photo-importer.c (get_folder_name):
	* src/dlg-duplicates.c (find_cb):
	* src/dlg-scale-series.c (ok_cb):
	* src/dlg-convert.c (ok_cb): use get_uri instead of get_filename

	* src/gth-browser.c (gth_browser_go_up__is_base_dir): compare two uris,
	instead of a local path and a uri.

	* libgthumb/comments.c: fixed bug that prevented comments to be
	removed correctly when iptc_data support was enabled.

2006-03-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/catalog-list.c (catalog_list_select_iter):
	* src/gth-browser.c (catalog_activate):
	* src/main.c:

	Fixed command line catalog creation.

2006-03-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-data.h:
	* libgthumb/file-data.c:
	* src/GNOME_GThumb.idl:
	* src/gth-browser.c:
	* src/gth-application.c:
	* src/gth-window.c:
	* src/dlg-photo-importer.c:
	* src/main.c (prepare_app):

	Pass local paths to gphoto, and fixed bug that prevented
	importing photos when an instance of gthumb was already running.

2006-03-05  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.7.4 released ]

	* NEWS:
	* configure.in: updated for 2.7.4

	* src/main.c (initialize_data):

	Fixed bug #325833 – gthumb icon isn't on window title bar and windo
	list applet.

	* libgthumb/file-utils.c (path_list_find_path, xfer_file):
	* libgthumb/gth-file-list.c (gth_file_list_pos_from_path):
	* libgthumb/gth-file-view-list.c (gth_file_view_list_new):
	* libgthumb/gth-file-view-thumbs.c (comp_func_path):
	* libgthumb/catalog.c (catalog_remove_item):
	* src/gth-browser.c (gth_browser_load_image):
	* src/gth-fullscreen.c (monitor_file_renamed_cb):
	* src/gth-location.c (update_uri):
	* src/gthumb-preloader.c (gthumb_preloader_get_loader):
	* src/gth-viewer.c (monitor_file_renamed_cb):
	* libgthumb/bookmarks.c (get_link_from_path):
	* src/gth-browser-actions-callbacks.c (folder_copy__response_cb)
	(rename_file, folder_rename):
	* src/dlg-file-utils.c (my_list_remove, copy_current_file):
	* src/dlg-duplicates.c (check_image):
	* src/dlg-convert.c (save_image_and_remove_original):
	* src/catalog-list.c (catalog_list_get_iter_from_path)
	(catalog_list_refresh):

	use same_uri instead of strcmp to campare uris.

	* libgthumb/file-utils.h:
	* libgthumb/file-utils.c (same_uri):
	* src/gth-batch-op.c (pixbuf_op_done_cb, load_current_image):

	Fixed bug #326844 – Scale Series: Prevent rename .jpg to .jpeg

	* src/rotation-utils.c (update_orientation_field): updated all
	orientation fields.

	Fixes bug #333102 – Image rotation action does not update the EXIF tag
	correctly

2006-03-01  Daniel Nylander  <po@danielnylander.se>

	* po/sv.po: Updated Swedish translation.

2006-02-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dir-list.c (dir_list_update_underline):
	* src/catalog-list.c (catalog_list_update_click_policy):

	Fixed bug #331714 - crash in Preferences Browser

2006-02-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (create_toolbar_window): use the same screen of
	the image viewer.

	Fixes bug #327245 - Full screen mode crippled if Xinerama is used

	* configure.in: Post release version bump.

	* libgthumb/search.c (search_util_get_file_patterns)
	(search_util_get_patterns):
	* src/dlg-search.c (pattern_matched_by_keywords):
	* libgthumb/Makefile.am (libgthumb_la_SOURCES):
	* libgthumb/utf8-fnmatch.[ch]: removed files.
	* libgthumb/glib-utils.c (_g_utf8_strstrip): fixed implemetation.

	Fixes bug #313827 – Search does not work on categories with colon
	symbol and similar names.

	* src/catalog-web-exporter.c (export__save_other_files):
	* src/gth-browser.c (window_update_image_info):
	* src/gth-viewer.c (viewer_update_image_info):
	* libgthumb/pixbuf-utils.c (_gdk_pixbuf_savev):

	Convert uri to local path before saving exif data or jpeg images.
	Fixes bugs #331658, #327263 and #327262

2006-02-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.7.3 released ]

	* configure.in:
	* NEWS: updated for 2.7.3.

	* libgthumb/thumb-loader.h:
	* libgthumb/thumb-loader.c:

	Fixed bug #329889 - thumbnail generation and accentuated characters
	in path.

2006-02-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.h (get_mime_type):
	* libgthumb/file-utils.c (get_mime_type): new function
	* src/gth-exif-data-viewer.c (update_file_info):
	* src/dlg-image-prop.c (update_general_info):
	* src/dlg-open-with.c (dlg_open_with):
	* src/gth-viewer.c (viewer_update_open_with_menu):
	* libgthumb/file-utils.c (file_is_image):

	Fixed bug #329139 - Doesn't determine image type from content anymore

	* libgthumb/gth-file-list.c (gth_file_list_pos_from_path)
	(gth_file_list_get_all_from_view):

	Fixed memleaks found by Søren Wedel Nielsen (#166275)

	* src/dlg-crop.c (dlg_crop): fit and focus image at startup.

	* src/gth-image-selector.h:
	* src/gth-image-selector.c:
	* src/dlg-crop.c:
	* libgthumb/image-viewer.c:
	* data/glade/gthumb_crop.glade:

	misc fixes.

2006-02-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-image-selector.h:
	* src/gth-image-selector.c:
	* src/dlg-crop.c (selection_x_value_changed_cb)
	(selection_y_value_changed_cb):
	* libgthumb/gth-iviewer.h (double): fixed virtual functions signature.

	more changes to the crop dialog.

2006-02-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-iviewer.c: new file
	* libgthumb/gth-iviewer.h: new file
	* libgthumb/gth-nav-window.c: new file
	* libgthumb/gth-nav-window.h: new file
	* libgthumb/icons/nav_button.xpm: new file
	* src/icons/Makefile.am (EXTRA_DIST):
	* src/gth-viewer.c:
	* src/gth-image-selector.h (struct _GthImageSelectorClass):
	* src/gth-image-selector.c:
	* src/gth-browser.c:
	* src/dlg-crop.c:
	* libgthumb/icons/Makefile.am (pixbufs.h):
	* libgthumb/nav-window.h:
	* libgthumb/nav-window.c:
	* libgthumb/image-viewer.h:
	* libgthumb/image-viewer.c:
	* libgthumb/Makefile.am (HEADER_FILES):
	* data/glade/gthumb_crop.glade: first step to improve the crop
	dialog.

	* src/gth-browser-actions-callbacks.c: use CATALOG_PERMISSIONS instead
	of 0660

	* libgthumb/dlg-save-image.h:
	* libgthumb/dlg-save-image.c (dlg_save_image_as): use set uri instead
	of set_filename

2006-02-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-actions-callbacks.c (gth_browser_activate_action_edit_current_catalog_new): use 0600 as catalog permissions.

	* libgthumb/catalog.c (catalog_write_to_disk):
	* libgthumb/bookmarks.c (bookmarks_write_to_disk): use gnome_vfs_create
	instead of gnome_vfs_open

	Fixes bug #329600 – Deleting the Catalogue Search\ Results causes
	erroneous behaviour.

2006-01-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/gthumb.desktop.in (Categories): added GNOME;GTK;

	Fixes bug #328010 - Add GNOME or GTK categories o the .desktop file

	* src/rotation-utils.c (apply_transformation_jpeg):

	Fixed bug #327049 – Fix build with gcc 2.95
	Patch by Jens Granseuer

	* src/gth-browser.c (go_to_uri, gth_browser_construct): do not
	attempt to open a NULL uri.

	* src/Makefile.am (gthumb_LDADD): include GPHOTO_LIBS

	* libgthumb/thumb-loader.c (thumb_loader): fix compiler warning.

	* libgthumb/pixbuf-utils.c: include stdlib.h

	* configure.in (HAVE_PROGRESSIVE_JPEG, HAVE_LIBEXIF): fixed.

	* src/gth-exif-utils.h:
	* src/gth-exif-data-viewer.c:
	* src/dlg-jpegtran.c:

	Fixed bug #325846 - gthumb refuses to compile with libexif-0.6.13.
	Patch by Raffaele Sandrini

2006-01-14  Chao-Hsiung Liao  <j_h_liau@yahoo.com.tw>

	* configure.in: Add "zh_HK" to ALL_LINGUAS.

2006-01-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/Makefile.am (gthumb_LDADD, INCLUDES):
	* configure.in: added ability to enable/disable many features.
	Patch by Saleem Abdulrasool <compnerd (at) gentoo (dot) org>

2006-01-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-open-with.c (dlg_open_with): do not include gthumb itself
	in the applications list.

	Fixes bug #307959 - "Open With..." dialog offers gthumb as an option.

	* src/gth-viewer-ui.h:
	* src/gth-viewer.c (viewer_update_open_with_menu): added the "Go to the
	image folder" command at the end of the "open with" popup menu.

2006-01-05  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (ctx_progress_start_func)
	(ctx_error_func, ctx_status_func, ctx_message_func):
	* src/gth-exif-data-viewer.c (update_exif_data):

	Fixed bug #324017 - failed to initialize Canon powerShot G5 due an GTK
	bug.  Patch by Frederic Crozat.


	* libgthumb/pixbuf-utils.c (_gdk_pixbuf_save_as_jpeg): set default
	quality	to 85.

	Fixes buf #325211 - Image quality in web album.

2006-01-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (viewer_key_press_cb): block event propagation
	by default, as suggested in #325308
	(viewer_key_press_cb): removed Left/Right as navigation shortcuts
	because	they are used to scroll the image horizontally.

	Fixes bug #325308 - gThumb crash when reaching the end of a directory
	during fullscreen viewing.

	* src/gth-browser.c (go_to_directory_continue):

	Fixed bug #325507 - gthumb crashes if startup_location gconf pref is
	invalid.

	[ gthumb 2.7.2 released ]

2006-01-01  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes: removed BlueStripes, added Flicker theme.

	* src/gth-exif-utils.h:
	* src/gth-exif-utils.c:
	* src/gth-exif-data-viewer.c (update_exif_data): convert the uri to
	a local path before loading the file.

	* src/catalog-web-exporter.c (gth_parsed_doc_print): use &nbsp; instead
	of a space.

	* libgthumb/gnome-print-font-picker.c (gnome_print_font_picker_get_font_name):
	* libgthumb/gnome-print-font-dialog.c (gfsd_modify_preview_phrase):
	fix compiler warnings.

	* data/albumthemes/Makefile.am (SUBDIRS):
	* configure.in:

	* libgthumb/file-utils.c (get_temp_dir_name):
	* src/dlg-catalog.c (new_dir_cb):
	* src/dlg-web-exporter.c (ensure_local_theme_dir_exists):
	* src/gth-browser-actions-callbacks.c (create_new_folder_or_library):

	s/mkdir/dir_make/g

2005-12-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-image-list.c (get_drop_target_at):
	add the vertical and horizontal adjustment when
	calculating the target position.

	* libgthumb/catalog.c (catalog_load_from_disk__common):
	* libgthumb/bookmarks.c (bookmarks_load_from_disk):
	* libgthumb/file-utils.h:
	* libgthumb/file-utils.c (_gnome_vfs_read_line):

	keep reading the file until a new line character is found.
	use the third argument to define the buffer size.

	* NEWS: updated for 2.7.2

	* src/gth-location.c (update_drives):
	* src/gth-browser.c (window_update_title):
	* src/bookmark-list.c:
	* libgthumb/typedefs.h:
	* libgthumb/file-utils.h:
	* libgthumb/file-utils.c:
	* libgthumb/catalog.h:
	* libgthumb/catalog.c:
	* libgthumb/bookmarks.c:

	moved some functions to	file-utils.c.  Make the window title
	consistent with the bookmark list.

2005-12-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/bookmarks.c (bookmarks_write_to_disk)
	(bookmarks_load_from_disk):
	* libgthumb/file-utils.c (checksum_simple): implemeted using gnome_vfs.

	* src/gth-browser.c (make_url_list):
	* libgthumb/file-utils.c:
	* libgthumb/catalog.h:
	* libgthumb/catalog.c: save catalogs using gnome_vfs

	* data/albumthemes/text.h: added Previous, Next, Index.

	* data/albumthemes/Wiki/image.gthtml:
	* data/albumthemes/Wiki/index.gthtml:
	* data/albumthemes/Wiki/style.css:
	* data/albumthemes/Wiki/layout.css:
	* data/albumthemes/Wiki/Makefile.am (theme_DATA): removed images and
	javascript code.

	* src/gth-fullscreen.c (preloader_requested_error_cb): fire
	image_loaded signal after an error.

	* src/gth-window-actions-callbacks.c (set_wallpaper): set wallpaper as
	local path.

	* src/dlg-open-with.c (open_cb): use
	gnome_vfs_mime_application_get_exec.

	* src/dir-list.c (dir_list_refresh_continue):

	* src/main.c:
	* src/gth-browser.c:
	* src/Makefile.am (gthumb_SOURCES): removed auto-completion.[ch]

	* libgthumb/file-utils.h:
	* libgthumb/file-utils.c: rearranged the code.

	* libgthumb/comments.c (load_comment_from_iptc)
	(remove_comments_done): removed unused functions.  deal with iptc only
	supporting local files.

	* src/gth-browser-actions-callbacks.c (catalog_rename):
	* src/dlg-file-utils.c (dlg_file_rename_series): use gnome_vfs_move
	instead of rename

	* configure.in: set version to 2.7.2

	* libgthumb/print-callbacks.c: use UCHAR macro.

	* libgthumb/catalog.c: use gnome_vfs to read catalogs.

	* src/gth-location.c (gth_location_set_catalog_uri):
	* src/gth-browser.c (go_to_uri):
	* src/gth-browser-actions-callbacks.c (gth_browser_activate_action_bookmarks_add):
	* libgthumb/file-utils.c (remove_special_dirs_from_path):
	* libgthumb/bookmarks.c (bookmarks_utils__get_menu_item_name): handle
	file:// uri correctly.

2005-12-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-location.c: added drives to the list.

	* src/rotation-utils.c (update_rotation_from_exif_data):
	* src/main.c (save_session):
	* src/gth-folder-selection-dialog.c (list_view_button_press_cb):
	* src/gth-browser.c (go_to_uri):
	* src/gth-browser-actions-callbacks.c (gth_browser_activate_action_file_new_window):
	* src/dlg-preferences.c (dlg_preferences): use the new functions.

	* src/gth-monitor.c (directory_changed):
	* libgthumb/preferences.h:
	* libgthumb/preferences.c: remove obsolete functions.

	* libgthumb/jpeg-utils.c (do_load_internal):

	* libgthumb/gth-file-list.c (add_list__get_file_info_done_cb): do not hide
	the toplevel method.

	* libgthumb/glib-utils.h:
	* libgthumb/glib-utils.c (str_ends_with): new function

	* libgthumb/file-utils.h:
	* libgthumb/file-utils.c (get_file_path_from_uri)
	(get_search_path_from_uri, remove_scheme_from_uri, uri_scheme_is_file)
	(uri_scheme_is_catalog, uri_scheme_is_search, get_uri_from_path)
	(get_uri_display_name): new functions.

	* src/gth-viewer.c (save_jpeg_data):
	* src/dlg-open-with.c (dlg_open_with):
	* libgthumb/print-callbacks.c:
	* libgthumb/comments.c: fixed compiler warnings.

	* libgthumb/bookmarks.c (bookmarks_utils__get_menu_item_name):
	use Home as display name for the user home folder, and 'File System' for /

2005-12-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (fade_faded_cb): reset use_fade only after
	the fade in.

	* doc/C/gthumb.xml: updated.

	* src/gth-fullscreen.c (viewer_key_press_cb): use p to pause/resume a
	slideshow.

	* src/gth-browser.c (key_press_cb): remove p as prev image shortcut.

	* src/gs-fade.c:
	* src/gs-fade.h: new files.
	* configure.in:
	* src/gth-fullscreen.c:

	Fixed bug #312116 – crossfading in slideshow mode.

2005-12-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-location.c (gth_location_set_bookmarks): remove the separator
	when there is no bookmark.

	* libgthumb/bookmarks.c (bookmarks_remove): free the data before freeing
	the list it belongs to.

	* libgthumb/dlg-save-image.c (file_save_ok_cb):
	(dlg_save_image): use gnome_vfs_get_file_mime_type to get the mime type.

2005-12-24  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/catalog-web-exporter.c (get_image_filename):

	Fixed bug #301726 – "Create Web Album" does not use relative
	paths for images.

	* src/gth-fullscreen.c (viewer_key_press_cb):

	Fixed bug #310649 – Next/prev keyboard shortcuts in slides mode
	shouldn't block

	* doc/C/gthumb.xml: update keyboard shortcuts

	* src/rotation-utils.h:
	* src/rotation-utils.c:
	* src/dlg-photo-importer.c (adjust_orientation__step):
	* src/gth-fullscreen.c (monitor_update_files_cb):

	allow to rotate images in fullscreen mode.

2005-12-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (key_press_cb):
	* src/gth-fullscreen.c (viewer_key_press_cb):
	* src/gth-viewer.c (viewer_key_press_cb): use [ ] to do lossless
	rotation. r e to rotate the image without saving.

	Fixes bug #319467 – Add keyboard shortcut to Lossless JPEG rotation.

	* src/gth-browser.c (gth_browser_notify_files_created): check
	parent_dir before using it.

	* src/gth-batch-op.c:
	* data/glade/gthumb_tools.glade:
	* data/gthumb.schemas.in:
	* libgthumb/preferences.h (PREF_SCALE_SERIES_WIDTH):
	* src/dlg-scale-series.c (dlg_scale_series):

	save/restore width and height.  Added ability to select the image type.

	* src/dlg-photo-importer.c (main_dialog_set_sensitive)
	(dlg_photo_importer):

	Fixed bug #323872 – Import button should be greyed out while importing

	* src/gth-browser.c (key_press_cb): added page_down as next image
	shortcut.

	* src/gth-fullscreen.c (viewer_key_press_cb): added rotate/flip/mirror
	commands.

	Fixes bug #324812 – rotating images not working in gthumb fullscreen
	mode.

2005-12-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-actions-callbacks.c (gth_browser_activate_action_go_location):
	added file chooser title.

	* src/gth-location.c:
	* src/gth-browser-actions-callbacks.c (gth_browser_activate_action_go_location):
	implemented.

	* src/bookmark-list.h:
	* src/bookmark-list.c (bookmark_list_set):
	* src/dlg-bookmarks.c (dlg_edit_bookmarks):
	* src/gth-folder-selection-dialog.c (gth_folder_selection_construct):

	Use the menu icons in the bookmarks dialog only, use the mime icons
	otherwise.

2005-12-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-location.c (gth_location_set_catalog_uri):
	* src/gth-browser.c (go_to_uri): fix catalog handling.

	* src/dlg-open-with.c (open_cb): use gnome_vfs_mime_application_get_exec
	instead of app->command.

	* src/main.h (get_icon_for_uri):
	* src/main.c (get_fs_icon, get_stock_id_for_uri): new functions.
	* src/gth-location.c (update_uri):
	* src/gth-browser.c (add_bookmark_menu_item):
	* src/bookmark-list.c (bookmark_list_set): use get_stock_id_for_uri.

	* libgthumb/gtk-utils.c (create_pixbuf): check icon_theme value.

2005-12-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/bookmarks.c (bookmarks_utils__get_menu_item_name):
	show the home folder as USER instead of /home/USER

	* src/gth-location.c:
	* src/gth-location.c: new files
	* src/gth-browser.c:
	* src/gth-browser-ui.c:
	* src/main.c (get_stock_id_for_uri):
	* src/main.h (get_stock_id_for_uri): new function.

	Removed the location entry.  Use gth_location, which is a specialized
	combobox with the parent folders list and bookmarks.

2005-12-05  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/rotation-utils.c (apply_transformation_jpeg):

	Fixed bug #318828: Exif Orientation Tag Incorrectly Updated.
	Patch by Pat Suwalski.

	* libgthumb/gthumb-stock.h (GTHUMB_STOCK_SHOW_IMAGE):
	* libgthumb/gthumb-stock.c:
	* src/gth-fullscreen-actions-entries.h (G_N_ELEMENTS):
	* src/gth-browser-actions-entries.h:

	Removed custom stock icon when a gtk stock icon is suitable.

	* src/gth-browser.c (reorder_current_catalog):

	Fixed catalog reordering when the viewed list is not equal to the
	catalog	list.

	* src/main.h:
	* src/main.c (all_windows_notify_catalog_reordered): new function

	notify the catalog reordering and update the view if the window is
	showing	that catalog.

2005-12-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (viewer_drag_data_received): init gerror to NULL

2005-11-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (image_is_gif__accurate):
	* libgthumb/image-loader.c (load_image_thread): use a more accurate
	method to check whether an image is a gif animation.

2005-11-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/gthumb.desktop.in (_GenericName): added generic name.

	Fixed bug #322158: please add a generic name to the desktop file

2005-11-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer-actions-entries.h:

	Fixed bug #321924: "Sigle Window" is a typo

2005-11-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/icons/film-16.png: new icon.

	* libgthumb/cursors/void-mask.xbm (void_mask_bits):
	* libgthumb/cursors/void-data.xbm (void_data_bits):

	use char[] inseted of unsigned char[] to avoid a warning.

	* libgthumb/nav-window.c (nav_window_new): draw the thumbnail
	during the expose event of the preview.

	* src/dlg-jpegtran.c (apply_transformation_to_all):
	call dialog_data_free only when the main dialog is not
	used.

2005-11-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/rotation-utils.c:
	* src/rotation-utils.h: new files

	* src/dlg-photo-importer.c:
	* src/dlg-jpegtran.c:
	* src/Makefile.am:
	* libgthumb/preferences.h:
	* data/glade/gthumb_camera.glade:
	* data/gthumb.schemas.in:

	Adjust photo orientation on import.  Patch by Andriy Kulchytskyy.

2005-11-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (save_jpeg_data): check whether the image is jpeg
	before saving the jpeg data.

	* components/image-viewer/Makefile.am (GNOME_GThumb_Viewer.xml):
	* components/catalog-view/Makefile.am (GNOME_GThumb_CatalogView.server.in)
	(GNOME_GThumb_CatalogView.xml):

	Fixed bug #321500: Makefile.am in components/catalog-view is broken

2005-11-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (load_timeout_cb): no need to fire a warning
	when pos == -1.
	(window_set_sidebar): simplified.

	* data/glade/gthumb_edit.glade:
	* data/glade/gthumb_tools.glade:
	* src/dlg-scale-image.c (ok_cb):
	* libgthumb/async-pixbuf-ops.c (scale_step):

	Do not allow to scale images to 1x1, to avoid bug in
	gdk_pixbuf_scale_simple.
	Fixes bug #305165: gthumb crash resize.

	* src/dlg-preferences.c (view_as_cb): change view after a delay to
	avoid crashes when the user changes the view type too quickly (#305097).

	* configure.in:
	* data/Makefile.am:

	Removed custom --disable-schemas-install option.
	Fixes bug #321124: Confusing handling of --disable-schemas-install

	* data/albumthemes/BlueStripes/thumbnail.gthtml:
	* data/albumthemes/BlueStripes/image.gthtml:
	* data/albumthemes/Classic/thumbnail.gthtml:
	* data/albumthemes/Classic/image.gthtml:
	* data/albumthemes/ClassicClips/thumbnail.gthtml:
	* data/albumthemes/ClassicClips/image.gthtml:
	* data/albumthemes/NeatRound/thumbnail.gthtml:
	* data/albumthemes/NeatRound/image.gthtml:
	* data/albumthemes/Wiki/thumbnail.gthtml:
	* data/albumthemes/Wiki/image.gthtml:

	Convert the filename to utf8.
	Fixes bug #320947: Create Web Album Tool doesn't generate HTML pages
	with International characters.

	* libgthumb/print-callbacks.c (_log2): rename log2 as _log2

	Fixes bug #321274: Incorrect log2 definition/detection.

2005-11-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.7.1 released ]

	* src/Makefile.am (EXTRA_DIST): fixed
	* data/Makefile.am (EXTRA_DIST): fixed

2005-11-05  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (gth_fullscreen_pause_slideshow): continue
	the slideshow when pause is false.

2005-11-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (get_next_image, get_prev_image):

	Fixed bug #320442: prev/next button behaviour in 2.7.1

2005-10-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (get_prev_image, get_next_image): continue
	from the first image if the slideshow didn't start from the beginning.

	* libgthumb/file-utils.c (ensure_dir_exists): dir_make returns
	FALSE on error.

2005-10-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* NEWS: updated for 2.7.1

	* src/gth-viewer-actions-entries.h: use "Go to the Image Folder" instead
	of "Open Folder".

	* src/gth-fullscreen.c (gth_fullscreen_pause_slideshow): do not load
	the next image just after the user presses the pause button, simply
	wait for the slideshow timeout to expire instead.

2005-10-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-open-with.c: added the application icon to list.

	* src/gth-viewer.c:
	* src/gth-viewer-ui.h: use a menu tool button for the 'open with'
	action on the toolbar, with the associated applications as menu
	items.

	* libgthumb/gtk-utils.h:
	* libgthumb/gtk-utils.c: new functions: create_pixbuf, create_image.

2005-10-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/main.c (prepare_app):
	* src/gth-viewer.h:
	* src/gth-viewer.c:
	* src/gth-viewer-ui.h:
	* src/gth-viewer-actions-entries.h (G_N_ELEMENTS):
	* src/gth-viewer-actions-callbacks.h (DEFINE_ACTION):
	* src/gth-viewer-actions-callbacks.c (gth_viewer_activate_action_go_refresh):
	* src/gth-browser-actions-callbacks.c (gth_browser_activate_action_file_view_image):
	* src/gth-application.c (impl_gth_application_load_image):
	* src/GNOME_GThumb.idl:
	* libgthumb/preferences.h (PREF_SINGLE_WINDOW):
	* data/gthumb.schemas.in:

	Added ability to reuse an already opened viewer window.

2005-10-16  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer.c (save_pixbuf__image_saved_cb): reload the
	saved image instead of opening a new window.

2005-10-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen-actions-entries.h: use the stock label for
	the pause action.

	* src/gth-fullscreen-ui.h: moved "view comment" to the end.
	* src/gth-fullscreen.c: update toolbar actions sensibility.

2005-10-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-window-actions-entries.h: added a conditional
	inclusion.
	* src/gth-fullscreen-actions-callbacks.c:
	* src/gth-fullscreen-ui.h:
	* src/gth-fullscreen-actions-entries.h:
	* src/gth-fullscreen.c:
	* src/gth-fullscreen.h:

	Use the ui manager to create the fullscreen toolbar.  Added zoom
	controls to the toolbar.

2005-10-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/main.c (initialize_data):

	Removed a FIXME.

	* src/dlg-web-exporter.c:
	* src/dlg-rename-series.c:
	* src/dlg-png-exporter.c:
	* src/catalog-web-exporter.c (comp_func_none):
	* libgthumb/preferences.c:
	* data/glade/gthumb_web_exporter.glade:
	* data/glade/gthumb_tools.glade:
	* data/glade/gthumb_png_exporter.glade:

	Allow to use the manual order in the "web exporter", "png exporter" and
	"rename series" tools, if available.

2005-10-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* Makefile.am (EXTRA_DIST):
	* MAINTAINERS: new file

2005-10-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (sidebar_list_key_press):

	Fixes bug #317623: [PATCH] Enter a directory or a catalog with the
	ENTER key.
	Patch by Nelson Benitez.

2005-10-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (reorder_current_catalog):
	* libgthumb/gth-file-view.h:
	* libgthumb/gth-file-view.c:
	* libgthumb/gth-file-view-list.c: do not set the drag source here.
	Implemented drag&drop functions.
	* libgthumb/gth-file-list.h:
	* libgthumb/gth-file-list.c (gth_file_list_init): added a drag_source
	property.

	Added ability to manually reorder images in the file list view.
	Closes #130063.

	* libgthumb/image-viewer.c (image_viewer_scroll_event):

	Fixes bug #317628: [PATCH] Zoom in/out with CTRL + scrollwheel
	Patch by Nelson Benitez.

2005-09-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/comments.c (save_comment_iptc):
	Indicates the text encoding (UTF-8) in the IPTC data.  Adds the
	requisite version number dataset to the IPTC data to make it a more
	standards-compliant application.  Sorts the datasets before saving to
	stay organized.

	* configure.in: requires libiptcdata >= 0.2.1

	Patch by David Moore.

2005-09-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c (update_file_info): added image
	type.

2005-09-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-catalog.c:
	* src/catalog-list.h:
	* src/catalog-list.c:

	Do not show the catalogs when choosing a destination folder.

	* src/gth-browser.h:
	* src/gth-browser.c:
	* libgthumb/typedefs.h:
	* libgthumb/gth-image-list.h:
	* libgthumb/gth-image-list.c:
	* libgthumb/gth-file-view.h:
	* libgthumb/gth-file-view.c:
	* libgthumb/gth-file-view-thumbs.c:
	* libgthumb/gth-file-list.h:
	* libgthumb/gth-file-list.c:
	* libgthumb/glib-utils.h:
	* libgthumb/glib-utils.c:
	* libgthumb/catalog.h:
	* libgthumb/catalog.c:
	* components/catalog-view/catalog-nautilus-view.c:

	Added ability to manually reorder images in a catalog (#130063).

2005-09-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (window_update_sensitivity):

	Update the 'scale images' command sensitivity; update the menu when
	a new catalog is selected.

	* src/gth-browser-ui.h:
	* src/gth-browser-actions-entries.h:
	* src/gth-browser-actions-callbacks.h:
	* src/gth-browser-actions-callbacks.c:

	Added 'open' and 'open in new window' in the catalog list context menu.

	* src/dlg-crop.c (ok_cb):

	Print debug info only if DEBUG is defined.

	* src/dlg-catalog.c:
	* src/catalog-list.h:
	* src/catalog-list.c:
	* libgthumb/preferences.h (PREF_ADD_TO_CATALOG_VIEW):
	* data/glade/gthumb.glade:
	* data/gthumb.schemas.in:

	Added ability to view the destination catalog after adding the images
	to a catalog, and remember the user choice.

	* data/glade/gthumb_preferences.glade:

	Moved the filechooser button on the same row of the option label.

2005-09-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (gth_browser_get_current_directory):

	Always return a non-NULL value.

	* src/dlg-search.c (dlg_search_ui):
	* src/dlg-duplicates.c (dlg_duplicates):
	* src/dlg-png-exporter.c (dlg_exporter):
	* src/dlg-preferences.c (set_to_current_cb):

	Do not check whether the current direcotry is NULL

	* src/gth-browser.c (dir_list_key_press_cb):

	Fixes bug #316952: [PATCH] bind DELETE key to move a folder to trash
	in directory list.  Patch by Nelson Benitez.

2005-09-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-scale-series.c:
	* src/dlg-scale-series.h:
	* src/gth-batch-op.c:
	* src/gth-batch-op.h: new files
	* src/gth-window-actions-entries.h:
	* src/gth-window-actions-callbacks.h (DEFINE_ACTION):
	* src/gth-window-actions-callbacks.c:
	* src/gth-browser-ui.h:
	* src/Makefile.am (gthumb_SOURCES):
	* po/POTFILES.in:
	* libgthumb/gth-pixbuf-op.h:
	* libgthumb/gth-pixbuf-op.c:
	* libgthumb/async-pixbuf-ops.h (_gdk_pixbuf_scale):
	* libgthumb/async-pixbuf-ops.c:
	* data/glade/gthumb_tools.glade:

	Added 'scale series' tool.

	* data/albumthemes/*:

	Removed Clean and NeatSquare.  Added Wiki.  Changed all themes preview
	image.  Removed preview image from NeatRound, BlueStripes, Classic and
	ClassicClips.

2005-09-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: added maker_note tag

	Fixes bug #316665: "MakerNotes" info from EXIF header is not present

2005-09-16  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer.c (save_pixbuf__image_saved_cb): do
	not update the ui during the closing process.

2005-09-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* many files: use gnome_vfs_unlink instead of unlink. implements
	file_copy and file_move with gnome_vfs.
	Use gnome_vfs_remove_directory instead of rmdir.

	* src/gth-window-actions-callbacks.c (gth_window_activate_action_help_about): updated copyright year.

2005-09-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-pixbuf-op.c (one_step): interrupt the iteraction at
	the first step if the step_func is null.

2005-09-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser.c (window_update_sensitivity):

	Fixed bug #315356: Can't go to fullscreen view in 1 step when opening
	a folder from nautilus.

2005-09-08  Jürg Billeter  <j@bitron.ch>

	* src/dlg-file-utils.c: (dlg_files_move_to_trash): Fix crash when trying
	to delete files from a location where no trash is available.

2005-09-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-utils.h:
	* src/gth-exif-utils.c (have_exif_time):
	* src/dlg-comment.c (dlg_comment_update):

	Fixed bug #315003: Unable to set Date value in Comment dialog for
	JFIF 1.01 images.

2005-08-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/comments.h:
	* libgthumb/comments.c (comments_load_comment):
	* src/gth-browser.c (update_image_comment): update the comment in
	the file list when the comment changes.

	* src/gth-browser.c (gth_browser_stop_activity_mode): always reset
	activity_ref instead of decrementing it.

2005-08-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-categories.c (save_categories):
	* libgthumb/bookmarks.c (bookmarks_write_to_disk): Set no limit to
	the max number of categories.

	Patch by John Leach.

2005-08-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c (gth_exif_data_viewer_construct):
	use ellipses if the text doesn't fit.

	* src/dlg-preferences.c (apply_cb): removed double free.
	Patch by John Leach.

2005-08-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer.c (gth_viewer_init):
	* src/gth-fullscreen.c (gth_fullscreen_init):
	* src/gth-window.c (gth_window_set_property)
	(gth_window_get_property):
	* src/dlg-comment.c (save_clicked_cb): close the categories dialog
	and the comment dialog after saving when in fullscreen mode or in
	single image mode.

	* src/dlg-categories.c (keyword_equal_func):
	(ok_clicked_cb): added keyword search in the categories list.

	Patch by John Leach.

2005-08-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-ui.h: put Fullscreen before Slideshow.

	* src/gth-browser-actions-entries.h: F12 starts the slideshow.

	* src/gth-window-actions-entries.h: F4 associated with Revert.

	* src/gth-fullscreen.c (load_next_image, load_prev_image):
	make the code more clear.

	* src/main.c (folder_is_film):
	* src/gth-viewer.c (update_image_comment):
	* src/gth-fullscreen.c (show_comment_on_image):

	* src/gth-browser.c (update_image_comment):
	* src/gth-browser-actions-callbacks.c (edit_current_folder_categories__done):
	* src/dlg-search.c (load_parents_comments):
	* src/dlg-preferences.c (dlg_preferences):
	* src/dlg-photo-importer.c (add_categories_to_image):
	* src/dlg-image-prop.c (update_comment):
	* src/dlg-change-date.c (ok_clicked):
	* src/dlg-categories.c (dlg_categories__save):
	* src/catalog-web-exporter.c (image_data_new):
	* src/catalog-png-exporter.c (image_data_new):
	* libgthumb/print-callbacks.c (image_loader_done_cb):
	* libgthumb/gth-file-list.c (add_list_in_chunks):
	* libgthumb/file-data.c (file_data_update_comment):

	Read the .comments DB when loading a folder and when searching for
	images, this is a workaround for the performance issues we get when
	using the embedded comments for these operations.
	Give priority to the embedded comment for all other operations
	updating the .comments DB if the embedded comment is different.

	* libgthumb/comments.h:
	* libgthumb/comments.c (comment_data_equal, save_comment)
	(comments_load_comment):  Consider the image comment more up-to-date
	then the .comments comment and update it.  Added try_embedded param to
	comments_load_comment.

	* libgthumb/nav-window.c (nav_window_new): fixed comment.

	* libgthumb/gth-pixbuf-op.c (one_step): removed unused variable ofs

2005-08-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-comment.c:
	* libgthumb/glib-utils.c (strcmp_null_tollerant):
	moves strcmp_null_tollerant in glib-utils.c

	* libgthumb/comments.c (save_comment): always save the comment in
	the .comments subfolder even if libiptcdata is available.

2005-08-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (load_next_image, load_prev_image): Exit
	from the fullscreen mode when the slideshow ends.

	* src/gth-fullscreen.c (shift_current_image_to_head): new function.
	Start the slideshow from the current image.

	Fixes bug #310929: should start slideshow from the selected image.

	* src/gth-browser.c (fullscreen_destroy_cb): set the last
	viewed image in fullscreen mode as the current image.

2005-08-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dir-list.c (dir_list_refresh_continue):
	* src/catalog-list.c (catalog_list_refresh): Restore the ..
	item to allow moving images with DnD.  Use the default icon
	instead of GTK_STOCK_UP.

	* data/glade/gthumb_tools.glade:
	* src/dlg-change-date.c (ok_clicked):

	Fixes bug #138265: Feature Request - Add time offset to the Change Date
	tool.
	Allow to change the comment date as well.

2005-08-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/comments.c (delete_comment_iptc, save_comment_iptc):
	do not change the mtime when saving a comment.

	* src/gth-browser.c (monitor_update_icon_theme_cb): removed a
	wrong argument.

2005-08-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dir-list.c (dir_list_refresh_continue): removed the
	go up entry, no more needed thanks to the navitagion toolbar.

	* src/gth-browser-ui.h:
	* src/gth-browser.c (gth_browser_construct): added a navigation
	bar below the location entry.  Remove the navigation buttons
	from the main toolbar.  Added fullscreen button on the main toolbar.

	* libgthumb/image-viewer.c (image_viewer_size_allocate): emit a
	size_change signal when viewer->hadj->upper or viewer->vadj->upper
	change.

2005-08-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (viewer_key_press_cb): exit from fullscreen
	with ctrl-w

	Fixes bug #143999: Please allow control-w shortcut for quit in
	fullscreen mode or make a quit button in fullscreen mode

	* src/gth-viewer.c (gth_viewer_finalize): do not free the tooltips
	twice.

	* src/gth-browser.c (gth_browser_construct, close__step6):
	* src/gth-viewer.c (gth_viewer_finalize, gth_viewer_construct):
	* libgthumb/preferences.h (PREF_UI_COMMENT_PANE_SIZE):
	* data/gthumb.schemas.in: save and restore the comment pane size.

	* src/gth-browser.c (gth_browser_notify_files_changed): do not
	update the image from disk if it has been modified bu the user.

	* libgthumb/comments.c (comment_text_is_void): new function.

	* src/jpegutils/jpeg-data.h:
	* src/jpegutils/jpeg-data.c (jpeg_data_set_header_data): new function.
	* src/gth-browser.c:
	* src/gth-viewer.c:
	* src/Makefile.am:
	* libgthumb/comments.c:
	* components/catalog-view/Makefile.am:
	* components/image-viewer/Makefile.am:
	* configure.in:

	Applied patch by David Moore to store comments inside jpeg images.
	Uses the libiptcdata library.
	Fixes bug #136286.

	* src/dlg-preferences.c (dlg_preferences): hide the "show comments"
	option if using iptcdata.

	* libgthumb/gth-file-list.c (add_list_in_chunks): do not load comments
	if using iptcdata for scalability reasons.

	* src/dlg-scale-image.c (w_spinbutton_value_changed)
	(h_spinbutton_value_changed): Do not round the value when using
	the percentage.  Use floor(x+0.5) instead of round to avoid a
	compiler warning.

2005-08-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/main.c: include gth-browser-actions-callbacks.h to avoid
	a compiler warning.

	* src/gth-browser-actions-callbacks.c (duplicate_file): return
	FALSE if the condition does not hold.
	(duplicate_file): removed file_list because unused.

	* src/dlg-jpegtran.c: include <libgnomevfs/gnome-vfs-ops.h> to
	avoid a warning.

	* src/dir-list.c (add_columns): removed unused variable.

	* src/gth-browser.c (pref_click_policy_changed):
	* src/catalog-list.c (catalog_list_update_click_policy): renamed
	catalog_list_update_underline as catalog_list_update_click_policy.

	* configure.in: check the presents of the XTest library, used by
	totem-scrsaver.c

	* src/Makefile.am (gthumb_SOURCES):
	* src/totem-scrsaver.h:
	* src/totem-scrsaver.c: new files
	* src/gth-fullscreen.c: disable the screensaver when the slideshow
	is playing.

	Fixes bug #311364: make gthumb disable xscreensaver during slideshow

	* libgthumb/comments.c (_append_escaped_text_for_html): convert \n
	to <br/>

	Fixes bug #301163: Web Album: Line breaks in Comments are lost.
	Based on the patch by Alexander Skwar.

	* src/dlg-scale-image.c (h_spinbutton_value_changed)
	(w_spinbutton_value_changed): round to nearest integer when converting
	from double to int

	Fixes bug #312612: Resize bug.  Patch by whoops.

2005-08-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-actions-entries.h:

	Fixes bug #312374: Typo in translatable string

2005-07-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dir-list.h:
	* src/dir-list.c:
	* src/catalog-list.c:
	* src/catalog-list.h:

	Underline the item name only when the mouse is over it.

2005-07-21  Pawan Chitrakar  <pawan@nplinux.org>

	* configure.in: Added ne in ALL_LINGUAS

2005-07-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/icons/reduce-colors-16.png: added
	* libgthumb/icons/reduce-colors-24.png: reduced

2005-07-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-image-selector.c (PREVIEW_SIZE): use a bigger preview.
	(gth_image_selector_get_selection): cut selection if larger than
	the pixbuf image in order to always return a valid selection range.

2005-07-12  Theppitak Karoonboonyanan  <thep@linux.thai.net>

	* configure.in: Added "th" (Thai) to ALL_LINGUAS.

2005-07-03  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb.glade:
	* data/glade/gthumb_comments.glade:

	Fixed bug #171052: glade use more stock buttons.
	Patch by Alan Horkan.

	* src/gth-viewer.c (viewer_update_sensitivity):
	* src/gth-browser.c (window_update_sensitivity):

	Removed normalize contrast and stretch contrast commands.

	* libgthumb/typedefs.h: moved GthTransform here.
	* libgthumb/gthumb-module.c:
	* src/dlg-jpegtran.c (dlg_apply_jpegtran_from_exif)
	(dlg_apply_jpegtran):

	Added ability to rotate to left/right a series of images,
	or to auto-adjust the images orientation.

	* src/gth-fullscreen.c (monitor_update_metadata_cb)
	(update_current_image_link, delete_list_from_file_list)
	(monitor_update_files_cb, monitor_file_renamed_cb):

	Update the file list and the current image when files
	are updated or deleted.

	* libgthumb/gth-pixbuf-op.h:
	* libgthumb/gth-pixbuf-op.c:
	* libgthumb/async-pixbuf-ops.h (_gdk_pixbuf_dither):
	* libgthumb/async-pixbuf-ops.c (_gdk_pixbuf_dither):
	* src/gth-viewer-ui.h:
	* src/gth-browser-ui.h:
	* libgthumb/async-pixbuf-ops.c (_gdk_pixbuf_dither):
	(dither_step, shade_value, get_error_pixel):

	Added image dithering operations using the web palette or
	black and white.
	Removed normalize contrast and stretch contrast commands.

	* src/gth-browser-actions-entries.h:
	* src/gth-browser-actions-callbacks.h:
	* src/gth-browser-actions-callbacks.c (gth_browser_activate_action_edit_rename_file):
	* src/gth-browser.c (window_update_sensitivity):

	Fixed bug #171050: dont disable Rename when more than one file is
	selected.  Patch by Christian - Manny Calavera - Neumair.

2005-06-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-jpegtran.c (notify_file_changed): update the thumbnails soon
	if images are rotated one by one.

2005-06-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-window-actions-callbacks.c (get_wallpaper_filename):
	make the file hidden, starting the name with a dot.

	* src/gth-window.c (gth_window_set_image_pixbuf): clear
	the undo history after setting a new image.

	* src/dlg-change-date.c (ok_clicked): pass a path list to
	all_windows_notify_files_changed.

2005-06-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_camera.glade:

	Do not allow non local destinations.

	* src/gth-fullscreen.c (escape_filename):
	* src/gth-exif-data-viewer.c (update_file_info):
	* src/gth-browser.c (window_update_infobar):
	* src/gth-browser-actions-callbacks.c (rename_file):
	* src/dlg-web-exporter.c (add_theme_dir):
	* src/dlg-search.c (add_file_list):
	* src/dlg-rename-series.c (update_list):
	* src/dlg-photo-importer.c (get_mime_type_from_filename):
	* src/dlg-jpegtran.c (apply_transformation):
	* src/dlg-image-prop.c (update_general_info):
	* src/dlg-file-utils.c (dlg_check_folder):
	* src/dlg-duplicates.c (images_selection_changed_cb):
	* src/dlg-convert.c (load_current_image):
	* src/dir-list.c (dir_list_update_view):
	* src/catalog-png-exporter.c (set_item_caption):
	* src/catalog-list.c (catalog_list_refresh):
	* src/auto-completion.c (auto_compl_show_alternatives):
	* libgthumb/gtk-utils.c (_gtk_entry_set_filename_text):
	* libgthumb/dlg-save-image.c (__save_image):
	* libgthumb/catalog.c (delete_catalog_dir):

	Use g_filename_display_name/basename instead of g_filename_to_utf8.

2005-06-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-actions-entries.h:
	* src/gth-window-actions-entries.h:

	Added Tools_ChangeData to the viewer window too.

	* src/gth-window.c:
	* src/gth-window.h:
	* src/gth-viewer.c:
	* src/gth-viewer-ui.h:
	* src/gth-browser-ui.h:
	* src/gth-browser-actions-callbacks.c:
	* src/gth-window-actions-callbacks.h:
	* src/dlg-scale-image.c:
	* src/dlg-posterize.c:
	* src/dlg-hue-saturation.c:
	* src/dlg-crop.c:
	* src/dlg-color-balance.c:
	* src/dlg-brightness-contrast.c:

	Added undo/redo support.

2005-06-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/catalog-web-exporter.c: (save_resized_image_cb)
	(copy_exif_from_orig): new function
	(save_thumbnail_cb, save_image_preview_cb):

	Re-add the exif data to the resized images.

	Fixes bug #303544.  Patch by Emmanuel Touzery.

2005-06-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer.c (gth_viewer_construct): listen to the following
	monitor events: update_files, update_metadata, file_renamed.
	(monitor_update_files_cb): close the window if the image is deleted,
	reload the image if the file is changed.

	* src/gth-browser.c (gth_browser_update_current_image_metadata): update
	the poperties dialog too.

	* src/gth-window-actions-callbacks.c (gth_window_activate_action_edit_delete_comment): removed commented out code.

2005-06-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer-ui.h: removed comment and categories from
	the toolbar.

	* src/gth-fullscreen.c (gth_fullscreen_construct):

	Load the previous image on middle button click.

	* src/gth-window-actions-callbacks.c: removed unused function
	gth_window_activate_action_view_show_info

	* src/gth-browser.c: cleaned up; added static keyword to
	static functions.

2005-06-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-window-actions-callbacks.c (gth_window_activate_action_file_print):
	* src/gth-window-actions-callbacks.c (print_done_cb):
	* src/catalog-web-exporter.c (get_temp_dir_name): removed from here.
	* libgthumb/print-callbacks.c (print_catalog_dlg_full): new function

	Added ability to print a non-saved image.

	* src/gth-window-actions-callbacks.c (set_wallpaper_from_window):

	Added ability to set as wallpaper a non-saved image.

	* data/gthumb.schemas.in:
	* libgthumb/preferences.h (PREF_CHOOSE_DESTINATION_VIEW):
	* src/dlg-file-utils.c (file_copy_ask__continue)
	(file_move_ask__continue):
	* src/gth-folder-selection-dialog.c (gth_folder_selection_construct):

	Added a "View destination" option in the choose folder dialog.

	* libgthumb/file-utils.c (get_temp_file_name, get_temp_dir_name):
	new functions.


2005-06-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (get_prev_image, get_next_image):
	consider the direction to compute the next/prev element.

2005-06-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/main.h:
	* src/main.c: added session support.

	* src/gth-window.h:
	* src/gth-window.c: added  gth_window_get_window_list

	* src/gth-monitor.h:
	* src/gth-monitor.c: added the file system monitor.

	* src/gth-browser.h: removed unused functions.

	* src/gth-browser.c (gth_browser_notify_files_changed):
	reimplemented.
	(monitor_reload_catalogs_cb):
	(gth_browser_notify_update_directory):
	(gth_browser_construct):
	(gth_browser_add_monitor):
	(gth_browser_add_monitor): implemented functions.

	* src/gth-window-actions-callbacks.c (gth_window_activate_action_edit_delete_comment):
	* src/dlg-comment.c (save_clicked_cb):
	renamed all_windows_notify_update_comment as
	all_windows_notify_update_metadata.

	* src/gth-window-utils.c:
	* src/gth-window-utils.h:
	* libgthumb/gstringlist.c:
	* libgthumb/gstringlist.h:
	New files

	* src/gth-fullscreen.c (delete_current_image):
	remove the image from the catalog if the fullscreen started from a
	catalog view.
	(gth_fullscreen_set_catalog): function used to set the catalog.

	* src/gth-monitor.c:
	* src/gth-monitor.h:
	* src/main.c:
	* src/gth-browser.h:
	* src/gth-browser.c:
	* src/gth-browser-actions-callbacks.c:
	* src/dlg-catalog.c:
	* src/dlg-bookmarks.c:
	* src/Makefile.am (gthumb_SOURCES):
	Use a monitor object to notify file, directory and catalog changes.

	* libgthumb/typedefs.h: added GthMonitorEvent type.

	* libgthumb/gthumb-marshal.list: added new marshallers.

2005-06-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (create_toolbar_window): removed the frame.

2005-06-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer.c (image_loaded_cb): support for starting
	in fullscreen mode.

	* src/gth-window-actions-callbacks.c:
	* src/main.h: removed the fullscreen.h include.

	* src/fullscreen.c:
	* src/fullscreen.h: removed files.

	* src/gth-fullscreen.c (_show_cursor__hide_comment):
	automatically pause the slideshow when editing the comment
	or the categories.
	(update_sensitivity): update commands sensitivity.

	* src/gth-browser.c:
	(_set_fullscreen_or_slideshow): use only the selection if
	more than one image is selected.

	* src/gth-viewer.c:
	* src/gth-window.c: removed the delete_image virtual function.

	* libgthumb/gth-file-list.h:
	* libgthumb/gth-file-list.c (gth_file_list_get_all_from_view): new
	function.

	* data/glade/gthumb_preferences.glade:
	* libgthumb/preferences.h:
	* src/dlg-preferences.c: removed the fullscreen option for
	the slideshow, because now the slideshow is always in fullscreen
	mode.

	* src/gth-fullscreen.c: implemented the slideshow mode.

2005-06-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (gth_fullscreen_construct): added keyboard
	accellerators.

	* src/gth-window-actions-entries.h:
	* src/gth-browser-ui.h:
	* src/gth-viewer-ui.h:

	Fixed bug #302753: Gthumb does not support HIG zooming shortcuts.
	Patch by Jaap A. Haitsma

2005-06-05  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (create_toolbar_window): set border width to 0.

	* src/gth-toggle-button.c:
	* src/gth-toggle-button.h:
	* src/gtkorientationbox.c:
	* src/gtkorientationbox.h: removed unused files.

	* src/gth-fullscreen.h:
	* src/gth-fullscreen.c: started a new fullscreen implementation.

	* libgthumb/image-viewer.c (image_viewer_set_pixbuf): update the is_void
	flag.

	* libgthumb/file-utils.c (resolve_all_symlinks): add NULL as last param
	to g_strconcat (bug #306514).

2005-06-05  Ignacio Casal Quinteiro <icq@cvs.gnome.org>

	*configure.in: Added 'gl' to ALL_LINGUAS

2005-06-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-window.c:
	* src/gth-window-actions-callbacks.c (gth_window_activate_action_file_save_as):
	* src/gth-viewer.c (viewer_update_sensitivity):
	* src/gth-viewer-ui.h:
	* libgthumb/dlg-save-image.c (__save_image, dlg_save_image):

	Implemented the File_Save action.

	* data/Makefile.am (applications_DATA): remove gthumb-logo.png

	* src/gth-viewer.c (gth_viewer_construct): use BUTTON2 for the DnD,
	button 1 is used to scroll the image.

	* src/gth-viewer.c: added dnd support.
	(viewer_update_sensitivity): implemented.
	(viewer_key_press_cb): added keyboard shortcuts.
	(gth_viewer_load): ask whether to save the modified image before
	loading a new image.

	* src/gth-viewer-ui.h: added show/hide image comment.

	* src/gth-viewer-actions-entries.h: added reload action.

	* src/gth-viewer-actions-callbacks.c: implemented
	gth_viewer_activate_action_view_show_info

	* src/gth-browser.c (get_file_list_from_url_list):
	* libgthumb/glib-utils.h (get_file_list_from_url_list):
	* libgthumb/glib-utils.c (get_file_list_from_url_list):
	moved get_file_list_from_url_list to glib-utils.c.

2005-06-01  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer.c (gth_viewer_show): use idle_add instead on
	timeout_add for calling the first_time_idle function.  Give the focus
	to the viewer.

2005-05-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/main.c (open_browser_window):
	(open_viewer_window): use "" instead of NULL.

	* src/gth-application.c (impl_gth_application_open_viewer)
	(impl_gth_application_open_browser): translate "" back to NULL.

2005-05-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/Makefile.am ($(server_in_files): use TAB instead of 8 spaces.
	* src/gth-viewer-actions-callbacks.c: include gconf-utils.h

	* src/main.c:
	* src/gth-application.c:
	* src/gth-application.h:
	* src/Makefile.am:
	* data/Makefile.am:
	* components/image-viewer/Makefile.am:
	* components/catalog-view/Makefile.am:
	* configure.in:

	Added a window factory to use only one executable.

	* src/gth-window-actions-entries.h
	* src/gth-window-actions-callbacks.h:
	* src/gth-window-actions-callbacks.c:

	Moved common actions to gth-window-actions-callbacks.c

	* src/gth-browser.c:
	* src/gth-browser-ui.h:
	* src/gth-browser-actions-entries.h:

	Implemented the history list both in the Go menu and for the toolbar
	back button.

	* src/gth-viewer.c:
	* src/gth-viewer-ui.h:
	* src/gth-viewer-actions-entries.h:
	* src/gth-viewer-actions-callbacks.c:
	* src/gth-viewer-actions-callbacks.h:

	Implemented more missing actions.

	* src/dlg-png-exporter.c (dlg_exporter): use get_file_list_selection
	instead of get_file_list_selection_as_fd.

	* po/POTFILES.in: updated.

	* src/e-combo-button.c:
	* src/e-combo-button.h: removed, not used anymore.

2005-05-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-window-actions-callbacks.h:
	* src/gth-window-actions-callbacks.c:
	* src/gth-viewer.c:
	* src/gth-viewer-actions-callbacks.c:
	* src/gth-browser.c:
	* src/gth-browser-ui.h:
	* src/gth-browser-actions-entries.h:
	* src/gth-browser-actions-callbacks.c:
	* src/gth-browser-actions-callbacks.h:
	Implemented many functions; moved some function to
	gth-window-action-callbacks.c

	* many_files: Code reorganization.  Removed gthumb-window.[ch]; created
	a base window class in gth-window.c;  moved the browser window in
	gth-browser.c; Added a viewer window in gth-viewer.c

2005-04-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/print-callbacks.c (IMAGE_SPACE): set to 20 pixels.

2005-04-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-file-view-thumbs.c (create_unknown_pixbuf): use
	the default dir icon if the theme icon cannot be loaded.

	* libgthumb/gth-file-view-list.c (create_unknown_pixbuf): use g_free
	instead of g_object_unref.

	* src/dlg-search.c (search_clicked_cb): use get_filename instead of
	get_uri.

	* components/image-viewer/ui.c:
	* components/image-viewer/ui.h:
	* components/image-viewer/viewer-control.c:
	* components/image-viewer/GNOME_GThumb_Viewer.xml.in:

	Removed the print command from the viewer component.

	* data/glade/gthumb_print.glade:
	* libgthumb/print-callbacks.c:
	* libgthumb/preferences.h:

	Added ability to customize the paper margins in the print
	dialog.

	* src/dlg-web-exporter.c: use the gtk_filechooser_button widget.

2005-04-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_png_exporter.glade:
	* src/dlg-png-exporter.c:

	Use the gtk_color_button instead of the gnome_color_picker widget.
	Use the gtk_font_button instead of the gnome_font_picker widget.

	* src/dlg-search.c:
	* src/dlg-preferences.c:

	Use the the gtk_filechooser_button widget.

	* src/actions.c (activate_action_help_about):

	Use the gtk_about_dialog widget.

	* configure.in: require gtk+ >= 2.6.0 and glib >= 2.6.0

	* src/dlg-preferences.c:
	* src/dlg-rename-series.c:
	* src/dlg-search.c:
	* src/dlg-web-exporter.c:
	* src/dlg-write-to-cd.c:
	* src/gth-exif-data-viewer.c:
	* src/gth-folder-selection-dialog.c:
	* src/gthumb-window.c:
	* src/dlg-photo-importer.c:
	* libgthumb/gth-file-view-list.c:
	* libgthumb/gthumb-init.c:
	* libgthumb/jpeg-utils.c:
	* libgthumb/preferences.c:
	* libgthumb/thumb-loader.c:
	* libgthumb/gtk-utils.c:
	* libgthumb/print-callbacks.c:
	* libgthumb/thumb-cache.c:
	* libgthumb/image-viewer.c:
	* libgthumb/file-utils.c:
	* libgthumb/gconf-utils.c:
	* libgthumb/dlg-save-image.c:
	* libgthumb/comments.c:
	* libgthumb/catalog.c:

	Include <glib/gi18n.h> instead of <libgnome/libgnome.h>

2005-03-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (main_dialog_set_sensitive): set all
	commands insensitive when importing photos.

2005-04-01  Steve Murphy  <murf@e-tools.com>

	* configure.in: Added "rw" to ALL_LINGUAS.

2005-03-23  Adi Attar  <aattar@cvs.gnome.org>

	* configure.in: Added 'xh' to ALL_LINGUAS.

2005-03-21  Rajesh Ranjan  <rranjan@redhat.com>

	* configure.in: Added "hi" to ALL_LINGUAS.

2005-03-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (image_comment_button_press_cb): make
	the comment text selectable.
	(key_press_cb): handle  key press events if the location entry returns
	FALSE.
	(window_hide_sidebar): do not hide the sidebar if no image is
	available.

2005-03-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-utils.c (get_exif_time): do not assume a correct data
	format.

	Fixes bug #170391: Crash if the EXIF DateTime is too short.

2005-03-14  Abel Cheung  <maddog@linuxhall.org>

	* configure.in: Added "tr" to ALL_LINGUAS.

2005-03-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.6.4 released ]

2005-03-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-utils.c (get_exif_tag): check that data pointer != NULL

	Fixes bug #168938: Crash when loading a photo.

2005-02-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/*/style.css: justify comments.

	* libgthumb/comments.c (_g_escape_text_for_html): new function

	* src/catalog-web-exporter.c (gth_parsed_doc_print):

	escape xml special characters.  Patch by Christophe Bisière

	* libgthumb/comments.c (comments_get_comment_as_xml_string): new
	function.

	* data/albumthemes/*/*.gthtml: Added summary  to tables.
	Patch by Christophe Bisière.

2005-02-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/BlueStripes/image.gthtml:
	* data/albumthemes/BlueStripes/index.gthtml:
	* data/albumthemes/BlueStripes/layout.css:
	* data/albumthemes/BlueStripes/Makefile.am:
	* data/albumthemes/BlueStripes/style.css:
	* data/albumthemes/BlueStripes/thumbnail.gthtml:
	* data/albumthemes/Classic/layout.css:
	* data/albumthemes/Classic/style.css:
	* data/albumthemes/Classic/thumbnail.gthtml:
	* data/albumthemes/ClassicClips/layout.css:
	* data/albumthemes/ClassicClips/style.css:
	* data/albumthemes/ClassicClips/thumbnail.gthtml:
	* data/albumthemes/Clean/image.gthtml:
	* data/albumthemes/Clean/index.gthtml:
	* data/albumthemes/Clean/layout.css:
	* data/albumthemes/Clean/Makefile.am:
	* data/albumthemes/Clean/style.css:
	* data/albumthemes/Clean/thumbnail.gthtml:
	* data/albumthemes/NeatRound/image.gthtml:
	* data/albumthemes/NeatRound/index.gthtml:
	* data/albumthemes/NeatRound/layout.css:
	* data/albumthemes/NeatRound/Makefile.am:
	* data/albumthemes/NeatRound/style.css:
	* data/albumthemes/NeatRound/thumbnail.gthtml:
	* data/albumthemes/NeatSquare/image.gthtml:
	* data/albumthemes/NeatSquare/index.gthtml:
	* data/albumthemes/NeatSquare/layout.css:
	* data/albumthemes/NeatSquare/Makefile.am:
	* data/albumthemes/NeatSquare/style.css:
	* data/albumthemes/NeatSquare/thumbnail.gthtml:

	Fixes bug #145325: xhtml/xml support for Web Albums
	Patch by Christophe Bisière.


2005-02-16  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c (update_exif_data): declare value as
	const.

	Fixes bug #167502: crash trying to open specific image.

2005-02-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c (update_exif_data): ensure g_locale_to_utf8
	gets a non NULL string.

2005-02-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (window_notify_files_changed): restore commented
	out code.

	Fixes bug #165478: Rotated images no longer auto-refresh in image
	viewer.

2005-02-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (get_file_list, ok_clicked_cb): do not use
	context here, check return value only.

	* libgthumb/file-utils.c (get_filename_extension): new function.

	* src/dlg-photo-importer.c (valid_mime_type): check filename if
	mime type fails.

	Attempt to fix bug #160232: gthumb doesn't import pictures from
	ARGUS DC1500 camera.

2005-02-01  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/thumb-loader.c:

	Fixes bug #152441: fuzzy thumbnails, not sharp thumbnails.
	Patch by Robert Schultz.

2005-01-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/catalog-web-exporter.c (get_current_language): use strlen
	instead of the non-standard strnlen.

2005-01-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-web-exporter.c (export): unescape destination.

	Fixes bug #164961: Browsing for Web Album location adds %20 to names
	with spaces.

	* src/dlg-photo-importer.c (notify_cb): notify images creation in an
	idle callback.

2005-01-24  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* configure.in: changed AC_PROG_LIBTOOL to AM_PROG_LIBTOOL as suggested
	by David Moore.

2005-01-25  Nikos Charonitakis  <charosn@her.forthnet.gr>

	* configure.in: Added 'el' (Greek) to ALL_LINGUAS.

2005-01-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.6.3 released ]

2005-01-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (ok_clicked_cb): check write permissions
	and free space before exporting.

	Fixes bug #164325: "Import Photos" error handling when import
	destination is read-only or device if full.

2005-01-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/fullscreen.c: hide the prev and next buttons if in slideshow
	mode.

	* data/albumthemes/ClassicClips/Makefile.am (theme_DATA): added css
	files.

	* data/gthumb.schemas.in:
	* libgthumb/file-utils.c:
	* libgthumb/preferences.h:
	* src/dir-list.c:
	* src/dlg-catalog.c (new_catalog_cb): automatically select the new
	catalog.
	(dlg_add_to_catalog, add_to_catalog__ok_cb): save the last used catalog
	and auto select it when the dialog is created.

	Fixes bug #149707: Remember last catalog for next catalog operation

	* src/dir-list.c (dir_list_refresh_continue): select row.

	Fixes bug #143161: Select previous directory in directory list.
	Patch by Jason Tackaberry.

2005-01-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-utils.c (get_exif_time): set isdst to -1

	Fixes bug #164344: EXIF hour off by one (DST)
	Fixes bug #164293: bad time in rename functionnality

2005-01-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* doc/C/gthumb-C.omf: set category to GNOME|Applications|Graphics

2005-01-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (close__step6):

	Fixed bug #143102: gThumb SHOULD save sizes when window is maximized.

2005-01-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (content_radio_action, window_new)
	(set_action_important):

	Fixed bug #160003: gthumb toolbar horizontal icons + text only shows
	icons.

	* src/dlg-photo-importer.c (check_thread, set_camera_model):

	Fixed bug #162323: Doesn't remember settings for serial port cameras.

	* src/catalog-web-exporter.c (line_is_void): added const

	* src/dlg-photo-importer.c (main_dialog_set_sensitive)
	(async_operation_step, async_operation_start):

	Fixed bug #162852: pressing the camera icon while importing photos does
	bad things

	* src/dlg-rename-series.c (get_image_date):

	Fixed bug #163417: Filename in Rename Series (date %d) contains ":"
	which is invalid filename under Windows

2005-01-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/actions.c (activate_action_help_about):
	* data/gthumb-logo.png: new file

	Added gthumb logo to the about dialog.  Logo by Cristian Correa.

2005-01-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/ui.h:
	* src/gthumb-window.c (key_press_cb): removed GDK_f and GDK_s commands.

	Fixes bug #156677:  - ctrl+S should be the save shortcut, not the
	Slide Show

2005-01-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/ClassicClips/*: updated to generate valid xhtml
	files.

2004-12-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/Classic/thumbnail.gthtml:
	* data/albumthemes/Classic/style.css:
	* data/albumthemes/Classic/Makefile.am:
	* data/albumthemes/Classic/layout.css:
	* data/albumthemes/Classic/index.gthtml:
	* data/albumthemes/Classic/image.gthtml: Applied patch #35273

	* src/catalog-web-exporter.c:
	* src/albumtheme.y:
	* src/albumtheme-private.h:
	* src/albumtheme.l: Applied patch #35272

	Started fixing bug #145325: xhtml/xml support for Web Albums.

2004-12-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c: use "text/uri-list" only as dnd target type.

2004-12-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (file_is_image): simplify the function to get
	the mime type from the filename.

2004-12-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_comments.glade:

	Fixed bug #142897: Selected Categories area of Categories window
	appears to be directly editable, but it is not.

	* libgthumb/dlg-save-image.c (file_save_ok_cb):

	Fixes bug #149883: Saving pictures with files extensions in uppercase
	doesn't work.

	* src/dlg-catalog.c (add_to_catalog__activated_cb): change to library
	only if a library was activated.

	* libgthumb/catalog.c (catalog_add_item):

	Fixes bug #156870: Duplicates allowed in catalogues.

	* libgthumb/image-viewer.c (image_loaded): reset the scrollbar offsets
	after loading an image.

	Fixes bug #161635: Scrollbar doesn't reset when viewing with next and
	previous.

2004-12-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.6.2 released ]

	* src/catalog-web-exporter.c (gth_parsed_doc_print): added classes
	to tr and td tags.

2004-11-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (resolve_all_symlinks):

	Fixes bug #159661: Symlinks in the root directory are incorrectly
	resolved.

	* libgthumb/print-callbacks.c (log2):

	Fixes bug #159672: log2() function already defined under cygwin.

2004-11-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (image_is_gif): new function.

	* libgthumb/image-loader.c (load_image_thread):
	* libgthumb/thumb-loader.c (thumb_loader):

	Load the image as an animation only if the image type is gif.

	* libgthumb/jpeg-utils.c (do_load_internal):

	Fix loading of jpegs with 4 channels.  Bug #159492.

2004-11-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.6.1 released ]

2004-11-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (ask_whether_to_save__image_saved_cb): always
	save the exif data.

	Fixed bug #158682: Modified image auto-saved through confirmation
	dialog loses EXIF data.

2004-11-16  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (cancel_clicked_cb): interrupt the current
	operation instead if destroying the dialog (bug #158174).

	* libgthumb/file-utils.c (file_is_image):
	* libgthumb/gtk-utils.c (_gtk_label_set_filename_text)
	(_gtk_entry_set_filename_text):

	Check invalid filenames (bug #158253).

2004-11-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-duplicates.c (duplicates_add_columns): allow column resizing

	Fixes bug #157761: cannot resize the columns in the "find duplicates"
	dialog of gthumb.

2004-11-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-preloader.c (loader_error_cb, loader_done_cb):
	start next image load after an idle time.

	* src/gthumb-window.c (window_show_prev_image): skip broken
	images when in fullscreen mode.

	* libgthumb/gth-image-list.c (gth_image_list_realize): use
	pango_font_metrics_get_approximate_digit_width instead of
	pango_font_metrics_get_approximate_char_width.

	* src/ui.h: associate F12 to the Revert action.

	Fixes bug #152542: Revert F12

2004-11-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (window_update_sensitivity):

	make View_ShowImage and View_Fullscreen active even when a
	broken image is selected.

2004-11-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.h:
	* src/gthumb-window.c (window_update_statusbar_zoom_info):
	* src/dlg-image-prop.c (update_buttons_sensitivity):

	Fixed handling of unloadable images (for example: xcf images)

	* libgthumb/image-loader.c (load_image_thread): added a static lock
	around gdk_pixbuf_animation_new_from_file.

2004-10-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (dlg_photo_importer):
	* data/glade/gthumb_camera.glade:

	Fixed bug #156933: Patch to enable resizing of Import Photos dialog
	Patch by Tim Gerla

2004-10-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/thumb-loader.c (thumb_loader_get_type):
	* libgthumb/image-viewer.c (image_viewer_get_type):
	* libgthumb/image-loader.c (image_loader_get_type):
	* libgthumb/gth-pixbuf-op.c (gth_pixbuf_op_get_type):
	* libgthumb/gth-image-list.c (gth_image_list_get_type):
	* libgthumb/gth-file-view-thumbs.c (gth_file_view_thumbs_get_type):
	* libgthumb/gth-file-view-list.c (gth_file_view_list_get_type):
	* libgthumb/gth-file-view.c (gth_file_view_get_type):
	* libgthumb/gth-file-list.c (gth_file_list_get_type):

	s/guint/GType/  Patch by Dave Malcolm (bug #156851)

2004-10-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/catalog-png-exporter.c:
	* src/catalog-web-exporter.c:
	* src/e-combo-button.c:
	* src/gth-exif-data-viewer.c
	* src/gth-folder-selection-dialog.c
	* src/gth-image-selector.c
	* src/gth-toggle-button.c
	* src/gthumb-preloader.c

	s/guint/GType/  Patch by Dave Malcolm (bug #156851)

2004-10-28  Alexander Shopov  <ash@contact.bg>

	* configure.in (ALL_LINGUAS): Added "bg" (Bulgarian)

2004-10-28  Åsmund Skjæveland  <aasmunds@fys.uio.no>

	* configure.in: Added nn to ALL_LINGUAS.
	* po/nn.po: Started Norwegian Nynorsk translation.

2004-10-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.6.0.1 released ]

2004-10-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.h (check_permissions):
	* libgthumb/file-utils.c (check_permissions): fix this function.

2004-10-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.6.0 released ]

2004-10-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-file-utils.c (dlg_check_folder):
	* src/dlg-jpegtran.c (apply_transformation):
	* libgthumb/dlg-save-image.c (file_save_ok_cb): use check_permissions
	instead of access

2004-10-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* configure.in: check libraries version.

2004-10-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/ui.h:
	* src/gthumb-window.c: queue a resize after merging the ui.

2004-09-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.5.2 released ]

	* doc/C/gthumb.xml: updated.

2004-09-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_tools.glade:
	* libgthumb/gtk-utils.c (exec_command):
	* src/dlg-write-to-cd.c (write_to_cd__continue, ok_clicked_cb):
	* src/dlg-open-with.c (open_cb):

	Allow to burn the current catalog.

2004-09-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/image-loader.c (image_loader_set_pixbuf): get the private
	pointer before using it.

	* libgthumb/image-viewer.c (image_viewer_expose): fix image display and
	scrolling when the frame border is 0.

2004-09-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/preferences.c (pref_util_restore_window_geometry):

	Do not restore the position, let the WM place the dialog where it
	likes.

	* src/dlg-comment.c (dlg_comment_new):
	* src/dlg-categories.c (dlg_categories_common):
	* libgthumb/preferences.h:
	* libgthumb/preferences.c (pref_util_restore_window_geometry)
	(pref_util_save_window_geometry):

	Save the geometry of the comment and categories dialogs.

2004-09-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/fullscreen.c (fullscreen_start):
	* libgthumb/image-viewer.c (image_viewer_show_frame)
	(image_viewer_hide_frame, image_viewer_is_frame_visible): new
	functions.
	* libgthumb/image-viewer.h (struct _ImageViewer):

	fixes bug #134671: `Zoom to Fit' needlessly scales down image

	* libgthumb/gth-image-list.c (gth_image_list_set_no_image_text):
	* libgthumb/gth-file-view-thumbs.c (gfv_set_no_image_text):
	* libgthumb/gth-file-view.c (gfv_set_no_image_text):
	* libgthumb/gth-file-list.c (gth_file_list_set_list)
	(add_list_in_chunks, add_list_in_chunks):

	make the 'no image' text configurable.

2004-09-07  Ankit Patel <ankit@redhat.com>

	* configure.in: Added "gu" (Gujarati) to ALL_LINGUAS.

2004-09-06  Tomasz KÅoczko <kloczek@pld.org.pl>

	* components/image-viewer/Makefile.am: fixed paralel build ("make -j<N>").

2004-09-05  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-image-list.c: display 'No Image' when there is
	no image in the list.

	* data/albumthemes/text.h (text): removed 'click on the image...'
	message.

	* libgthumb/image-loader.c (image_loader_set_pixbuf): lock
	before setting the pixbuf, unlock when done.

2004-09-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/ClassicClips/image.gthtml:
	* data/albumthemes/Clean/image.gthtml:
	* data/albumthemes/NeatRound/image.gthtml:
	* data/albumthemes/NeatSquare/image.gthtml:
	* data/albumthemes/Classic/image.gthtml: removed the "click on
	image to enlarge" message.


2004-09-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.5.1 released ]

2004-09-01  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* configure.in: updated required libraries versions.

	* src/fullscreen.c (create_popup_window): use stock icons for
	previous and next image buttons.

2004-08-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-web-exporter.c (wa_destination_button_clicked_cb):
	(theme_dialog__install_theme_clicked):
	set the file chooser dialog modal.

	* src/gthumb-window.c (_window_add_monitor_event): fire
	a CREATED event if a CHANGED event happended on a file not present
	in the file list.

2004-08-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/fullscreen.c (fullscreen_start): fixed fullscreen mode.

2004-08-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (directory_changed): process monitor
	events sequentially.

2004-08-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/gthumb.desktop.in (MimeType): added supported mime types list.

2004-08-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* components/catalog-view/GNOME_GThumb_CatalogView.server.in.in:
	added nautilus:required_directory_content_mime_types
	attribute.  Suggested by Alexander Larsson.

2004-08-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/dlg-save-image.c (get_type_from_name): use strcasecmp
	instead of strcmp.

	Fixes bug #150729: Problems handling JPEG.

2004-08-21  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Add «nb» to ALL_LINGUAS.

2004-08-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (window_update_statusbar_image_info)
	(window_new): added the resize grip to the statubar.

2004-08-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/fullscreen.c (set_action_active):
	* src/actions.c (set_action_sensitive):
	* src/gthumb-window.c (set_action_sensitive):
	(get_slideshow_random_image): removed debugging code.

2004-08-11  Mohammad DAMT  <mdamt@bisnisweb.com>

	* configure.in: Added "id" (Indonesian) in ALL_LINGUAS
	* po/id.po: Added Indonesian translation done by Abdul Hamid.A.N
	<hameed@linuxmail.org>

2004-08-09  Amanpreet Singh Alam <aalam@redhat.com>

	* configure.in: +punjabi locale

2004-08-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.5.0 released ]

2004-07-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/gthumb.1: added --import-photos option documentation.

2004-07-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/jpegutils/jpeg-data.c:

	Fixed bug #148301: gthumb doesn't compile without libexif

	* src/fullscreen.c (fullscreen_start):

	Fixed bug #148303: Fullscreen window always appears on first
	screen in xinerama.  Patch by Bastien Nocera.

2004-07-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-search.c (search_clicked_cb):
	* libgthumb/search.c (search_util_get_file_patterns): new function

	Fixes bug #148571: Problem with regular expressions

2004-07-24  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-file-utils.c (dlg_copy_items):
	* src/dlg-file-utils.h (dlg_copy_items): added overwrite_all option.

2004-07-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (image_comment_button_press_cb): show the
	comment dialog when double-clicking on the comment pane.

2004-07-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-image-list.c (gth_image_list_realize):
	(truncate_comment_if_needed):

	calculate the approximate char width and use that value when
	truncating a comment.

2004-07-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-categories.c (ok_clicked_cb): reload the image after
	saving the categories.

2004-07-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-categories.c (dlg_categories_new): do not create more than
	one categories dialog.

2004-07-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (save_pixbuf__image_saved_cb):

	Fixed bug #146522: reset sequence after save.
	Patch by G Sunil Tukrel.

2004-07-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (save_pixbuf__image_saved_cb)
	(image_loaded_cb):

	Fixes bug #144099: EXIF data not preserved when image is manipulated.

2004-07-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gtk-utils.c (_gtk_error_dialog_from_gerror_run):
	display the error dialog only if the message is not null.

2004-07-05  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/fullscreen.c (fullscreen_stop): show_all after exiting
	fullscreen mode.

2004-07-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-comment.c:
	* src/dlg-categories.c: Make the comments dialog and the categories
	dialog modeless.  Fixes Bug #142941.

2004-06-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-comment.c (dlg_comment_update): If there is no comment then
	all fields must be considered to differ.  Patch by Martin Ebourne.

2004-06-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-utils.c (get_exif_tag_short):
	* src/dlg-jpegtran.c (update_rotation_from_exif_data): use the
	orientation value instead of the orientation string.

	* configure.in (HAVE_LIBEXIF):
	* src/gth-exif-utils.c (get_exif_entry_value): make gthumb compatible
	with both libexif 0.5.x and 0.6.x

2004-06-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (go_to_location, set_dir_list_continue): refocus
	the location entry after an autocompletion.

2004-06-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: added EXIF_TAG_ISO_SPEED_RATINGS

2004-06-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/actions.c (activate_action_help_about): updated copyright to
	2004.  Bug #144825.

2004-06-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/ui.h: use GTK_STOCK_ADD insead of GTHUMB_STOCK_BOOKMARK

	* src/gthumb-window.c (catalog_activate_continue)
	(catalog_activate_continue, catalog_activate)
	(window_set_sidebar_content): set image viewer void if the current
	image is not present in the image list.

	* src/fullscreen.c (fullscreen_stop): use gtk_widget_show instead of
	gtk_widget_show_all.

2004-06-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/ui.h: fix tooltip text.

	* data/gthumb.desktop.in (Categories): Added Viewer.

	* configure.in: require at least libexif 0.6.9 now

	* src/gth-exif-data-viewer.c (update_exif_data):
	* src/gth-exif-utils.c (get_exif_entry_value): new function.

2004-06-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (window_hide_sidebar): update the zoom info.

2004-06-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/*.gthtml: make pages fit the browser window.

	* src/gth-exif-utils.c (get_exif_time): set daylight saving time to 1.

2004-06-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/print-callbacks.c (print_catalog): do not scale images
	before printing.

2004-06-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (get_folder_name): use "%Y-%m-%d--%H.%M.%S"
	instead of "%Y-%m-%d--%H:%M:%S" as the default film name.

2004-06-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/ui.h: fixed typo.

2004-06-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (window_show_cb): restore saved toolbar and
	statusbar visibility.

	* data/glade/gthumb_tools.glade:
	* src/dlg-write-to-cd.c (dlg_write_to_cd): remove recursive option.

	* src/main.c (convert_to_new_comment_system): automatically migrate to
	the new comment system.

	* src/gthumb-window.c (close_preview_image_button_cb):
	added a close button for the preview content bar, related to bug
	#143023.

	* src/dlg-write-to-cd.c:
	* src/dlg-write-to-cd.h: new files.  Added ability to write images
	to CDs using nautilus.

2004-06-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (_proc_monitor_events): ignore hidden
	directories.

2004-06-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-folder-selection-dialog.c:
	* src/dlg-duplicates.c:
	* src/dlg-photo-importer.c:
	* src/dlg-png-exporter.c:
	* src/dlg-preferences.c:
	* src/dlg-search.c:
	* src/dlg-web-exporter.c:
	* libgthumb/dlg-save-image.c:

	Fixes bug #139569: Gthumb doesn't use the new filechooser.
	Patch by Mattias Eriksson.

	* src/fullscreen.c (fullscreen_new, close_fullscreen_window_cb):

	Fixes bug #143426: crash when using Alt+F4 to exit after slideshow

	* src/gthumb-window.c:
	* src/gthumb-window.h:
	* src/actions.c:
	* src/actions.h:
	* src/ui.h: use the gtk+ ui manager to create menus and toolbar.

2004-05-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* configure.in: updated version to 2.5.0

2004-05-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.4.0 released ]

2004-05-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-file-utils.c (folder_copy): delete the old destination folder
	comment if it exists.

2004-05-24  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/gthumb.schemas.in: fixes bug #143020 : gthumb should default to
	Folders view on first load.

	* data/gthumb-ui.xml: fixes bug #143024 : gthumb-ui.xml error prevents
	Slideshow accelerator from working.

2004-05-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* doc/C/gthumb.xml:
	* src/commands-impl.c (help_about_command_impl): changed email
	address.

2004-05-24  Stanislav Visnovsky  <visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: Added "sk" (Slovak) to ALL_LINGUAS.

2004-05-22  Paolo Bacchilega  <paolo@localhost.localdomain>

	* src/gthumb-window.c (add_image_list_to_catalog): new function.
	(image_list_drag_data_received): add images to the current catalog.

	Fixes bug #142929

	* data/glade/gthumb_comments.glade: Moved the "Selected Categories"
	entry to the bottom.  Attempt to fix bug #142987

2004-05-21  Paolo Bacchilega  <paolo@localhost.localdomain>

	* src/dlg-photo-importer.c (get_folder_name): save the film name
	(dlg_photo_importer): set the default film name

	* data/gthumb.schemas.in: added film property

2004-05-20  Paolo Bacchilega  <paolo@localhost.localdomain>

	* src/gthumb-window.c (notify_files_deleted__step2)
	(notify_files_added__step2): update sensitivity after adding or
	removing files.

2004-05-18  Paolo Bacchilega  <paolo@localhost.localdomain>

	* data/gthumb-ui.xml: added a popup menu for the dir list.

	* libgthumb/gthumb-init.c (gthumb_init): add the dir monitoring before
	preloading.
	(gthumb_release): remove dir monitoring here.

	Fixes bug #142619

	* src/commands-impl.c (edit_current_folder_categories__done): check
	whether the modified folder is in the folder list before updating
	the folder view.

2004-05-08  Iñaki Larrañaga  <dooteo@euskalgnu.org>

	* configure.in: Added "eu" (Basque) to ALL_LINGUAS.

2004-05-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c: allow to download video and audio files
	from the camera.

	* src/dlg-rename-series.c (dlg_rename_series):

	Fixes debian bug #241800: gthumb: incorrect treatment of accented
	character in tools - rename series

2004-04-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/BlueStripes/image.gthtml
	* data/albumthemes/BlueStripes/index.gthtml
	* data/albumthemes/BlueStripes/thumbnail.gthtml
	* data/albumthemes/Classic/image.gthtml
	* data/albumthemes/Classic/index.gthtml
	* data/albumthemes/Classic/thumbnail.gthtml
	* data/albumthemes/ClassicClips/image.gthtml
	* data/albumthemes/ClassicClips/index.gthtml
	* data/albumthemes/ClassicClips/thumbnail.gthtml
	* data/albumthemes/Clean/image.gthtml
	* data/albumthemes/Clean/index.gthtml
	* data/albumthemes/Clean/thumbnail.gthtml
	* data/albumthemes/NeatRound/image.gthtml
	* data/albumthemes/NeatRound/index.gthtml
	* data/albumthemes/NeatRound/thumbnail.gthtml
	* data/albumthemes/NeatSquare/image.gthtml
	* data/albumthemes/NeatSquare/index.gthtml
	* data/albumthemes/NeatSquare/thumbnail.gthtml
	* doc/theme-xml.txt
	* src/albumtheme-private.c
	* src/albumtheme-private.h
	* src/albumtheme.l
	* src/albumtheme.y

	Removes the style attributes and uses the css classes instead.
	Added the class attribute to the gthumb:image tag.
	Added 6 new readable variables: image_width, image_height,
	  preview_width, preview_height, thumb_width, thumb_height.
	Added * and / to the expression evaluation.
	Added a new tag, <gthumb:eval expr="expression here"/>

	Patch by Martin Ebourne <martin AT zepler DOT org>

2004-04-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-web-exporter.c (install_theme__ok_cb): init command_line to
	NULL

	* src/dlg-png-exporter.c (export): set the default value for
	type_extension.

	* libgthumb/gnome-print-font-picker.c
	(gnome_print_font_picker_set_mode): remove useless check.

	* libgthumb/file-utils.c (file_copy): remove n <= 0 condition.

	* libgthumb/cursors.c (cursor_get): remove useless check.

	* libgthumb/gth-file-list.c (gth_file_list_select_image_by_pos):
	init offset to 0.5

	* libgthumb/gth-image-list.c (real_move_cursor): init offset to -1.0

	* libgthumb/file-utils.c (file_copy): use size_t instead of int.

	* src/dir-list.c (dir_list_refresh_continue): set dir_list

	* libgthumb/preferences.c (pref_get_real_toolbar_style):
	* src/gth-toggle-button.c (gth_toggle_button_set_style):
	* src/e-combo-button.c (e_combo_button_set_style):
	* src/gthumb-window.c (window_notify_update_toolbar_style):

	s/both_horiz/both-horiz/

	* src/gthumb-window.c (key_press_cb):
	* src/fullscreen.c (image_key_press_cb): use '2' to set the zoom
	level to 2, and '3' to set it to 3.0.

	* data/albumthemes/*/preview.png: ops, forgot to resize previews :)

2004-04-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.3.3 released ]

2004-04-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (path_is_dir): remove the warning.

	* libgthumb/comments.c (save_comment): unescaped comment filename
	before saving. Patch by Matthew West (gnomebugzilla@matthewwest.co.uk)

2004-04-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/fullscreen.c (create_popup_window): added zoom buttons to the
	toolbar.

2004-04-18  Sami Pesonen  <sampeson@iki.fi>

	* configure.in: Added "fi" (Finnish) to ALL_LINGUAS.

2004-04-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (image_is_jpeg): added workaround for bug in
	gnome_vfs_mime_type_from_name_or_default.

2004-04-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (path_in_path): new function, used to find
	a path contained in another path.

	* src/dlg-search.c (file_respects_search_criteria):
	* src/gthumb-window.c (window_notify_directory_new)
	(window_notify_directory_delete):
	* src/dlg-file-utils.c (folder_copy):
	* src/commands-impl.c (folder_copy__response_cb): use the above
	function.

	* doc/C/gthumb.xml: Updated the manual.

	* data/gthumb-ui.xml: added a separator in the File->Folder menu.

2004-04-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (make_url_list):

	Fixes bug #138979: DnD for non-Latin1 filenames fails.
	Patch by Ilya Konstantinov (gnome-bugzilla@future.shiny.co.il)

2004-03-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (save_pixbuf__image_saved_cb): set
	image_modified = FALSE if the current image has been saved.

2004-03-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gthumb-slide.c (gthumb_draw_slide): make the inner border
	slimmer.

2004-03-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (window_new): set the position of the paned
	window.

2004-03-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.3.2 released ]

2004-03-26  Zygimantas Berucka  <uid0@akl.lt>

	* configure.in: Added "lt" (Lithuanian) to ALL_LINGUAS.

2004-03-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/comments.c (save_comment): use unescape = FALSE for saving
	comments.

	* src/fullscreen.c (get_file_info):

	Fixes bug #137860 (New - full screen image info date is not from exif
	data).

	* libgthumb/file-utils.c (file_is_image): workaround for bug in
	gnome_vfs_mime_type_from_name_or_default.

	Fix bug #136168 (Images with capitalized extensions (.JPG) are not
	found by the image search/browser).

	* libgthumb/gth-image-list.c (gth_image_list_button_press): do not emit
	the ITEM_ACTIVATED signal if Control of Shift is pressed.

	Fix bug #136451 (Quick multiple selection problem).

	* src/gthumb-window.c:

	Fix bug #133452 (thumbnail-pane is resized when the application window
	is resized).

	* libgthumb/gnome-print-font-picker.c:
	* libgthumb/gnome-print-font-dialog.c: updated from gedit.

	* src/gthumb-window.c (window_update_zoom_sensitivity): update the zoom
	commands sensitivity.

	* libgthumb/print-callbacks.c (DEF_COMMENT_FONT): Change default font.
	(print_catalog_dlg, print_image_dlg): Use the default font if the
	current one does not exist.

	* src/dlg-web-exporter.c (load_themes): automatically select the
	current theme.

	* data/glade/gthumb_web_exporter.glade: reorganized a bit.

	* src/gthumb-window.c (dir_list_drag_data_received):
	(image_list_drag_data_received): fix drag & drop.

2004-03-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/Clean/Makefile.am:
	* data/albumthemes/NeatSquare/Makefile.am:
	* data/albumthemes/NeatRound/Makefile.am:
	* data/albumthemes/BlueStripes/Makefile.am:
	* data/albumthemes/ClassicClips/Makefile.am:
	* data/albumthemes/Classic/Makefile.am: Do not generate .gthtml files
	anymore.

	* data/albumthemes/*/index.xml.in:
	* data/albumthemes/*/image.xml.in:
	* data/albumthemes/*/thumbnail.xml.in: removed files.

	* data/albumthemes/*/index.gthtml:
	* data/albumthemes/*/image.gthtml:
	* data/albumthemes/*/thumbnail.gthtml:
	* data/albumthemes/text.h: new files.

	Fix bug #126452 (Compilation error in data/albumthemse/BlueStripes
	with index.xml.in parsing).

	* src/gthumb-window.c (ask_whether_to_save): removed unused variable.

2004-03-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (image_requested_error_cb): use
	window_image_view_set_void.
	(real_set_void): ask whether to save before setting the viewer to void.
	(ask_whether_to_save): make the dialog not modal.

	* src/dlg-web-exporter.c: remove the destination manager.

	* data/glade/gthumb_comments.glade:
	* src/dlg-comment.c (ok_clicked_cb):
	* libgthumb/comments.c (comments_get_comment_as_string): init time_txt
	to ""

	Fix bug #136097 (gthumb 2.2.1 ignores "save only changed fields"
	tickbox).

2004-02-24  Adam Weinberger  <adamw@FreeBSD.org>



2004-02-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-photo-importer.c (set_camera_model)
	(set_camera_model): Use gtk_label_set_text instead of
	_gtk_label_set_locale_text.

	Fix bug #135110 (An UTF8 string was not converted to
	the current locale (again)).

2004-02-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.3.1 released ]

2004-02-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-jpegtran.c: Fix orientation restoring.
	(ok_clicked): Fix apply to all.

2004-02-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gth-exif-utils.c:

	Fix bug #133131 (exif orientation tag not updated).

	* src/gth-exif-utils.h:

	Rename exif-utils.[ch] to gth-exif-utils.[ch]

	* src/dlg-jpegtran.c (update_rotation_from_exif_data):

	Handle the 8 possible values of the orientation tag.

2004-01-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/print-callbacks.c (print_catalog_dlg):

	Fix bug #132614 (Comment font option menu in print dialog is
	not disabled by default).

2004-01-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_update_statusbar_image_info):

	s/filename/path/

	* src/dlg-search.c (file_respects_search_criteria):

	Fix bug #109016 (Searches should match directories too).

2004-01-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_update_statusbar_image_info):

	Fix bug #112254 (status line shoudl use date from comment rather
	than mtime).

	* src/dlg-file-utils.c (folder_copy):

	Delete the comment cache before copying the folder.

	* data/glade/gthumb_comments.glade:
	* src/dlg-comment.c:

	Fix bug #130473 ("add comment" dialog uses ctime instead of mtime).

	* src/gthumb-window.c (key_press_cb):

	Fix bug #130382 (gthumb keyboard usability issue).

2004-01-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-preferences.c (apply_cb):
	* src/gthumb-window.c (get_next_slideshow_image):
	* libgthumb/typedefs.h:
	* data/gthumb.schemas.in:
	* libgthumb/preferences.h (PREF_SLIDESHOW_DIR):
	* libgthumb/preferences.c:

	Fix bug #112254 (Needs Randomize Option on Slide Show).

2004-01-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-jpegtran.c (apply_transformation):

	Fix bug #130823 (gthumb does not maintain permissions on files).
	Fix bug #130824 (gthumb does not complain about lack of permissions).

	* libgthumb/preferences.c (preferences_init):

	Fix bug #130829 (gthumb ignores current directory when starting).

	* src/gthumb-window.c (create_new_file_list):
	(window_set_preview_content):

	Fix bug #131852 (Moving images via drag-and-drop no longer works).
	Fix bug #131853 (Changing folders produces flicker in image viewer).

	* src/dlg-file-utils.c (folder_copy):

	Check whether the folder comment exists before including it in the
	URIs to move.

	* src/gthumb-window.c (catalog_list_drag_leave)
	(dir_list_drag_leave):

	Remove the auto load timeout after leaving.

2004-01-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/jpeg-utils.c (do_load_internal): escape the path before
	creating the uri.

2004-01-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.3.0 released ]

	* libgthumb/print-callbacks.c (add_catalog_preview): round result
	before converting it to integer.

	* src/dlg-jpegtran.c (dlg_jpegtran): use the GTHUMB_STOCK_RESET icon.

	* src/gthumb-window.c (get_image_to_preload): check dimensions before
	preloading an image.

2004-01-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-png-exporter.c:
	* src/catalog-png-exporter.h:

	Use the image_loader instead of the thumb_loader.

2004-01-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-web-exporter.c: use the image_loader instead of
	the thumb_loader.

2004-01-10  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-photo-importer.c (async_operation_step): fix
	progress bar updating.

2004-01-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/main.c: add a --import-photos option to automatically open
	the import photos dialog.

	* src/dlg-photo-importer.c: make operations asynchronous.

	* libgthumb/comments.c (comments_get_comment_as_string):
	* src/gthumb-window.c (window_update_statusbar_image_info):
	* src/gth-exif-data-viewer.c (update_file_info):
	* src/fullscreen.c (get_file_info):
	* src/dlg-duplicates.c (images_selection_changed_cb):
	* components/image-viewer/viewer-stream.c (get_status):

	Fix bug  #126292 (Date shows badly if locale charset is not utf8).
	Patch by Egmont Koblinger.

2004-01-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-web-exporter.c (theme_dialog__go_to_folder_clicked):
	* src/commands-impl.c (show_folder): do not launch nautilus
	explicitly, use gnome_url_show instead.

2003-12-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-crop.c:
	* src/gth-image-selector.c: more crop work.

	* libgthumb/icons/reset-16.png:
	* libgthumb/icons/swap-24.png: new icons.

	* libgthumb/gthumb-stock.c:
	* src/dlg-hue-saturation.c:
	* src/dlg-color-balance.c:
	* src/dlg-brightness-contrast.c:
	* src/dlg-posterize.c:
	* src/dlg-png-exporter.c: use the new stock icons.

	* libgthumb/gth-image-list.c (real_set_cursor): stop dragging if
	cursor changes.

2003-12-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-image-list.c (gth_image_list_motion_notify): check
	selection != NULL.

	* src/gthumb-window.c (image_saved_func): do not add a saved image to
	the current catalog.

	* data/gthumb.schemas.in:
	* libgthumb/typedefs.h:
	* libgthumb/preferences.h:
	* libgthumb/preferences.c: load and save crop aspect ratio.

	* data/glade/gthumb_crop.glade:
	* src/dlg-crop.c:
	* src/gth-image-selector.c: more crop work.

2003-12-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-crop.c (dlg_crop): more crop support.

2003-12-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-crop.h:
	* src/dlg-crop.c: new files.  added initial crop support.

	* libgthumb/thumb-loader.c (thumb_loader): use a faster loader for
	jpeg images.

	* libgthumb/image-loader.h:
	* libgthumb/image-loader.c:
	(image_loader_set_loader): allow to specify a custom loader.

	* libgthumb/jpeg-utils.h:
	* libgthumb/jpeg-utils.c: new files.

	* libgthumb/image-loader.c (image_loader_sync_pixbuf): assign the
	pixbuf inside the lock.

2003-12-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (update_buttons_sensitivity):
	* src/gthumb-window.c (window_update_sensitivity): update
	"View Next Images" and "View Prev Image" sensitivity.

	* src/jpegutils/Makefile.am (noinst_LTLIBRARIES):
	* src/Makefile.am (libjpegtran_la_LIBADD): fix bug #129858
	(libgthumb-jpegutils.a isn't libtool library, does not link on
	non-x86).

	Patch by Matthew Wilson.

2003-12-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gnome-print-font-picker.c:
	* libgthumb/gnome-print-font-dialog.c: updated from gedit.

2003-12-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-photo-importer.c (dlg_photo_importer): added
	'update previews' and 'delete images from camera' buttons.

2003-12-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gconf-utils.c (eel_gconf_set_path_list)
	(eel_gconf_get_path_list): new functions

2003-12-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/preferences.c:
	* src/dlg-photo-importer.c: load and save dialog preferences; added a
	destination entry instead of hardcoding it.

	* libgthumb/icons/film-16.png: resize icon to 16x16.

2003-12-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (close__step5): ask whether to save a modified
	image before exiting.

	* data/gthumb-ui.xml:
	* src/commands-impl.c (edit_current_folder_categories__done): add
	a command to edit folder categories.

	* src/dlg-photo-importer.c: add a 'Film' keyword to the created folder.

	* src/dir-list.c:
	* src/main.c:
	* src/gthumb-window.c:
	* src/bookmark-list.c: use a specila icon for folders with the 'Film'
	keyword.

	* libgthumb/file-utils.c (resolve_all_symlinks): handle nonexistent
	files.

	* src/dlg-file-utils.c:
	* src/commands-impl.c (folder_copy__response_cb): update the folder
	comment when copying, moving and renaming a folder.

	* libgthumb/comments.c (comments_get_comment_filename): resolve the
	full path.

2003-12-15  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added "hr" to ALL_LINGUAS.

2003-12-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-duplicates.c (dlg_duplicates): rempve unused variable.

	* src/commands-impl.c (wallpaper_restore_command_impl): restore
	wallpaper correctly when the picture_options value is 'none'.

	* src/dlg-photo-importer.c: put config.h before #ifdef HAVE_LIBGPHOTO


	* src/commands-impl.c (file_camera_import_command_impl):
	* src/gthumb-window.c (window_new): do not compile camera support
	if libgphoto is not present.

	* src/dlg-photo-importer.c (update_ui): add gdk_flush()

2003-12-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-categories.c (add_category_cb): automatically use a
	created category.

	* src/dlg-photo-importer.c (ok_clicked_cb): remove old check.

2003-12-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (folder_rename): resolve the old path before
	renaming.

2003-12-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-search.c: create the categories dialog with a new gui object;
	allow to save void searches.

2003-12-10  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-web-exporter.c: Implement destination manager.

2003-12-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-preferences.c (dlg_preferences): added "Ask whether to save
	modified images" option.

	* libgthumb/dlg-save-image.c (file_save_ok_cb): check write permissions
	before saving.

	* libgthumb/image-viewer.c (image_viewer_button_release): emit the
	CLICK signal after ungrubbing the mouse pointer.

2003-12-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (ask_whether_to_save): ask whether to save a
	modified image.

	* src/dlg-png-exporter.c (dlg_exporter): remove name examples.

	* src/dlg-rename-series.c (update_list): use %f, %d, %s instead of
	*, ! and ? when renaming filenames.

	* libgthumb/glib-utils.c (_g_substitute_pattern): new function.

2003-12-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/print-callbacks.c (print_catalog_cb):
	* libgthumb/print-callbacks.h: implement catalog printing.

	* src/dlg-jpegtran.c (apply_tranformation_generic, dlg_jpegtran):
	implement generic transformations of non jpeg images.

2003-12-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_save_pixbuf): new function.

2003-11-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-image-list.c (paint_item): paint all selected
	thumbnails with the same color, always paint the focus for the focused
	thumbnail.

	* src/gthumb-window.c (load_timeout_cb): do not preload the (pos + 2)
	image.

	* src/gthumb-ui.xml: remove "exit".

2003-11-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-search.c (file_respects_search_criteria): use the file mtime
	if no time is defined in the comment.

2003-11-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.9 released ]

2003-11-11  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-loader.c: do not use the private uri outside the
	locks.

2003-11-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* Makefile.am (SUBDIRS): remove omf-install

	* src/catalog-web-exporter.c (save_resized_image_cb): update the
	image size if the original image is resized.

2003-11-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/Makefile.am (libgthumbdir): install the library in
	$(libdir)/gthumb (patch by Götz Waschk
	<waschk@informatik.uni-rostock.de>)

2003-11-03  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added en_GB translation by Peter Oliver
	<bugs@mavit.freeserve.co.uk>

2003-11-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.8 released ]

	* src/dir-list.c (dir_list_add_directory): do not use an hardcoded
	icon size, get the size from the gtk theme instead.

	* src/gthumb-window.c (window_notify_directory_rename): check
	whether the new name is a first level subdir before adding it to
	the dir list.

	* src/catalog-png-exporter.c (end_export):
	* src/dlg-change-date.c (ok_clicked): explicitly notify changes.

	* src/gthumb-window.c (get_image_to_preload, load_timeout_cb):
	preload an image only if it is smaller than PRELOADED_IMAGE_MAX_SIZE.

	* src/catalog-web-exporter.c (export__copy_to_destination__step2):
	display an error dialog if something went wrong.

2003-10-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-change-date.c:
	* src/dlg-rename-series.c: include gnome-help.h

	* src/gthumb-window.c (create_new_file_list): use ACTION_MOVE when
	dragging in gthumb, ACTON_COPY for all other apps.

2003-10-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* add-include-prefix: make the script portable (patch from Pav
	Lucistnik <pav@oook.cz>)

2003-10-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.7 released ]

2003-10-11  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_new): insert the preview buttons
	outside the info bar.

2003-10-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-image-list.c (paint_item): draw the selection
	outside the thumbnail not inside it.

2003-10-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* data/albumthemes/*/*.xml.in: little changes.

	* src/dlg-categories.c (dlg_categories):
	* src/dlg-comment.c (dlg_edit_comment): Set the transient for
	window the window the viewer belongs to.  This is because comment
	and categories dialogs can be used even in fullscreen mode.

	* doc/C/gthumb.xml: updated.

2003-10-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-convert.c (load_current_image): notify files created and
	deleted.

	* doc/C/gthumb.xml: updated.

	* src/gthumb_convert.glade:
	* src/gthumb_tools.glade:
	* src/dlg-convert.c (help_cb):
	* src/dlg-rename-series.c (help_cb):
	* src/dlg-change-date.c (help_cb): add a help button for some dialogs.

	* libgthumb/comments.c (save_comment): init strings to NULL.

	* src/gthumb-window.c (image_requested_error_cb): view the image
	filename even if the image could not be loaded.

	* src/dlg-file-utils.c (file_move_response_cb): remove a g_print

	* libgthumb/file-utils.c (get_dest_free_space): new function.

2003-10-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fullscreen.c (fullscreen_start): set the window screen.

2003-09-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml: always use the name Catalog for the catalog
	submenu, even when the catalog is a search.

	* doc/C/gthumb.xml: started updating manual.

	* libgthumb/dlg-save-image.c (file_save_ok_cb): check whether the
	image type is writable before trying to write the image, and warn
	the user if it's not.

2003-09-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment.c (dlg_edit_comment): use have_exif_data.

	* src/exif-utils.c (have_exif_data): new function.

	* src/fullscreen.c (fullscreen_start): do not hide the main
	window.

	* libgthumb/gth-file-list.h:
	* libgthumb/gth-file-list.c (gth_file_list_init)
	(interrupt_thumbs__part2, gth_file_list_interrupt_thumbs)
	(start_update_next_thumb): do not allow to interrupt an interruption.

2003-09-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/Makefile.am (EXTRA_DIST): add gthumb.schemas.in

	* src/dlg-preferences.c:
	* src/gthumb-window.c:
	* src/dlg-web-exporter.c:
	* libgthumb/preferences.c: use the new functions.

	* libgthumb/gconf-utils.c (eel_gconf_set_path)
	(eel_gconf_get_path): new functions, used to save paths in gconf
	substituting the home dir with a tilde.

2003-09-11  Andras Timar  <timar@gnome.hu>

	configure.in: Added "hu" to ALL_LINGUAS.

2003-09-01  Metin Amiroff  <metin@karegen.com>

	configure.in: Added "az" in ALL_LINGUAS.

2003-09-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.6 released ]

2003-08-31  Wang Jian  <lark@linux.net.cn>

	* configure.in: Added "zh_CN" to ALL_LINGUAS.

2003-08-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment.c: use the global get_exif_time function.

2003-08-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/exif-utils.c:
	* src/exif-utils.h:
	* src/gth-exif-data-viewer.c:
	* src/gth-exif-data-viewer.h: new files.

2003-08-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/file-utils.c (resolve_all_symlinks_uri): unref uri
	after appending the resolved uri.

2003-08-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* configure.in: add BlueStripes theme, remove Simple theme.

	* src/jpegutils/transupp.h: do not include config.h

2003-08-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-png-exporter.c (catalog_png_exporter_init): use
	PANGO_WRAP_WORD_CHAR instead of PANGO_WRAP_CHAR

	* libgthumb/preferences.c (pref_util_get_int_value)
	(pref_util_get_rgb_values): fix warning.

2003-08-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-web-exporter.c (thumb_loader_done): unref pixbuf
	before changing its value.

2003-08-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.5 released ]

2003-08-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_go_to_directory): restore
	interruption of the file list filling before changing folder.

2003-08-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/catalog.c (file_is_search_result): check if the line
	is void.

	* src/dlg-catalog.c (new_dir_cb): handle utf8 names.

	* src/catalog-web-exporter.c (save_image_preview_cb): fix condition

	* src/dlg-jpegtran.c (dlg_jpegtran, destroy_cb): update images
	manually instead of hoping that the monitor will work correctly.

	* src/dlg-convert.c (load_current_image)
	(save_image_and_remove_original): chack whether source and
	destination are the same image.

	* src/catalog-list.c (catalog_list_refresh): handle invalid names.

	* src/dlg-file-utils.c (dlg_files_copy):
	(dlg_files_delete):
	(folder_copy): use the right glade file here.

	* src/dir-list.c (dir_list_update_view): handle invalid names.

2003-08-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.h: remove not used variable.

	* many_files: use g_filename_* instead of g_locale_* where
	appropriate.

	* Makefile.am (EXTRA_DIST): remove gthumb.spec and gthumb.spec.in

	* configure.in: update required libraries.
	(GTHUMB_CFLAGS): remove bonobo-activation

2003-08-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-change-date.c (dlg_change_date): make the exif option
	insensitive if the image has no exif data.

	* components/image-viewer/viewer-control.h (_VIEWER_CONTROL):
	rename VIEWER_CONTROL to _VIEWER_CONTROL.

	* libgthumb/dlg-save-image.c (CONVERT_GLADE_FILE)
	(dlg_save_options): rename GLADE_FILE to CONVERT_GLADE_FILE.

	* src/gthumb-window.c (setup_toolbar_combo_button):
	* src/gthumb-ui.xml: use a custom tooltip for the back button.

2003-08-11  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-web-exporter.c (save_resized_image_cb)
	(export__copy_image__progress_update_cb, export__copy_image)
	(thumb_loader_done): fix bug #117668

	* libgthumb/gth-file-list.c (gth_file_list_update_next_thumb):
	ref/unref the current thumb file data.

2003-08-10  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb_preferences.glade:
	* src/gthumb_png_exporter.glade: fix bug #119546.

	* libgthumb/comments.c (save_comment): escape text before saving
	the comment (bug #119499).

2003-08-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.4 released ]

2003-08-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/jpegutils/Makefile.am (INCLUDES): add libghtumb dir.

	* src/gthumb-window.c (window_sync_menu_with_preferences): make
	this function static.

	* src/main.c (all_windows_update_viewer_options): remove this function.

	* libgthumb/preferences.c (pref_util_get_rgb_values):
	(pref_util_get_int_value): check null pointers.

	* libgthumb/file-utils.c (visit_rc_dir_data_new):
	* libgthumb/comments.c (crd_interrupt_cb, remove_comments_done)
	(comments_remove_old_comments_async): allow to interrupt this
	operation.

2003-08-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* data/albumthemes/Classic/image.xml.in:
	* data/albumthemes/ClassicClips/image.xml.in:
	* data/albumthemes/NeatRound/image.xml.in:
	* data/albumthemes/NeatSquare/image.xml.in: use a small size for
	the note.

	* src/commands-impl.c (folder_delete__continue): allow to not
	display the message again.

	* src/dlg-file-utils.c (file_delete_progress_update_cb)
	(files_delete__done): do not collect deleted files, notify changes
	only if deletion is completed, otherwise update current view.

	* data/albumthemes/*: update themes to conform to the new rules.

	* src/gthumb-window.c (item_toggled_handler):
	update toggle menu items correctly.

	* src/gthumb-window.c (initial_location_cb):
	* src/commands-impl.c (file_new_window_command_impl):
	* src/main.c (prepare_app, load_session):
	* libgthumb/preferences.h:
	* libgthumb/preferences.c (preferences_set_startup_location)
	(preferences_get_startup_location): do not save the temporary
	startup location in the gconf key (bug #119334).

	* a_lot_of_files: specify a default value when reading a gconf key.

2003-08-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-web-exporter.c (gth_parsed_doc_print, get_exif_tag):
	print a "-" when no exif data is available.
	(get_preview_filename): do not save the preview if it has the same
	dimensions of the image.

	* src/gthumb.schemas.in: add album header and footer, remove title.

2003-08-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-web-exporter.c: create a medium sized image preview
	to be used in the image.hml files (bug #117668).

	* src/gthumb_web_exporter.glade:
	* libgthumb/preferences.h:
	* src/dlg-web-exporter.c: Add header and footer for web albums,
	remove the album title.

	* src/albumtheme-private.c:
	* src/albumtheme-private.h:
	* src/albumtheme.y:
	* src/albumtheme.l:
	* src/catalog-web-exporter.c (gth_parsed_doc_print): allow
	to translate the text in the album files.

	* src/gthumb-ui.xml: remove the pixbuf arg.

	* src/catalog-png-exporter.c (get_hf_text): handle text in utf-8
	format.

2003-08-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* configure.in: fix bug #119135.

2003-08-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/albumtheme.l: allow names to contain numbers.

	* src/catalog-web-exporter.c (load_next_file, thumb_loader_done)
	(export__copy_image, export__copy_image__progress_update_cb)
	(save_resized_image_cb): load and save images one at a time,
	instead of loading them all and then saving.

	* data/albumthemes/Clean/index.gthtml:
	* data/albumthemes/Clean/image.gthtml:
	* data/albumthemes/Clean/lest_arrow.png:
	* data/albumthemes/Clean/right_arrow.png:
	* data/albumthemes/Clean/up_arrow.png: use images instead of text.

	* src/dlg-jpegtran.c (apply_tran): display the error with a dialog.
	* src/jpegutils/jpegtran.c (jpegtran): use a custom error handler.

	* src/catalog-web-exporter.c (export__copy_images)
	(export__save_images, image_data_new): rename images before
	copying them to the destination. (fixes bug #118098).

	* src/gthumb.schemas.in: fix message inconsistency (bug #118958).

2003-07-31  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-web-exporter.c (export): keep the title in utf-8 format
	(bug #118503).

2003-07-07  Abel Cheung  <maddog@linux.org.hk>

	* src/Makefile.am: gthumb.schemas -> schemas.in, and fixed typo.

2003-07-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_notify_update_layout_cb): update the
	layout after a timeout and do not destroy the main_pane widget.

	* libgthumb/image-loader.c (image_loader_load_from_image_loader):
	set uri to NULL after unreferencing

	* libgthumb/thumb-cache.c (cache_get_nautilus_cache_name): check
	whether uri_txt == NULL

	* src/dlg-file-utils.c (dlg_file_rename_series, dlg_files_delete)
	(folder_copy, dlg_files_copy): remove the monitor while processing
	files.

2003-07-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/preferences.h (PREF_MSG_CANNOT_MOVE_TO_TRASH):
	* src/dlg-file-utils.c (real_files_delete__continue)
	(_gtk_yesno_dialog_with_checkbutton_new): add a checkbutton to
	allow the user to not display the warning again.

2003-07-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (close__step5): do not save the
	visualizzation options if the window is maximized.

2003-07-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* data/albumthemes/Clean/*
	* configure.in: new album theme

2003-07-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/thumb-cache.c
	(nautilus_cache_remove_old_previews_async): handle interruption.
	(get_real_name_from_nautilus_cache): return NULL if an error occurred.

	* libgthumb/file-utils.c (directory_load_cb): use
	gnome_vfs_async_cancel when interrupted.

2003-07-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (dlg_image_prop_new):
	* src/gthumb-window.c (window_new): fix bug #117008

	* src/dlg-categories.c (add_category_cb): do not allow commans in
	category names (bug #117729)

2003-07-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/main.c (prepare_app):
	* src/gthumb-window.c (set_file_list__final_step_cb): do not
	create the "Command Line" catalog if the user specifies only one
	image, go to the image folder instead.

	* libgthumb/print-callbacks.c (print_info_unref): check null pointers.

2003-07-09  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* src/gthumb.schemas:
	fix type in schema.

2003-07-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.3 released ]

2003-07-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	* data/albumthemes/*/*.gthtml: updated to allow the user to
	personalize the captions.

	* src/gthumb-ui.xml: fix bug #116386.

	* libgthumb/gthumb-init.c (gthumb_init): preload some gconf dirs.

	* libgthumb/gtk-utils.c (_gtk_yesno_dialog_new)
	(_gtk_request_dialog_run): no title for dialogs.

	* libgthumb/preferences.h:
	* src/dlg-web-exporter.c (show_caption_dialog_cb)
	(caption_dialog__ok_clicked): load and save preferences.

2003-07-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gtk-utils.c (_gtk_message_dialog_new): remove the title.

	* src/albumtheme.y:
	* src/albumtheme.l:
	* src/catalog-web-exporter.c (get_var_value): added ability to
	personalize the album theme.

2003-06-28  Artur Flinta  <aflinta@cvs.gnome.org>

	* configure.in: Added "pl" to ALL_LINGUAS.

2003-06-19  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added "mk" to ALL_LINGUAS.

2003-06-18  Guntupalli Karunakar  <karunakar@freedomink.org>

	* configure.in: Added "ml" in ALL_LINGUAS.

2003-06-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment.c (ok_clicked_cb): fix bug #114679

	* src/catalog-png-exporter.c (paint_text): do dot translate text
	in utf format again.
	(set_item_caption): translate filenames to utf8 format.

	* libgthumb/print-callbacks.c (print_cb): allow to set custom
	paper size.

	* libgthumb/preferences.c: added more print preferences.

	* libgthumb/gconf-utils.c (eel_gconf_get_float): new function.

	* libgthumb/comments.c (comments_get_comment_filename): allow to
	unescape the path.

2003-06-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gthumb-canvas-text.c:
	* libgthumb/gthumb-canvas-text.h: removed files.

	* libgthumb/gnome-print-font-picker.c:
	* libgthumb/gnome-print-font-picker.h:
	* libgthumb/gnome-print-font-dialog.c:
	* libgthumb/gnome-print-font-dialog.h: new files.

	* libgthumb/print-callbacks.c (print_image_dlg): user can choose
	comment font; better preview; remember all settings; allow to set
	custom paper size.


2003-05-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (viewer_drag_data_received):
	* src/dlg-search.c (view_result_cb):
	* src/main.c (initialize_data): translate the catalog name to the
	locale encoding before saving it.

2003-05-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-web-exporter.c:
	* src/dlg-web-exporter.c: added ability to resize images before
	copying them to the destination.

	* data/albumthemes/*/index.gthtml:
	* data/albumthemes/*/image.gthtml: added Content-Type and
	Generator meta tags.

2003-05-06  Danilo Å egan  <dsegan@gmx.net>

	* configure.in: Added "sr" and "sr@Latn" to ALL_LINGUAS.

2003-05-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.2 released ]

2003-05-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (key_press_cb): use control-1/2/3 to set the
	preview content.

2003-05-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb_print.glade: display size in millimeters

	* libgthumb/print-callbacks.c (print_image_dlg): add A3, A5
	types.

2003-04-30  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/print-callbacks.c (print_image_dlg): new print dialog,
	load and save user preferences.

	* src/fullscreen.c (fs_motion_notify_cb): do not show the toolbar
	if the mouse is moved "slowly".

	* libgthumb/gth-image-list.c (gth_image_list_motion_notify):
	ignore kinky event->y values (a gtk bug ?).

2003-04-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_update_statusbar_zoom_info): hide
	the zoom info frame when the image is not visible.
	(window_update_sensitivity): do not allow to edit the image if the
	image is not visible.

	* src/gthumb.schemas:
	* libgthumb/preferences.h (PREF_SEARCH_RECURSIVE):
	* src/dlg-search.c (search_clicked_cb, dlg_search_ui): save the
	'Include sub-folders' option.

	* src/fullscreen.c (hide_mouse_pointer_cb): do not hide the
	toolbar if the mouse pointer is over it.

	* libgthumb/gth-image-list.c (gth_image_list_set_image_comment):
	(gth_image_list_set_image_text):
	recalc text/comment size.

	* src/fullscreen.c (fullscreen_stop): restore correct visibility.
	(image_key_press_cb): keep in sync comment visibility in
	fullscreen and window mode.

2003-04-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/utf8-fnmatch.c (g_utf8_fnmatch): added a utf8 compatible
	fnmatch function.

	* src/dlg-search.c (pattern_matched_by_keywords, match_patterns):
	use utf8_fnmatch.

	* src/dlg-rename-series.c (update_list): substitute ! with image
	size.

2003-04-29  Kang Jeong-Hee  <Keizi@mail.co.kr>

	* src/gthumb-window.c (window_new): #ifdef HAVE_LIBEXIF added.

2003-04-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_update_infobar)
	(window_update_title): use "[modified]" instead of "*"

	* src/dlg-posterize.c (dlg_posterize):
	* src/dlg-color-balance.c (dlg_color_balance):
	* src/dlg-hue-saturation.c (dlg_hue_saturation):
	* src/dlg-brightness-contrast.c (dlg_brightness_contrast):
	remember whether the image was modified or not before calling the
	filter.

	* libgthumb/preferences.h:
	* src/gthumb.schemas: added preview state keys.
	* src/gthumb-window.c (window_new, close__step5): load and save
	the preview state.
	(set_button_active_no_notify, preview_image_button_cb)
	(preview_data_button_cb, preview_comment_button_cb, window_new):
	use toggle buttons and keep the buttons state in sync with the
	preview content.
	(info_bar_clicked_cb): fix the widget_to_focus logic.

	--

	* src/gthumb-window.c (set_preview_content)
	(preview_image_button_cb, preview_data_button_cb)
	(preview_comment_button_cb): added ability to change the preview
	content.

	* libgthumb/gth-image-list.c (gth_image_list_item_set_pixbuf): use
	the gtk theme background color as check color.
	(paint_item): paint the focus on the thumbnail if the filename is
	not displayed.

	* libgthumb/preferences.c (pref_get_view_mode): new function.

	* libgthumb/gth-file-list.c (gth_file_list_init): use
	pref_get_view_mode to get the view mode.
	(gth_file_list_set_list): clear before setting the list

	* src/commands-impl.c (alter_image_normalize_contrast_command_impl):
	* src/commands-impl.c (alter_image_stretch_contrast_command_impl):
	* libgthumb/async-pixbuf-ops.c (_gdk_pixbuf_iterate)
	(_gdk_pixbuf_normalize_contrast):
	(_gdk_pixbuf_stretch_contrast): implement normalize and stretch
	contrast.

	* src/commands-impl.c (file_save_command_impl):
	* libgthumb/dlg-save-image.c (dlg_save_image):
	* components/image-viewer/ui.c (verb_save_image): load the image
	after saving it.

2003-04-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-categories.c (cancel_clicked_cb): always save the categories.

2003-04-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.c (create_overwrite_dialog): use zoom_quality
	not zoom_change.

	* libgthumb/file-utils.c (application_get_command): do not escape
	the command (bug #109619).

2003-04-06  Paul Duffy <dubhthach@frink.nuigalway.ie>

	* configure.in: Added ga (irish) to ALL_LINGUAS

2003-04-06  Christian Neumair  <chris@gnome-de.org>

	* .cvsignore: Updated.
	* src/commands-impl.c: UTF-8 escaped Copyright entry in about window.

2003-04-03  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment.c (dlg_edit_comment):
	* src/dlg-image-prop.c (update_comment): set the cursor at the top

	* libgthumb/thumb-cache.c (cache_get_nautilus_cache_name):
	* libgthumb/comments.c (comments_get_comment_dir)
	(comments_get_comment_filename): if a path cannot be resolved use
	the user specified one, instead of returning NULL.

	* src/gthumb_preferences.glade:
	* src/dlg-preferences.c: remove the check type and size options,
	just use good default values, though they can still be changed via
	gconf.

	* src/gthumb_comments.glade:
	* src/dlg-comment.c (dlg_edit_comment): humanize the comment dialog.

2003-04-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-file-list.c (gth_file_list_prev_image)
	(gth_file_list_next_image): skip broken images correctly.

2003-03-28  Dmitry G. Mastrukov  <dmitry@taurussoft.org>

	* configure.in: Added Belarusian to ALL_LINGUAS.

2003-03-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.c (copy_next_file, folder_copy):
	* src/commands-impl.c (folder_rename, folder_copy__response_cb):
	* libgthumb/comments.h:
	* libgthumb/comments.c (comments_get_comment_filename)
	(comments_get_comment_dir): save comments dereferencing symbolic
	links. (bug #109018)

2003-03-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (auto_load_library_cb,
	catalog_list_drag_motion): added auto load for catalog libraries.

2003-03-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.h:
	* src/gthumb-window.c (auto_load_cb, dir_list_drag_motion)
	(window_new, close__step5): auto load a folder when hovering on
	it during a 'drag & drop' operation, patch from
	Jason Tackaberry <tack@auc.ca>

2003-03-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.1 released ]

2003-03-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-rename-series.c (get_image_date, update_list): add
	ability to insert image date

2003-05-06  Yuriy Syrota <rasta renome.rovno.ua>

	* configure.in: Added "uk" (Ukrainian) to ALL_LINGUAS.

2003-03-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/pixbuf-utils.c (_gdk_pixbuf_save_as_jpeg): use bpp
	instead of 3.

	* src/albumtheme-private.c (gth_expr_eval): fix problem with unary
	operations.

2003-05-06  Duarte Loreto <happyguy_pt@hotmail.com>

	* configure.in: Added "pt" to ALL_LINGUAS.

2003-03-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.h (GCONF_NOTIFICATIONS):
	* src/gthumb-window.c (window_new): update back button style on
	the fly.

	* src/e-combo-button.c (e_combo_button_set_style): s/icon/icons/

2003-02-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.0 released ]

2003-02-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-loader.c (load_image_thread): check if path != NULL

	* src/gthumb-window.c (window_show_prev_image)
	(window_show_next_image): reinitialize the slideshow timer when
	the user manually move to another image.

2003-02-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* many files: added ability to change image list view.

2003-02-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/file-utils.c (resolve_all_symlinks): unref uri

2003-02-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* data/albumthemes/*: added some web album themes.

	* src/albumtheme.y:
	* src/albumtheme.l:
	* src/albumtheme-private.c:
	* src/albumtheme-private.h:
	* src/catalog-web-exporter.c:
	* src/catalog-web-exporter.h:
	* src/dlg-web-exporter.c:
	* src/gthumb-window.c: implement a web album exporter.

2003-02-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.c (file_progress_update_cb)
	(file_delete_progress_update_cb, folder_progress_update_cb)
	(real_files_delete__continue2): return FALSE on error, do not
	display the error dialog when the operation is interrupted.

	* src/dlg-convert.c (loader_done): use GTK_STOCK_NO instead of
	GTK_STOCK_CANCEL.

2003-02-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dir-list.c (dir_list_update_icon_theme):
	* src/gthumb-window.c (window_notify_update_icon_theme):
	* src/main.c:
	(theme_changed_cb, initialize_data, release_data): update the icon
	theme on the fly.

2003-02-03  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-file-list.c (gth_file_list_prev_image)
	(gth_file_list_next_image):
	* src/gthumb-window.c (window_show_next_image)
	(window_show_prev_image): slideshow include only selected images
	when more than one image is selected (bug #99093).

	* src/gthumb.schemas:
	* src/gthumb-window.c (window_new, pref_black_background_changed)
	* src/fullscreen.c (fullscreen_stop, fullscreen_start): added a
	black_background option to always use a black background for the
	image viewer.

2003-02-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-image-list.c (gth_image_list_realize): use italic
	style for comments.

	* libgthumb/catalog-png-exporter.[ch]: moved to src/

	* libgthumb/gthumb-module.c:
	* libgthumb/gthumb-module.h:
	* src/Makefile.am:
	* src/commands-impl.c: compile some tools as dynamic modules, and
	load them only when needed.

2003-01-30  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-image-list.c (paint_item): do not paint the item
	if the position is not computed yet.

	* libgthumb/print-callbacks.c (print_image_dlg): ported to
	libgnomeprint 2.2

2003-01-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-image-list.c:
	* libgthumb/gth-image-list.h: new super fast widget.

	* src/auto-completion.c (auto_compl_show_alternatives):
	* src/bookmark-list.c (bookmark_list_set):
	* src/main.c (get_default_folder_pixbuf_size):
	* src/dir-list.c (dir_list_refresh_continue):
	* src/main.h: do not hardcode the icon size, use the theme setting
	instead.

	* src/main.c (get_folder_pixbuf, get_folder_icon_path): use a
	gnome_icon_theme object to get the folder icon.

	* src/dlg-file-utils.c (folder_copy):
	* src/commands-impl.c (folder_rename, folder_copy__response_cb): cannot
	update the thumbnail cache any more.

	* libgthumb/thumb-cache.h:
	* libgthumb/thumb-cache.c: use the new thumbnail system.

2003-02-21  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added Catalan (ca) to ALL_LINGUAS

2003-01-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.0.1 released ]

2003-01-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-list.c (image_list_clear): free the list.

2003-01-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gnome-canvas-thumb.c (render_to_pixmap): cache the
	last rendered pixbuf.

2003-01-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/file-data.c (file_data_set_path): do not free
	fd->utf8_name here.

2003-01-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.0.0 released ]

2003-01-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gnome-canvas-thumb.c:
	* libgthumb/gnome-canvas-thumb.h:
	* libgthumb/image-list.c:
	* libgthumb/image-list.h: use only the pixmap and remove the
	pixbuf field.

2003-01-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/catalog-png-exporter.c (catalog_png_exporter_interrupt)
	(catalog_png_exporter_init, load_next_file):
	* src/dlg-png-exporter.c (dlg_exporter): fix #103825 and #103826

	* src/gthumb-window.c (window_set_file_list_continue): update
	sensitivity after setting the file list (fix #103819).

2003-01-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* doc/C/ficures/*.png: updated images.

	* doc/C/gthumb.xml: updated manual.

2003-01-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-jpegtran.c (load_current_image): make rotation buttons
	not sensitive while loading the image.

	* src/commands-impl.c (edit_duplicate_file_command_impl):
	duplicate all images not only the first one.

	* libgthumb/gthumb-init.c (ensure_directories_exist): remove the
	old config file if present.

2003-01-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.h:
	* src/dlg-file-utils.c: when moving to trash overwrite without asking.

	* configure.in: require libexif >= 0.5.8

	* src/jpegutils/jpeg-marker.c:
	* src/jpegutils/jpeg-marker.h:
	* src/jpegutils/jpeg-data.c:
	* src/jpegutils/jpeg-data.h: new files, used to save jpeg data.

	* src/dlg-jpegtran.c (swap_xy_exif_fields, swap_fields): update
	exif information after rotating an image.

2003-01-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-jpegtran.c (help_cb): add the help button.

	* doc/C/gthumb.xml: updated.

2003-01-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	* gthumb.desktop.in: added StartupNotify, X-GNOME-Bugzilla-* and
	X-GNOME-DocPath fields.

	* libgthumb/file-list.h:
	* libgthumb/file-list.c (update_thumbnails_cb): interrupt
	thumbnails creation before starting it again.

2003-01-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 1.108 released ]

2003-01-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/file-list.c (add_list_in_chunks): restore thumbnail
	creation when interrupted.

2003-01-01  Artis Trops  <hornet@navigator.lv>

	* configure.in: Added Latvian (lv) to ALL_LINGUAS.

2002-12-31  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Add da and zh_TW to ALL_LINGUAS

2002-12-31  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (update_exif_data): display exif tags in a
	better order and avoid duplicates.

2002-12-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/file-data.c (file_data_update):
	(file_data_new): update name and utf8_name fields correctly.

	* src/gthumb-ui.xml: s/Manual/Content/

2002-12-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (update_general_info): fixed bug, patch
	from Jason Tackaberry <tack@auc.ca>

2002-12-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fnmatch.[ch]: removed.

	* libgthumb/glib-utils.c:
	* libgthumb/search.c:
	* libgthumb/comments.c:
	* libgthumb/catalog-png-exporter.c:
	* libgthumb/file-list.c:
	* libgthumb/file-data.c:
	* libgthumb/gtk-utils.c:
	* libgthumb/gthumb-text-item.c:
	* libgthumb/image-list.c:
	* libgthumb/print-callbacks.c (print_image_dlg): do not convert
	comments in locale format, handle them in utf8 format instead.

	* libgthumb/file-list.c:
	(gth_file_list_update_next_thumb): update only visible thumbnails.

2002-12-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 1.107 released ]

2002-12-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-list.c (gil_relayout_images_at): use always the
	same function to compute the max height.

2002-12-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* README: updated.

	* libgthumb/image-loader.c: added some missing locks.

	* libgthumb/image-list.c (truncate_comment_if_needed): handle in a
	special way the	common case in which the comment is void.

2002-12-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml: use a shorter label for the 'slide show'
	toolbar item.

2002-12-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (edit_delete_comment_command_impl): free
	allocated data.

2002-12-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.c (folder_copy): do not check dest_dir when
	the operation is DELETE.

	* src/dir-list.c (dir_list_get_row_from_path): rename a variable
	to avoid ambiguity.

2002-12-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (help_about_command_impl): remove 'The'

	* src/dlg-image-prop.c (dlg_image_prop_new): use the 'unknown'
	pixbuf when the image cannot be loaded.

2002-12-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (update_general_info): use a GtkImage widget
	instead of the ImageViewer widget.

	* src/gthumb-window.c (window_close): remove the monitor before
	closing the window.

2002-12-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (dlg_image_prop_update, update_title):
	always update the title.

2002-12-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* components/image-viewer/GNOME_GThumb_Viewer.server.in.in: added
	x-tga to the supported mime type list.

	* libgthumb/dlg-save-image.c:
	* libgthumb/dlg-save-image.h: moved from src to libgthumb

	* components/image-viewer/ui.c (verb_save_image): added 'Save
	Image' function.

2002-12-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c:
	* src/gthumb-window.h:
	* src/commands-impl.c:
	* src/dlg-posterize.c:
	* src/dlg-brightness-contrast.c:
	* src/dlg-color-balance.c:
	* src/dlg-hue-saturation.c:
	* libgthumb/async-pixbuf-ops.c:
	* libgthumb/async-pixbuf-ops.h:
	* libgthumb/gth-pixbuf-op.h:
	* libgthumb/gth-pixbuf-op.c: make image operations asynchronous
	and cancellable (bug #99543).

2002-12-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/main.c (all_windows_update_browser_options): check
	PREF_SHOW_COMMENTS not PREF_SHOW_THUMBNAILS.

	* src/commands-impl.c (help_about_command_impl): make copyright
	translatable.

2002-12-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (go_to_directory__step2): interrupt thumb
	list setting before changing directory.

	* libgthumb/gnome-canvas-thumb.c (RECALC_BOUNDS):
	* libgthumb/image-list.c (IMAGE_LINE_HEIGHT, STRING_IS_VOID): make
	some functions 'inline' functions.

	* src/dlg-file-utils.c (copy_next_file): copy metadata correctly.

	* libgthumb/catalog-png-exporter.c (image_data_free):
	* src/dir-list.c (dir_list_get_row_from_path): memory leaks fixed

2002-12-03  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/comments.c (comments_save_comment)
	(comments_save_categories):
	(comments_save_comment, comments_save_comment_non_null): fix
	memory leaks.

	* src/gth-folder-selection-dialog.c
	(gth_folder_selection_destroy): destroy recents data.

	* src/dlg-image-prop.c (dlg_image_prop_close): new function used
	to close the properties dialog.

	* libgthumb/image-loader.c (image_loader_stop): emit a signal only
	if there is an operation to stop.

	* src/gthumb-window.c (close__step5): NULL-ify
	window->image_prop_dlg and window->popup_menu after destroying them.

	* src/gthumb_search.glade: use sentence capitalization where
	appropriate.

2002-12-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment: make "from exif data" option insensitive if no
	exif data is available.

	* src/gthumb_comments.glade: make the dialog bigger.

	* src/dlg-image-prop.c (dlg_image_prop_update): update a tab only
	when needed.

	* libgthumb/comments.c (comments_load_comment): check NULL pointer.

	* src/gthumb_comments.glade:
	* src/dlg-comment.c: changed dialog layout.

2002-12-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gth-folder-selection-dialog.c (folder_sel__response_cb):
	move last folder to the top.

	* libgthumb/image-list.c (image_get_view_mode): check whether the
	string is NULL (attempt to fix #100031)

2002-11-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-search.c (cache_dir): ignore the .nautilus folder when
	searching.

	* src/dlg-file-utils.c (copy_next_file, folder_copy): fix memleak.

2002-11-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 1.106 released ]

2002-11-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (key_press_cb): popup file context menu when
	the user press Shift-F10.

	* src/gtkorientationbox.c: remove useless variables.

	* src/jpegutils/transupp.c (SAVE_MARKERS_SUPPORTED): save markers.

	* src/gtkorientationbox.c:
	* src/gtkorientationbox.h:
	* src/gthumb-window.c (window_notify_update_toolbar_style):
	* src/e-combo-button.c (e_combo_button_set_style): keep the
	combo button style in sync with the toolbar style.

2002-11-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.c (copy_item__continue1): arifixed #99430
	(dlg_check_folder): fixed #99629

	* src/gth-folder-selection-dialog.c (list_view_activated_cb):
	fixed bug.

	* src/dlg-search.c (directory_load_cb, cache_dir): fix bug #99424

	* src/gthumb-window.c (viewer_drag_data_received): create a
	catalog when files are dropped into the viewer.

	* gthumb.spec.in : updated

	* src/gthumb-window.c (dir_list_button_press_cb)
	(dir_list_button_release_cb, catalog_list_button_press_cb)
	(catalog_list_button_release_cb): fix bug #99570

	* src/dlg-file-utils.c (folder_copy): fix bug #99577

2002-11-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gth-folder-selection-dialog.c: added a recent folders list.

	* src/gthumb-window.c (dir_list_drag_data_received)
	(dir_list_drag_motion, dir_list_drag_leave)
	(location_entry_drag_data_received)
	(catalog_list_drag_data_received, catalog_list_drag_motion)
	(catalog_list_drag_leave, window_new): implements moving files and
	folder via drag & drop.

	* src/dlg-file-utils.h:
	* src/dlg-file-utils.c (dlg_check_folder): new function to check
	folder existence and permissions.  If the folder does not exists
	the user is asked whether he wants to create it.

	* src/dlg-png-exporter.c (export):
	* src/commands-impl.c (folder_copy__response_cb):
	* src/dlg-file-utils.c (file_move_response_cb, file_copy_response_cb):
	use the new function.

2002-11-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gthumb-histogram.c (gthumb_histogram_calculate):
	reset values when the pixbuf is NULL.

	* src/gthumb-window.c (pref_click_policy_changed):
	* src/catalog-list.c (catalog_list_update_underline): update the
	catalog list when the click policy changes.

	* libgthumb/catalog-png-exporter.c:
	* libgthumb/catalog.c:
	* src/dlg-catalog.c:
	* src/commands-impl.c:
	* src/gthumb-window.c:
	* src/dlg-png-exporter.c:
	* src/dlg-file-utils.c:
	* src/gthumb-ui.xml:
	* src/dlg-save-image.c: fixed bug #99427, #99430, #99431, #99433.

	* libgthumb/thumb-cache.c (nautilus_cache_remove_old_previews_async):
	* libgthumb/comments.c (comments_remove_old_comments_async):
	fix dialog message (bug #99135).

	* src/dlg-file-utils.c (create_overwrite_dialog): added an
	option to specify a new name in the overwrite dialog.

2002-11-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-convert.c (save_image_and_remove_original):
	* src/dlg-jpegtran.c (apply_tran): notify changes to all windows.

	* src/gthumb-window.c:
	* src/commands-impl.c:
	* src/dlg-file-utils.c:
	* src/dlg-file-utils.h: implement "Move to Trash" files and
	folders, "Copy" and "Move" folders. Reimplement copying and moving
	of files using gnome-vfs.

2002-11-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/e-combo-button.c (paint): restore the old style.

	* src/gthumb-ui.xml:
	* src/gthumb-window.c (setup_toolbar_combo_button): use the combo
	button for the "Back" button, remove the "Edit image" combo
	button, add an "Image" menu and move the "Go" menu in the "View" menu.

	* libgthumb/gthumb-histogram.c: new file.
	* libgthumb/pixbuf-utils.c (_gdk_pixbuf_adjust_levels):
	Added "equalize histogram" and "auto adjust levels" operations.

	Patch from Jason Tackaberry <tack@auc.ca>

2002-11-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-bookmarks.c (dlg_edit_bookmarks_update): fix bug #99121.

	* src/gthumb-window.c (image_requested_error_cb): set the viewer void
	is the image could not be loaded.

	* src/gth-folder-selection-dialog.c
	(gth_folder_selection_construct): let the folder entry activates
	the default action.

	* src/*.glade: bug #99044 again.

	* src/main.c:
	* src/main.h:
	* src/commands-impl.c (file_exit_command_impl)
	(folder_copy__response_cb): fix bug #99140
	* src/gthumb-window.c (close__step5): fix bug #99151.

2002-11-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (key_press_cb, viewer_key_press_cb): popup a
	context menu when the user press Shift-F10.

	* src/gthumb-ui.xml: add ellipses to "Rename"

	* src/gth-folder-selection-dialog.c (file_sel_ok_clicked_cb): do
	not convert the folder name to utf8.

	* src/gthumb-window.c (window_update_sensitivity):
	* src/dlg-jpegtran.c (dlg_jpegtran): fix bug #98755

	* src/gth-folder-selection-dialog.c (gth_folder_selection_construct):
	* src/*.glade: fix bug #99044.

	* src/gthumb-window.h:
	* src/dlg-bookmarks.c (dlg_edit_bookmarks):
	* src/dlg-comment.c (dlg_edit_comment):
	* src/dlg-categories.c (dlg_categories): fix bug #99045

	* src/dlg-open-with.c (open_with_cb)
	(recent_list_selection_changed_cb, app_list_selection_changed_cb):
	fix bug #99032

	* src/gthumb-window.c (rename_subdir): fix bug #99037.

	* src/gthumb-ui.xml: add ellipses and underscores (bug #99041).

	* libgthumb/file-utils.c (escape_underscore):
	* src/gthumb-window.c (add_bookmark_menu_item): fix bug #99042.

	* src/commands-impl.c (folder_move__response_cb): fix bug #99036.

	* src/gthumb-window.c (file_list_double_click_cb, window_new):
	* libgthumb/image-list.c (selection_many_image_event): fix bug #99028.

2002-11-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.c (dlg_folder_copy): new function.

	* src/commands-impl.c (folder_move__response_cb): use
	dlg_folder_copy to move the folder if destination is not on the
	same file system.

	* src/gthumb-window.c: reorganized in order to avoid forward
	declarations.

	* src/gthumb-window.c (add_history_item): remove duplicated
	locations before adding a new one.

	* libgthumb/bookmarks.c (bookmarks_remove_all_instances): new function.
	* libgthumb/bookmarks.h: remove useless function
	bookmarks_add_with_prefix.

	* src/main.c (initialize_data): use absolute paths.

2002-11-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-search.c (search_images_async): fixed search_comments
	condition.

	* libgthumb/gtk-utils.c (_gtk_message_dialog_new):
	* src/gth-folder-selection-dialog.c (gth_folder_selection_construct):
	* src/*.glade: make dialogs more HIG compliant.

2002-11-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/e-combo-button.c (paint): paint the combo button as a single
	button.

	* src/dlg-search.c (search_images_async): if the search criteria
	 include comment data just search in the comments tree.

	* libgthumb/bookmarks.c (bookmarks_add): added a parameter to choose
	whether	to append or to prepend an item to the bookmarks.
	This is usefull because	bookmark items are appended while history
	items are prepended.

	* src/commands-impl.c (edit_current_edit_comment_command_impl)
	(edit_current_edit_categories_command_impl): new functions to edit
	current image comment and categories.

	* src/fullscreen.c (image_key_press_cb):
	* src/gthumb-window.c: use the above functions.

	* libgthumb/gthumb-stock.c: added the edit_image stock image.

	* src/gthumb-window.c (window_enable_thumbs): change
	View_Thumbnail command state if needed.
	(window_update_sensitivity)
	(combo_button_activate_default_callback)
	(setup_toolbar_combo_button, window_new):
	* src/gthumb-ui.xml: add to the viewer toolbar a combo button with
	the editing commands.

	* src/e-combo-button.c:
	* src/e-combo-button.h: the combo button implementation, taken
	from evolution.

	* src/gthumb-ui.xml: add the 'color balance' command to the
	Edit->Image menu.

2002-11-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (stop__step2): set changing_directory to FALSE
	(stop__step3): set setting_file_list to FALSE

	* src/commands-impl.c (edit_delete_comment_command_impl): remove
	only the comment not the keywords.

	* src/gthumb-window.c (window_update_sensitivity): disable the
	slideshow if no image is present.

	* src/gthumb-ui.xml: make all labels translatable.

2002-11-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gth-folder-selection-dialog.c:
	* src/gth-folder-selection-dialog.h: A folder selection widget.

	* src/commands-impl.c (folder_move_response_cb):
	* src/commands-impl.c (folder_move):
	* src/dlg-file-utils.c (file_move_response_cb, dlg_file_move)
	(file_copy_response_cb, dlg_file_copy): Use the new widget.

	* libgthumb/file-list.c:
	* src/dlg-scale-image.c:
	* src/dlg-posterize.c:
	* src/dlg-jpegtran.c:
	* src/dlg-image-prop.c:
	* src/dlg-hue-saturation.c:
	* src/dlg-convert.c:
	* src/dlg-color-balance.c:
	* src/dlg-brightness-contrast.c: do not include
	gnome-vfs-mime-sniff-buffer.h

2002-11-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/bookmark-list.c (bookmark_list_new): set rules hint to false.

2002-11-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 1.105 released ]

2002-11-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/Makefile.am (DIST_SUBDIRS): add jpegutils to DIST_SUBDIRS

	* src/gthumb-window.c (pref_show_thumbnails_changed): use window
	not window->file_list.

2002-11-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (file_selection_changed_cb): update the
	statusbar after a timeout to reduce the number of updates.

	* components/image-viewer/GNOME_GThumb_Viewer.xml.in:
	s/Black and White/Desaturate/

2002-11-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fullscreen.c (fullscreen_stop): restore window position.

2002-11-10  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in (ALL_LINGUAS): Added "no".

2002-11-10  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml:
	* libgthumb/catalog.c (delete_catalog_dir): fixed some string typos.

2002-11-09  Hasbullah Bin Pit  <sebol@ikhlas.com>

	* configure.in: Added ms to ALL_LINGUAS.

2002-11-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/file-list.c (add_list_in_chunks)
	(add_list__get_file_info_done_cb)
	(set_list__get_file_info_done_cb): Add images in chunks to make
	the list more responsive.

	* src/gthumb-window.c (window_load_image): check whether
	filename == window->image_path

2002-11-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gthumb-init.c (gthumb_init): use functions to
	migrate to the new directories.
	(migrate_to_new_directories, migrate_file_from_to)
	(migrate_dir_from_to): new functions

	* src/dlg-convert.c:
	* src/commands-impl.c:
	* src/gthumb-window.c: Fixed some unicode/i18n bugs.

	* src/dlg-save-image.c (dlg_save_image): use image filename as
	default value.

	* src/dlg-change-date.c: added "change date" tool.

2002-11-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb.schemas: use system style as default toolbar style.

	* src/gthumb-ui.xml: add labels to toolbar

	* libgthumb/gnome-canvas-thumb.c (gnome_canvas_thumb_draw): make
	thumbnails white, and paint the selection as a colored frame.

2002-11-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/main.c: Added SM support.

2002-11-05  Stanislav Brabec  <sbrabec@suse.cz>

	* configure.in: Added cs to ALL_LINGUAS.

2002-11-03  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (add_bookmark_menu_item):
	* libgthumb/bookmarks.c:
	* src/dlg-bookmarks.c: do not sort bokkmarks, let the user modify
	the bookmarks order instead.

	* libgthumb/bookmarks.c (get_menu_item_name): use relative path
	for folders under the home dir, full path for other folders and
	relative path for catalogs.

2002-10-31  Christian Neumair  <chris@gnome-de.org>

	* gthumb.desktop.in: Moved text from generic to name line so that gnome
	displays it in its menu.

2002-10-31  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/icons/Makefile.am (EXTRA_DIST): remove unknown.xpm

	* src/dlg-scale-image.c: implement unit change.
	(ok_cb): save options.

	* src/dlg-save-image.c (file_save_ok_cb): handle overwrite.

	* libgthumb/catalog.c (error_on_saving): s/file/catalog/g

	* src/gthumb-ui.xml: Fixed duplicated mnemonics again.
	Use 'delete' for files and 'remove' for comments and catalogs.

	* src/dlg-rename-series.c:
	* src/dlg-convert.c: save options.

	* libgthumb/preferences.h:
	* libgthumb/pixbuf-utils.c (_gdk_pixbuf_save_as_tiff):
	* src/dlg-save-image.c (dlg_save_options): added resolution option
	to the tiff saver.
	(dlg_save_options): save options.

	* configure.in: set GETTEXT_PACKAGE to gthumb

2002-10-30  Christian Neumair  <chris@gnome-de.org>

	* src/gthumb-ui.xml: Fixed some duplicate mnemotics.

2002-10-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml: make dialogs more HIG compliant.

	* src/gthumb-window.c (window_notify_catalog_new):
	* src/main.c (all_windows_notify_catalog_new):
	* src/commands-impl.c (edit_current_catalog_new_command_impl):
	added 'New Catalog' command.

	* libgthumb/pixbuf-utils.c: added copyright notes.

2002-10-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* added a simple image editor.

2002-10-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (hide_sidebar_idle, file_button_press_cb):
	make double-clicking on a thumbnail hide the sidebar. Use a
	timeout to avoid that the viewer gets the button press event.

	* src/dlg-image-prop.c (dlg_image_prop_new):
	* src/gthumb.glade: define the image properties window as a window
	not as a dialog.

	* libgthumb/preferences.h:
	* libgthumb/file-list.c (file_list_update_thumbs):
	* libgthumb/thumb-loader.c (thumb_loader_init): add a gconf key
	for the max file size over which thumbnails are not generated.

	* libgthumb/thumb-loader.c (thumb_loader_start): emit DONE instead
	of ERROR when the file size exceeds the limit.

2002-10-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-catalog.c (dlg_move_to_catalog_directory)
	(dlg_add_to_catalog): center dialog on parent.

	* src/dlg-image-prop.c:
	* src/gthumb.glade: make the properties dialog navigable with the
	keyword.

2002-10-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (folder_rename): remove the VFS monitor before
	renaming a folder.

2002-10-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml: add stock icon to the Go_Stop command.

	* src/gthumb-window.c (stop__step5, window_update_sensitivity):
	update the Go_Stop command sensitivity when appropriate.


	* src/gthumb-window.c (item_toggled_handler, window_new)
	* src/gthumb-window.h: add notifications for
	PREF_UI_TOOLBAR_VISIBLE and PREF_UI_STATUSBAR_VISIBLE preferences.

2002-10-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/catalog-png-exporter.c (paint_frame): remove special dirs
	from the destination directory before getting the relative path.

2002-10-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* Ported to gconf.

2002-10-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/jpegutils/*: New files. Implement an internal jpegtran if
	we have libjpeg.

	* src/dlg-jpegtran.c (apply_tran): use the internal jpegtran if
	available.

2002-10-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 1.104 released ]

2002-09-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-jpegtran.c (apply_tran): escape image path.

	* src/gthumb-ui.xml: use a different popup menu when in fullscreen
	mode.

	* libgthumb/gthumb-slide.c (draw_shadow): make the shadow shaded.

2002-09-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-loader.c (load_image_thread): Use a single
	thread for loading images instead of creating a thread each time
	an image must be loaded.

2002-09-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c: Added "duplicate image" operation.

2002-09-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-loader.c: Use a thread to load images with the
	gdk_pixbuf_animation_new_from_file function, this let us getting
	rid of the gdk_pixbuf_loader which is slower and buggy.

2002-09-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/md5.c:
	* libgthumb/md5.h: new files, taken from textutils.

	* src/dlg-duplicates.c: do not use the md5sum external command,
	use the internal implementation instead.

2002-09-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/catalog-png-exporter.c (load_next_file):
	* src/dlg-png-exporter.c (export_info): display some usefull info
	while making the index.

2002-09-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment.c (date_exif_clicked_cb): added ability to
	import the date from the EXIF data.

	* src/dlg-duplicates.c (find_checksum_command): check whether the
	user have sha1sum or md5sum.

2002-09-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* components/catalog-view/*: catalog viewer.

	* src/dlg-duplicates.c:
	* src/dlg-duplicates.h: implements the "find duplicates" tool.

2002-09-11  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (dlg_image_prop_new): always define
	scrolled_window and i_notebook.

2002-08-31  Paolo Bacchilega  <paolo.bacch@tin.it>

	* components/image-viewer/viewer-nautilus-view.c (viewer_nautilus_view_load_location): unescape the location before asking the Stream.

2002-08-30  Paolo Bacchilega  <paolo.bacch@tin.it>

	* components/image-viewer/viewer-control.c:
	* components/image-viewer/viewer-control.h:
	* components/image-viewer/viewer-nautilus-view.c:
	* components/image-viewer/viewer-nautilus-view.h:
	* components/image-viewer/ui.c:	Added "Print" command to the control.

	* libgthumb/print-callbacks.c:
	* libgthumb/print-callbacks.h: moved here so the control can use it.

	* src/fullscreen.c (fullscreen_new): Use the old way of doing
	fullscreens if the WM do not support WM_STATE_FULLSCREEN, and if this
	is the case disable the ability of deleting images and editing
	comments.

2002-08-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_update_infobar): remove useless tooltip.

	* libgthumb/image-viewer.c (image_viewer_size_allocate): skip
	size_changed signal emition when changing frame.

	* src/dlg-comment.c (ok_clicked_cb): store even hour:min:sec

	* src/fullscreen.c (get_file_info): add misc file information.
	(show_comment_on_image): improve comment layout.

	* libgthumb/gthumb-canvas-text.c:
	* libgthumb/gthumb-canvas-text.h:
	* src/print-callbacks.c:
	* src/gthumb_print.glade2: Optionally print the comment.

2002-08-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-list.c:
	* libgthumb/image-viewer.c: s/uint/guint/g

	* src/commands-impl.c (view_image_prop_command_impl):
	* src/commands-impl.h:
	* src/gthumb-window.c (image_loaded_cb):
	* src/gthumb-window.h:
	* src/dlg-image-prop.c: Image properties dialog.  Display image
	properties and EXIF data.

2002-08-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/preferences.c (preferences_load): changed default
	transparency type to TRANSP_TYPE_NONE.

	* src/gthumb-window.c (window_sync_menu_with_preferences): new
	function.

	* src/main.c (all_windows_update_viewer_options): sync menu with
	preferences.

	* src/gthumb-window.c (window_update_title): make the title HIG
	compliant.

2002-08-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fullscreen.c (fullscreen_start): hide the main window.
	(fullscreen_stop): show the main window.

2002-08-10  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fnmatch.c:
	* src/fnmatch.h:
	* src/dlg-search.c:
	* configure.in:
	* acinclude.m4:
	* Makefile.am : Cope with systems that do not have FNM_CASEFOLD
	defined.

	* src/dir-list.c (dir_list_interrupt_change_to):
	* libgthumb/file-utils.c (path_list_async_interrupt): Added a DoneFunc
	argument.
	* src/gthumb-window.c: Use the new argument.

2002-08-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-list.c (catalog_list_refresh):
	* src/dir-list.c (dir_list_refresh_continue): Use an upward arrow for
	the ".." entry.

	* src/dir-list.c (add_columns):
	* src/gthumb-window.c (dir_button_press_cb):
	(catalog_button_press_cb):
	* libgthumb/preferences.c (preferences_init): Follow the same button
	click policy of Nautilus.

2002-07-31  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (make_url_list): prepend "file://" for the
	uri-list target.

2002-07-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* components/image-viewer/Makefile.am (libexec_PROGRAMS): install
	in libexec.

2002-07-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-jpegtran.c:
	* src/dlg-jpegtran.h: JPEG lossless transformations tool.

2002-07-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fullscreen.c (show_comment_on_image): Show even the filename.

	* libgthumb/file-list.c (file_list_update_thumb):
	* src/gthumb-window.c (directory_changed):
	(_window_sync_changes): New functions.
	(set_dir_list_continue): Add a monitor on the directory.

2002-07-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_new):
	(window_notify_update_layout): Changed layout number four.

2002-07-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-preloader.c: rename gthumb_preloader_set_paths to
	gthumb_preloader_start and remove the old gthumb_preloader_start. This
	fix a bug when interrupting the loader.

2002-07-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fullscreen.c (show_comment_on_image): New function.
	(image_key_press_cb): Use it when the user press 'c'.

	* configure.in (RENDER_LIBS): Checks for Xft/XRender

2002-07-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (file_new_window_command_impl): Open the new
	window in the same location of the old window.

2002-07-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-open-with.c (open_cb): re-display the dialog if an error
	occurred.

2002-07-11  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-open-with.c (exec_command): Use g_spawn instead of
	gnome_exec, and display an error message if needed.

	* src/dlg-maintenance.c:
	* src/dlg-maintenance.h: New files.  Put all maintenance functions in
	a dialog.

	* src/gtkcellrendererthreestates.h:
	* src/gtkcellrendererthreestates.c:
	* src/dlg-comment.c:
	* src/dlg-categories.c: Comments and categories have separate dialogs
	now.  Better handling of categories when many images have been
	selected.

2002-07-10  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment.c (ok_clicked_cb): Delete empty comments.

2002-07-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb_comments.glade2: added "save only changed fields" option.

	* src/dlg-comment.c (ok_clicked_cb): Implement the "save only changed
	fields" option.

	* libgthumb/comments.c (comments_get_comment_as_string): changed
	comment layout.
	(comments_save_comment_non_null): New function save only non-empty
	fields.

2002-07-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-list.c (image_list_remove): Do not update the width
	after deleting images.

	* src/commands-impl.c (view_zoom_fit_command_impl):
	* src/gthumb-ui.xml: make zoom_fit a stateless command.

2002-07-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* README: Updated to GNOME 2.
	* configure.in: Updated required lib versions.

2002-07-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-viewer.c (image_viewer_button_release): Do not emit
	the click signal if the viewer was not focused before the button press
	event.

	* libgthumb/file-list.c (file_list_select_image_by_pos):
	* libgthumb/image-list.c (image_list_image_is_visible):
	* libgthumb/image-list.h: Define a more fine grained visibility type.

	* libgthumb/bookmarks.c (bookmarks_remove_from):
	(bookmarks_remove): remove the path from the hash tables only when
	it is no more present in the list.

	* src/gthumb-window.c (notify_files_deleted): freeze the list before
	deleting.

	* configure.in: Add AC_PREREQ(2.52)

2002-06-30  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (folder_rename): check whether new_path and
	old_path are the same.
	(edit_folder_move_command_impl):
	(edit_current_folder_move_command_impl):
	(folder_move):
	(folder_move__destroy_cb): Implement the "Move Folder" command.

2002-06-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/main.c (create_default_categories_if_needed): Add default
	categories.

2002-06-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (image_clicked_cb): New function : show next
	image when left click on an image.

2002-06-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/thumb-cache.c (cache_copy):
	(cache_move): Set the mtime of the new thumbnail to the mtime of the
	destination.

	* src/gthumb_png_exporter.glade2:
	* libgthumb/catalog-png-exporter.c (get_footer_text):
	(get_header_text):
	(get_hf_text):
	(export):
	(paint_footer): Use %p to insert page number and %n to insert the
	total number of pages.

2002-06-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_new): use gtk_paned_pack insted of
	gtk_paned_add, and set a size request for the image viewer and image
	list.

	* src/main.c (all_windows_notify_files_rename):
	* src/dlg-rename-series.c:
	* src/dlg-file-utils.c (dlg_file_rename_series): Implements rename
	series.

	* libgthumb/gthumb-slide.c (gthumb_draw_image_shadow_out):
	(gthumb_draw_image_shadow_in): Implements SHADOWN_IN and SHADOW_OUT
	styles.

	* libgthumb/glib-utils.c (_g_substitute): new function.

	* libgthumb/catalog-png-exporter.c (catalog_png_exporter_set_header):
	(catalog_png_exporter_set_footer): allow NULL values.
	(paint_frame): added SHADOW_IN and SHADOW_OUT styles.

	* gthumb.desktop.in: make entries specification compliant.

2002-06-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml
	* libgthumb/catalog-png-exporter.c:
	* libgthumb/catalog-png-exporter.h:
	* src/dlg-png-exporter.h:
	* src/dlg-png-exporter.c: Implemented header and footer support.

2002-06-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-preferences.c: add the toolbar style option.

	* src/gthumb-window.c (window_notify_update_toolbar_style): New
	function, update toolbar style according to preferences.

2002-06-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-search.c: Remove MAX_CATEGORIES.

	* doc/C/gthumb.xml: Sync manual with UI changes.  Added the preferences
	dialog documentation.

	* src/dlg-preferences.c (dlg_preferences): Add the help button.

2002-06-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gtk-utils.c (_gtk_error_dialog_run):
	(_gtk_info_dialog_run): Set the parent window.

	* src/gthumb-window.c (view_image_at_pos): reload the image if the
	mtime changed.

	* src/dlg-png-exporter.c: Use the new name template functions.

	* src/commands-impl.c (alter_image_rotate_command_impl): Set mtime to 0
	after altering an image so when clicking on the thumbnail the image
	get reloaded.

	* src/auto-completion.c (auto_compl_show_alternatives): Use the library
	icon if we are navigating the catalogs.

	* libgthumb/pixbf-utils.c: remove pixbuf_to_file_as_png, use
	gdk_pixbuf_save instead.

	* libgthumb/nav-window.c (NAV_WIN_MAX_WIDTH): change the max window
	size from 128 to 112.

	* libgthumb/gthumb-slide.c (gthumb_draw_frame_shadow):
	(gthumb_draw_image_shadow): New functions.

	* libgthumb/glib-utils.c (_g_get_template_from_text): New function.
	(_g_get_name_from_template): New function.

	* libgthumb/file-utils.c (get_path_relative_to_dir): New function.
	(remove_special_dirs_from_path): New Function.

	* libgthumb/catalog-png-exporter.h: Added new frame style :
	FRAME_STYLE_SIMPLE_WITH_SHADOW.

	* libgthumb/catalog-png-exporter.c (paint_comment): New function to
	paint comments with italic font.
	(catalog_png_exporter_set_name_template): New function.
	(catalog_png_exporter_set_start_at): New function.
	(catalog_png_exporter_set_header):
	(catalog_png_exporter_set_header_font):
	(catalog_png_exporter_set_header_color):
	(catalog_png_exporter_set_footer):
	(catalog_png_exporter_set_footer_font):
	(catalog_png_exporter_set_footer_color): New functions, not implemented
	yet.
	(export): Do not try to paint an image when the pixbuf is NULL.
	(begin_page): Use _g_get_name_from_template to get filename.

	* configure.in: remove the libpng check we use gdk_pixbuf_save to save
	png images now.

2002-06-03  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gthumb-slide.h:
	* libgthumb/gthumb-slide.c: New file.

	* libgthumb/catalog-png-exporter.c (get_relative_path): New function.
	(paint_frame): use get_relative_path to set the image path in the HTML
	area.

	* src/dlg-png-exporter.c (export): If the destination directory does
	not exist ask the user whether to create it.

	* libgthumb/gtk-utils.c (_gtk_info_dialog_run): New function.

	* src/dlg-search.c (update_list_from_entry): New function to set the
	category list from the content of the category entry.
	(choose_categories_cb):
	(dlg_search_ui): Use update_list_from_entry.

	* libgthumb/preferences.c (preferences_load): Set
	ZOOM_CHANGE_FIT_IF_LARGER as the default zoom change.

2002-06-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (rename_file): Do not rename a file if source and
	destination are the same.
	(help_about_command_impl): Do not allow more than one about dialog.

	* libgthumb/gtk-utils.c (_gtk_yesno_dialog_new): New function.

	* src/dlg-file-utils.c (dlg_file_delete):
	* src/commands-impl.c (rename_file):
	(edit_remove_from_catalog_command_impl):
	(folder_delete):
	(catalog_delete): Use _gtk_yesno_dialog_new when appropriate.

2002-06-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/preferences.c:
	* src/gthumb-window.c: Save and restore toolbar and statusbar
	visibility.

2002-05-30  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb_search.glade2:
	* src/dlg-search.c: Added "Choose Categories" dialog.

	* libgthumb/preferences.c (preferences_load): Set go_to_last_localtion
	the default behaviour.

	* src/gthumb-preloader.c (gthumb_preloader_set_paths): Use MAX priority
	for the requested image, DEFAULT priority for other images.

	* libgthumb/image-loader.c (image_loader_set_priority): New function.

	* src/gthumb-preloader.c:
	* src/gthumb-windowr.c: Load even current image with the preloader,
	this let us avoid a redundant loading that occured with the previous
	implementation.

	* libgthumb/gthumb-text-item.c (gthumb_text_item_destroy):
	* src/gthumb-window.c (window_update_statusbar_list_info): plug a few
	memleaks.

2002-05-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml: Added the entry : View->Black and White.

	* libgthumb/image-viewer.c (image_viewer_alter): ALTER_GRAY added.

	* libgthumb/pixbuf-utils.c (pixbuf_copy_gray): The function that
	implements the desaturation.

	* libgthumb/image-loader.c (image_loader_load_from_image_loader):
	* libgthumb/image-viewer.c (image_viewer_load_from_image_loader): New
	functions used by the preloader.

	* src/gthumb-window.c: Use the preloader.

	* src/gthumb-preloader.c:
	* src/gthumb-preloader.h: Added an image preloader.


2002-05-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/thumb-cache.c (cache_move):
	(cache_copy): overwrite destination.

	* libgthumb/comments.c (comment_copy):
	(comment_move): overwrite destination.

	* src/dlg-file-utils.c (dlg_show_error): translate message to utf8.

2002-05-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-preferences.c:
	* libgthumb/preferences.h: Added "fast file type" option.

	* libgthumb/image-viewer.c (image_viewer_style_set): Added
	TRANSP_TYPE_NONE which uses the gtk theme color to paint transparency.

	* src/gthumb-window.c: Added EditCurrentDir_* and EditCurrentCatalog_*
	commands.  These are the commands displayed in the main menu
	and work a bit different from the commands in the context menus.
	Added Image_* commands displayed in the viewer context menu.
	Display image name in the "Info Bar" and other information in the
	status bar.  Activate progress bar when loading an image.
	Fixed double-click in the file list.  Use Page Down/Up to view the
	next/prev image when the viewer is focused.  Focus the image when
	click on the Info Bar.  Removed custom icons for zoom buttons, use gtk
	stock icons instead.  Stopping the slideshow exit from fullscreen mode.
	Minor usability enhancements.

	* src/gthumb-window.c (window_notify_directory_rename):
	(window_notify_directory_delete):
	(window_notify_directory_new):
	(window_notify_catalog_rename):
	(window_notify_catalog_delete): new functions.

	* src/dlg-comment.c (update_category_entry): use categories
	instead of keywords.  Added a category list.

	* src/dlg-search.c: removed the gthumb_search_edit.glade2 file, the
	progress dialog for "Edit search" is is gthumb_search.glade2 now.

	* src/gthumb-ui.xml: changed arrangement of menus.

2002-05-11  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_show_image_pane):
	(window_hide_image_pane): new functions.

	* libgthumb/preferences.c (preferences_set_default_values): changed
	some default values.

	* libgthumb/gthumb-text-item.c (gthumb_text_item_draw): use paint_focus
	instead of draw_focus.

	* libgthumb/gthumb-info-bar.c: removed useless variables.
	(gthumb_info_bar_set_text): show a tootip when the labelis not full
	visible.

	* configure.in (GETTEXT_PACKAGE): changed GETTEXT_PACKAGE to gthumb-2.0

	* Makefile.am: added doc and omf-install directories.

2002-05-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/main.c (get_icon_path_from_name): Add .nautilus/themes to the
	search path.

	* src/gthumb-ui.xml: Removed ellipsis where not needed.

	* components/image-viewer/GNOME_GThumb_Viewer.xml.in: Add a toolbar
	with the rotate, flip and mirror commands.

2002-05-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/catalog-png-exporter.c:
	* src/dlg-png-exporter.c: Added the image preview.

2002-04-30  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (edit_folder_delete_command_impl): update cache
	when deleting a folder.
	(edit_folder_open_command_impl): Added "open with Naulitus" command,
	deleted "Move folder" command.

	* libgthumb/comments.c (comments_remove_old_comments_async):
	* libgthumb/thumb-cache.c (cache_remove_old_previews_async): Show a
	dialog while deleting old thumbnails and old comments.

	* src/commands-impl.c (edit_folder_rename_command_impl): Update cache
	when renaming a folder.

2002-04-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* all files: Removed deprecated functions.

2002-04-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-viewer.c (image_viewer_expose): Draw the frame in
	black color when the black background is on.  Fixed animation start up
	when using zoom changes different from "Keep previous zoom".

	* src/main.[ch]:
	* src/gthumb-window.c:
	* src/icons/*.png: Use the nautilus folder icon for folders. Changed
	some toolbar icons.

	* libgthumb/gtk-utils.c (_gtk_image_new_from_inline): New function.

	* libgthumb/file-utils.c (file_extension_is): New function.

2002-04-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (edit_folder_rename_command_impl): Implemented.
	(edit_folder_delete_command_impl): Implemented.

	* libgthumb/gtk-utils.c (_gtk_error_dialog_run): New function.
	(_gtk_error_dialog_from_gerror_run): New function.

	* src/commands-impl.c: Use above functions to show error dialogs.

2002-04-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	*libgthumb/gthumb-error.[ch]: new file.

	* libgthumb/catalog.c:
	* libgthumb/catalog.h: Added GError argument to some functions.

	* src/commands-impl.c:
	* src/dlg-preferences.c:
	* libgthumb/preferences.[hc]: Removed redundant options.

2002-04-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-open-with.c (delete_recent_cb): Compare the strings not the
	pointers.

	* Imported all files.

